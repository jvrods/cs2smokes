var gk=Object.defineProperty,yk=Object.defineProperties;var vk=Object.getOwnPropertyDescriptors;var hl=Object.getOwnPropertySymbols,_k=Object.getPrototypeOf,Gb=Object.prototype.hasOwnProperty,Wb=Object.prototype.propertyIsEnumerable,Ik=Reflect.get;var qb=(n,e,t)=>e in n?gk(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,V=(n,e)=>{for(var t in e||={})Gb.call(e,t)&&qb(n,t,e[t]);if(hl)for(var t of hl(e))Wb.call(e,t)&&qb(n,t,e[t]);return n},de=(n,e)=>yk(n,vk(e));var Jp=(n,e)=>{var t={};for(var r in n)Gb.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&hl)for(var r of hl(n))e.indexOf(r)<0&&Wb.call(n,r)&&(t[r]=n[r]);return t};var sr=(n,e,t)=>Ik(_k(n),t,e);var g=(n,e,t)=>new Promise((r,i)=>{var s=c=>{try{a(t.next(c))}catch(l){i(l)}},o=c=>{try{a(t.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((t=t.apply(n,e)).next())});function Kb(n,e){return Object.is(n,e)}var rt=null,fl=!1,pl=1,or=Symbol("SIGNAL");function we(n){let e=rt;return rt=n,e}function Qb(){return rt}var Ya={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function em(n){if(fl)throw new Error("");if(rt===null)return;rt.consumerOnSignalRead(n);let e=rt.nextProducerIndex++;if(vl(rt),e<rt.producerNode.length&&rt.producerNode[e]!==n&&Qa(rt)){let t=rt.producerNode[e];yl(t,rt.producerIndexOfThis[e])}rt.producerNode[e]!==n&&(rt.producerNode[e]=n,rt.producerIndexOfThis[e]=Qa(rt)?Xb(n,rt,e):0),rt.producerLastReadVersion[e]=n.version}function wk(){pl++}function Yb(n){if(!(Qa(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===pl)){if(!n.producerMustRecompute(n)&&!nm(n)){n.dirty=!1,n.lastCleanEpoch=pl;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=pl}}function Jb(n){if(n.liveConsumerNode===void 0)return;let e=fl;fl=!0;try{for(let t of n.liveConsumerNode)t.dirty||Ek(t)}finally{fl=e}}function Zb(){return rt?.consumerAllowSignalWrites!==!1}function Ek(n){n.dirty=!0,Jb(n),n.consumerMarkedDirty?.(n)}function gl(n){return n&&(n.nextProducerIndex=0),we(n)}function tm(n,e){if(we(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Qa(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)yl(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function nm(n){vl(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Yb(t),r!==t.version))return!0}return!1}function rm(n){if(vl(n),Qa(n))for(let e=0;e<n.producerNode.length;e++)yl(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Xb(n,e,t){if(e0(n),n.liveConsumerNode.length===0&&t0(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=Xb(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function yl(n,e){if(e0(n),n.liveConsumerNode.length===1&&t0(n))for(let r=0;r<n.producerNode.length;r++)yl(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];vl(i),i.producerIndexOfThis[r]=e}}function Qa(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function vl(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function e0(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function t0(n){return n.producerNode!==void 0}function n0(n){let e=Object.create(bk);e.computation=n;let t=()=>{if(Yb(e),em(e),e.value===ml)throw e.error;return e.value};return t[or]=e,t}var Zp=Symbol("UNSET"),Xp=Symbol("COMPUTING"),ml=Symbol("ERRORED"),bk=de(V({},Ya),{value:Zp,dirty:!0,error:null,equal:Kb,producerMustRecompute(n){return n.value===Zp||n.value===Xp},producerRecomputeValue(n){if(n.value===Xp)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Xp;let t=gl(n),r;try{r=n.computation()}catch(i){r=ml,n.error=i}finally{tm(n,t)}if(e!==Zp&&e!==ml&&r!==ml&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function Tk(){throw new Error}var r0=Tk;function i0(){r0()}function s0(n){r0=n}var Ck=null;function o0(n){let e=Object.create(c0);e.value=n;let t=()=>(em(e),e.value);return t[or]=e,t}function im(n,e){Zb()||i0(),n.equal(n.value,e)||(n.value=e,Dk(n))}function a0(n,e){Zb()||i0(),im(n,e(n.value))}var c0=de(V({},Ya),{equal:Kb,value:void 0});function Dk(n){n.version++,wk(),Jb(n),Ck?.()}function oe(n){return typeof n=="function"}function qs(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var _l=qs(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Hi(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Be=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(oe(r))try{r()}catch(s){e=s instanceof _l?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{u0(s)}catch(o){e=e??[],o instanceof _l?e=[...e,...o.errors]:e.push(o)}}if(e)throw new _l(e)}}add(e){var t;if(e&&e!==this)if(this.closed)u0(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Hi(t,e)}remove(e){let{_finalizers:t}=this;t&&Hi(t,e),e instanceof n&&e._removeParent(this)}};Be.EMPTY=(()=>{let n=new Be;return n.closed=!0,n})();var sm=Be.EMPTY;function Il(n){return n instanceof Be||n&&"closed"in n&&oe(n.remove)&&oe(n.add)&&oe(n.unsubscribe)}function u0(n){oe(n)?n():n.unsubscribe()}var fn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Gs={setTimeout(n,e,...t){let{delegate:r}=Gs;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Gs;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function wl(n){Gs.setTimeout(()=>{let{onUnhandledError:e}=fn;if(e)e(n);else throw n})}function Ja(){}var l0=om("C",void 0,void 0);function d0(n){return om("E",void 0,n)}function h0(n){return om("N",n,void 0)}function om(n,e,t){return{kind:n,value:e,error:t}}var zi=null;function Ws(n){if(fn.useDeprecatedSynchronousErrorHandling){let e=!zi;if(e&&(zi={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=zi;if(zi=null,t)throw r}}else n()}function f0(n){fn.useDeprecatedSynchronousErrorHandling&&zi&&(zi.errorThrown=!0,zi.error=n)}var qi=class extends Be{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Il(e)&&e.add(this)):this.destination=Rk}static create(e,t,r){return new Ks(e,t,r)}next(e){this.isStopped?cm(h0(e),this):this._next(e)}error(e){this.isStopped?cm(d0(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?cm(l0,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Sk=Function.prototype.bind;function am(n,e){return Sk.call(n,e)}var um=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){El(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){El(r)}else El(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){El(t)}}},Ks=class extends qi{constructor(e,t,r){super();let i;if(oe(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&fn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&am(e.next,s),error:e.error&&am(e.error,s),complete:e.complete&&am(e.complete,s)}):i=e}this.destination=new um(i)}};function El(n){fn.useDeprecatedSynchronousErrorHandling?f0(n):wl(n)}function Ak(n){throw n}function cm(n,e){let{onStoppedNotification:t}=fn;t&&Gs.setTimeout(()=>t(n,e))}var Rk={closed:!0,next:Ja,error:Ak,complete:Ja};var Qs=typeof Symbol=="function"&&Symbol.observable||"@@observable";function zt(n){return n}function Ys(...n){return lm(n)}function lm(n){return n.length===0?zt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ce=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=Nk(t)?t:new Ks(t,r,i);return Ws(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=p0(r),new r((i,s)=>{let o=new Ks({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Qs](){return this}pipe(...t){return lm(t)(this)}toPromise(t){return t=p0(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function p0(n){var e;return(e=n??fn.Promise)!==null&&e!==void 0?e:Promise}function Mk(n){return n&&oe(n.next)&&oe(n.error)&&oe(n.complete)}function Nk(n){return n&&n instanceof qi||Mk(n)&&Il(n)}function dm(n){return oe(n?.lift)}function _e(n){return e=>{if(dm(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ye(n,e,t,r,i){return new hm(n,e,t,r,i)}var hm=class extends qi{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Js(){return _e((n,e)=>{let t=null;n._refCount++;let r=ye(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Zs=class extends ce{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,dm(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Be;let t=this.getSubject();e.add(this.source.subscribe(ye(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Be.EMPTY)}return e}refCount(){return Js()(this)}};var m0=qs(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var st=(()=>{class n extends ce{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new bl(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new m0}next(t){Ws(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Ws(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Ws(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?sm:(this.currentObservers=null,s.push(t),new Be(()=>{this.currentObservers=null,Hi(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new ce;return t.source=this,t}}return n.create=(e,t)=>new bl(e,t),n})(),bl=class extends st{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:sm}};var ut=class extends st{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var fm={now(){return(fm.delegate||Date).now()},delegate:void 0};var Tl=class extends Be{constructor(e,t){super()}schedule(e,t=0){return this}};var Za={setInterval(n,e,...t){let{delegate:r}=Za;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Za;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Xs=class extends Tl{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return Za.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Za.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Hi(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var eo=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};eo.now=fm.now;var to=class extends eo{constructor(e,t=eo.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var pm=new to(Xs);var Cl=class extends Xs{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Dl=class extends to{};var mm=new Dl(Cl);var qt=new ce(n=>n.complete());function g0(n){return n&&oe(n.schedule)}function y0(n){return n[n.length-1]}function Sl(n){return oe(y0(n))?n.pop():void 0}function zr(n){return g0(y0(n))?n.pop():void 0}function Wi(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function _0(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{l(r.next(h))}catch(p){o(p)}}function c(h){try{l(r.throw(h))}catch(p){o(p)}}function l(h){h.done?s(h.value):i(h.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function v0(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Gi(n){return this instanceof Gi?(this.v=n,this):new Gi(n)}function I0(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(v){return function(C){return Promise.resolve(C).then(v,p)}}function a(v,C){r[v]&&(i[v]=function(M){return new Promise(function(A,F){s.push([v,M,A,F])>1||c(v,M)})},C&&(i[v]=C(i[v])))}function c(v,C){try{l(r[v](C))}catch(M){y(s[0][3],M)}}function l(v){v.value instanceof Gi?Promise.resolve(v.value.v).then(h,p):y(s[0][2],v)}function h(v){c("next",v)}function p(v){c("throw",v)}function y(v,C){v(C),s.shift(),s.length&&c(s[0][0],s[0][1])}}function w0(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof v0=="function"?v0(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var Al=n=>n&&typeof n.length=="number"&&typeof n!="function";function Rl(n){return oe(n?.then)}function Ml(n){return oe(n[Qs])}function Nl(n){return Symbol.asyncIterator&&oe(n?.[Symbol.asyncIterator])}function Pl(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Pk(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var xl=Pk();function kl(n){return oe(n?.[xl])}function Ol(n){return I0(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Gi(t.read());if(i)return yield Gi(void 0);yield yield Gi(r)}}finally{t.releaseLock()}})}function Ll(n){return oe(n?.getReader)}function Qe(n){if(n instanceof ce)return n;if(n!=null){if(Ml(n))return xk(n);if(Al(n))return kk(n);if(Rl(n))return Ok(n);if(Nl(n))return E0(n);if(kl(n))return Lk(n);if(Ll(n))return Fk(n)}throw Pl(n)}function xk(n){return new ce(e=>{let t=n[Qs]();if(oe(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function kk(n){return new ce(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function Ok(n){return new ce(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,wl)})}function Lk(n){return new ce(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function E0(n){return new ce(e=>{Vk(n,e).catch(t=>e.error(t))})}function Fk(n){return E0(Ol(n))}function Vk(n,e){var t,r,i,s;return _0(this,void 0,void 0,function*(){try{for(t=w0(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function Lt(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function qr(n,e=0){return _e((t,r)=>{t.subscribe(ye(r,i=>Lt(r,n,()=>r.next(i),e),()=>Lt(r,n,()=>r.complete(),e),i=>Lt(r,n,()=>r.error(i),e)))})}function Gr(n,e=0){return _e((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function b0(n,e){return Qe(n).pipe(Gr(e),qr(e))}function T0(n,e){return Qe(n).pipe(Gr(e),qr(e))}function C0(n,e){return new ce(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function D0(n,e){return new ce(t=>{let r;return Lt(t,e,()=>{r=n[xl](),Lt(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>oe(r?.return)&&r.return()})}function Fl(n,e){if(!n)throw new Error("Iterable cannot be null");return new ce(t=>{Lt(t,e,()=>{let r=n[Symbol.asyncIterator]();Lt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function S0(n,e){return Fl(Ol(n),e)}function A0(n,e){if(n!=null){if(Ml(n))return b0(n,e);if(Al(n))return C0(n,e);if(Rl(n))return T0(n,e);if(Nl(n))return Fl(n,e);if(kl(n))return D0(n,e);if(Ll(n))return S0(n,e)}throw Pl(n)}function Se(n,e){return e?A0(n,e):Qe(n)}function te(...n){let e=zr(n);return Se(n,e)}function no(n,e){let t=oe(n)?n:()=>n,r=i=>i.error(t());return new ce(e?i=>e.schedule(r,0,i):r)}function gm(n){return!!n&&(n instanceof ce||oe(n.lift)&&oe(n.subscribe))}var ar=qs(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Q(n,e){return _e((t,r)=>{let i=0;t.subscribe(ye(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:Uk}=Array;function jk(n,e){return Uk(e)?n(...e):n(e)}function Vl(n){return Q(e=>jk(n,e))}var{isArray:Bk}=Array,{getPrototypeOf:$k,prototype:Hk,keys:zk}=Object;function Ul(n){if(n.length===1){let e=n[0];if(Bk(e))return{args:e,keys:null};if(qk(e)){let t=zk(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function qk(n){return n&&typeof n=="object"&&$k(n)===Hk}function jl(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Bl(...n){let e=zr(n),t=Sl(n),{args:r,keys:i}=Ul(n);if(r.length===0)return Se([],e);let s=new ce(Gk(r,e,i?o=>jl(i,o):zt));return t?s.pipe(Vl(t)):s}function Gk(n,e,t=zt){return r=>{R0(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)R0(e,()=>{let l=Se(n[c],e),h=!1;l.subscribe(ye(r,p=>{s[c]=p,h||(h=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function R0(n,e,t){n?Lt(t,n,e):e()}function M0(n,e,t,r,i,s,o,a){let c=[],l=0,h=0,p=!1,y=()=>{p&&!c.length&&!l&&e.complete()},v=M=>l<r?C(M):c.push(M),C=M=>{s&&e.next(M),l++;let A=!1;Qe(t(M,h++)).subscribe(ye(e,F=>{i?.(F),s?v(F):e.next(F)},()=>{A=!0},void 0,()=>{if(A)try{for(l--;c.length&&l<r;){let F=c.shift();o?Lt(e,o,()=>C(F)):C(F)}y()}catch(F){e.error(F)}}))};return n.subscribe(ye(e,v,()=>{p=!0,y()})),()=>{a?.()}}function it(n,e,t=1/0){return oe(e)?it((r,i)=>Q((s,o)=>e(r,s,i,o))(Qe(n(r,i))),t):(typeof e=="number"&&(t=e),_e((r,i)=>M0(r,i,n,t)))}function ym(n=1/0){return it(zt,n)}function N0(){return ym(1)}function ro(...n){return N0()(Se(n,zr(n)))}function $l(n){return new ce(e=>{Qe(n()).subscribe(e)})}function vm(...n){let e=Sl(n),{args:t,keys:r}=Ul(n),i=new ce(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let h=0;h<o;h++){let p=!1;Qe(t[h]).subscribe(ye(s,y=>{p||(p=!0,l--),a[h]=y},()=>c--,void 0,()=>{(!c||!p)&&(l||s.next(r?jl(r,a):a),s.complete())}))}});return e?i.pipe(Vl(e)):i}function Gt(n,e){return _e((t,r)=>{let i=0;t.subscribe(ye(r,s=>n.call(e,s,i++)&&r.next(s)))})}function Wr(n){return _e((e,t)=>{let r=null,i=!1,s;r=e.subscribe(ye(t,void 0,void 0,o=>{s=Qe(n(o,Wr(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function P0(n,e,t,r,i){return(s,o)=>{let a=t,c=e,l=0;s.subscribe(ye(o,h=>{let p=l++;c=a?n(c,h,p):(a=!0,h),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function Kr(n,e){return oe(e)?it(n,e,1):it(n,1)}function Qr(n){return _e((e,t)=>{let r=!1;e.subscribe(ye(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Ft(n){return n<=0?()=>qt:_e((e,t)=>{let r=0;e.subscribe(ye(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function _m(n){return Q(()=>n)}function Hl(n=Wk){return _e((e,t)=>{let r=!1;e.subscribe(ye(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Wk(){return new ar}function Ki(n){return _e((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Mn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Gt((i,s)=>n(i,s,r)):zt,Ft(1),t?Qr(e):Hl(()=>new ar))}function io(n){return n<=0?()=>qt:_e((e,t)=>{let r=[];e.subscribe(ye(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Im(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Gt((i,s)=>n(i,s,r)):zt,io(1),t?Qr(e):Hl(()=>new ar))}function wm(n,e){return _e(P0(n,e,arguments.length>=2,!0))}function Em(...n){let e=zr(n);return _e((t,r)=>{(e?ro(n,t,e):ro(n,t)).subscribe(r)})}function ot(n,e){return _e((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(ye(r,c=>{i?.unsubscribe();let l=0,h=s++;Qe(n(c,h)).subscribe(i=ye(r,p=>r.next(e?e(c,p,h,l++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function bm(n){return _e((e,t)=>{Qe(n).subscribe(ye(t,()=>t.complete(),Ja)),!t.closed&&e.subscribe(t)})}function Ye(n,e,t){let r=oe(n)||e||t?{next:n,error:e,complete:t}:n;return r?_e((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(ye(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):zt}var ET="https://g.co/ng/security#xss",K=class extends Error{constructor(e,t){super(Dd(e,t)),this.code=e}};function Dd(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function lc(n){return{toString:n}.toString()}var zl="__parameters__";function Kk(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function bT(n,e,t){return lc(()=>{let r=Kk(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,h){let p=c.hasOwnProperty(zl)?c[zl]:Object.defineProperty(c,zl,{value:[]})[zl];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var nc=globalThis;function Ne(n){for(let e in n)if(n[e]===Ne)return e;throw Error("Could not find renamed property on target object.")}function Qk(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Nt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Nt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function x0(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var Yk=Ne({__forward_ref__:Ne});function hr(n){return n.__forward_ref__=hr,n.toString=function(){return Nt(this())},n}function Mt(n){return TT(n)?n():n}function TT(n){return typeof n=="function"&&n.hasOwnProperty(Yk)&&n.__forward_ref__===hr}function q(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function fr(n){return{providers:n.providers||[],imports:n.imports||[]}}function Sd(n){return k0(n,DT)||k0(n,ST)}function CT(n){return Sd(n)!==null}function k0(n,e){return n.hasOwnProperty(e)?n[e]:null}function Jk(n){let e=n&&(n[DT]||n[ST]);return e||null}function O0(n){return n&&(n.hasOwnProperty(L0)||n.hasOwnProperty(Zk))?n[L0]:null}var DT=Ne({\u0275prov:Ne}),L0=Ne({\u0275inj:Ne}),ST=Ne({ngInjectableDef:Ne}),Zk=Ne({ngInjectorDef:Ne}),z=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=q({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function AT(n){return n&&!!n.\u0275providers}var Xk=Ne({\u0275cmp:Ne}),eO=Ne({\u0275dir:Ne}),tO=Ne({\u0275pipe:Ne}),nO=Ne({\u0275mod:Ne}),nd=Ne({\u0275fac:Ne}),tc=Ne({__NG_ELEMENT_ID__:Ne}),F0=Ne({__NG_ENV_ID__:Ne});function Ad(n){return typeof n=="string"?n:n==null?"":String(n)}function rO(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Ad(n)}function iO(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new K(-200,n)}function Pg(n,e){throw new K(-201,!1)}var fe=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(fe||{}),Fm;function RT(){return Fm}function Vt(n){let e=Fm;return Fm=n,e}function MT(n,e,t){let r=Sd(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&fe.Optional)return null;if(e!==void 0)return e;Pg(n,"Injector")}var sO={},rc=sO,Vm="__NG_DI_FLAG__",rd="ngTempTokenPath",oO="ngTokenPath",aO=/\n/gm,cO="\u0275",V0="__source",co;function uO(){return co}function Yr(n){let e=co;return co=n,e}function lO(n,e=fe.Default){if(co===void 0)throw new K(-203,!1);return co===null?MT(n,void 0,e):co.get(n,e&fe.Optional?null:void 0,e)}function X(n,e=fe.Default){return(RT()||lO)(Mt(n),e)}function O(n,e=fe.Default){return X(n,Rd(e))}function Rd(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Um(n){let e=[];for(let t=0;t<n.length;t++){let r=Mt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new K(900,!1);let i,s=fe.Default;for(let o=0;o<r.length;o++){let a=r[o],c=dO(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(X(i,s))}else e.push(X(r))}return e}function NT(n,e){return n[Vm]=e,n.prototype[Vm]=e,n}function dO(n){return n[Vm]}function hO(n,e,t,r){let i=n[rd];throw e[V0]&&i.unshift(e[V0]),n.message=fO(`
`+n.message,i,t,r),n[oO]=i,n[rd]=null,n}function fO(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==cO?n.slice(2):n;let i=Nt(e);if(Array.isArray(e))i=e.map(Nt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Nt(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(aO,`
  `)}`}var Xe=NT(bT("Optional"),8);var PT=NT(bT("SkipSelf"),4);function Yi(n,e){let t=n.hasOwnProperty(nd);return t?n[nd]:null}function xg(n,e){n.forEach(t=>Array.isArray(t)?xg(t,e):e(t))}function xT(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function id(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function pO(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function mO(n,e,t){let r=dc(n,e);return r>=0?n[r|1]=t:(r=~r,pO(n,r,e,t)),r}function Tm(n,e){let t=dc(n,e);if(t>=0)return n[t|1]}function dc(n,e){return gO(n,e,1)}function gO(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var lo={},en=[],ho=new z(""),kT=new z("",-1),OT=new z(""),sd=class{get(e,t=rc){if(t===rc){let r=new Error(`NullInjectorError: No provider for ${Nt(e)}!`);throw r.name="NullInjectorError",r}return t}},LT=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(LT||{}),xn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(xn||{}),Xr=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Xr||{});function yO(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function jm(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];vO(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function FT(n){return n===3||n===4||n===6}function vO(n){return n.charCodeAt(0)===64}function ic(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?U0(n,t,i,null,e[++r]):U0(n,t,i,null,null))}}return n}function U0(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[s+1]=i);return}else if(r===n[s+1]){n[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),r!==null&&n.splice(s++,0,r),i!==null&&n.splice(s++,0,i)}var VT="ng-template";function _O(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&yO(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(kg(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function kg(n){return n.type===4&&n.value!==VT}function IO(n,e,t){let r=n.type===4&&!t?VT:n.value;return e===r}function wO(n,e,t){let r=4,i=n.attrs,s=i!==null?TO(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!pn(r)&&!pn(c))return!1;if(o&&pn(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!IO(n,c,t)||c===""&&e.length===1){if(pn(r))return!1;o=!0}}else if(r&8){if(i===null||!_O(n,i,c,t)){if(pn(r))return!1;o=!0}}else{let l=e[++a],h=EO(c,i,kg(n),t);if(h===-1){if(pn(r))return!1;o=!0;continue}if(l!==""){let p;if(h>s?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(pn(r))return!1;o=!0}}}}return pn(r)||o}function pn(n){return(n&1)===0}function EO(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return CO(e,n)}function bO(n,e,t=!1){for(let r=0;r<e.length;r++)if(wO(n,e[r],t))return!0;return!1}function TO(n){for(let e=0;e<n.length;e++){let t=n[e];if(FT(t))return e}return n.length}function CO(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function j0(n,e){return n?":not("+e.trim()+")":e}function DO(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!pn(o)&&(e+=j0(s,i),i=""),r=o,s=s||!pn(r);t++}return i!==""&&(e+=j0(s,i)),e}function SO(n){return n.map(DO).join(",")}function AO(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!pn(i))break;i=s}r++}return{attrs:e,classes:t}}function sn(n){return lc(()=>{let e=HT(n),t=de(V({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===LT.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||xn.Emulated,styles:n.styles||en,_:null,schemas:n.schemas||null,tView:null,id:""});zT(t);let r=n.dependencies;return t.directiveDefs=$0(r,!1),t.pipeDefs=$0(r,!0),t.id=NO(t),t})}function RO(n){return Ji(n)||UT(n)}function MO(n){return n!==null}function pr(n){return lc(()=>({type:n.type,bootstrap:n.bootstrap||en,declarations:n.declarations||en,imports:n.imports||en,exports:n.exports||en,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function B0(n,e){if(n==null)return lo;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a=Xr.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=a!==Xr.None?[r,a]:r,e[s]=o):t[s]=r}return t}function $e(n){return lc(()=>{let e=HT(n);return zT(e),e})}function bo(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function Ji(n){return n[Xk]||null}function UT(n){return n[eO]||null}function jT(n){return n[tO]||null}function BT(n){let e=Ji(n)||UT(n)||jT(n);return e!==null?e.standalone:!1}function $T(n,e){let t=n[nO]||null;if(!t&&e===!0)throw new Error(`Type ${Nt(n)} does not have '\u0275mod' property.`);return t}function HT(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||lo,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||en,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:B0(n.inputs,e),outputs:B0(n.outputs),debugInfo:null}}function zT(n){n.features?.forEach(e=>e(n))}function $0(n,e){if(!n)return null;let t=e?jT:RO;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(MO)}function NO(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function jt(n){return{\u0275providers:n}}function PO(...n){return{\u0275providers:qT(!0,n),\u0275fromNgModule:!0}}function qT(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return xg(e,o=>{let a=o;Bm(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&GT(i,s),t}function GT(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Og(i,s=>{e(s,r)})}}function Bm(n,e,t,r){if(n=Mt(n),!n)return!1;let i=null,s=O0(n),o=!s&&Ji(n);if(!s&&!o){let c=n.ngModule;if(s=O0(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)Bm(l,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{xg(s.imports,h=>{Bm(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&GT(l,e)}if(!a){let l=Yi(i)||(()=>new i);e({provide:i,useFactory:l,deps:en},i),e({provide:OT,useValue:i,multi:!0},i),e({provide:ho,useValue:()=>X(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=n;Og(c,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Og(n,e){for(let t of n)AT(t)&&(t=t.\u0275providers),Array.isArray(t)?Og(t,e):e(t)}var xO=Ne({provide:String,useValue:Ne});function WT(n){return n!==null&&typeof n=="object"&&xO in n}function kO(n){return!!(n&&n.useExisting)}function OO(n){return!!(n&&n.useFactory)}function fo(n){return typeof n=="function"}function LO(n){return!!n.useClass}var Md=new z(""),Jl={},FO={},Cm;function Lg(){return Cm===void 0&&(Cm=new sd),Cm}var Ut=class{},sc=class extends Ut{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Hm(e,o=>this.processProvider(o)),this.records.set(kT,so(void 0,this)),i.has("environment")&&this.records.set(Ut,so(void 0,this));let s=this.records.get(Md);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(OT,en,fe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=we(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),we(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Yr(this),r=Vt(void 0),i;try{return e()}finally{Yr(t),Vt(r)}}get(e,t=rc,r=fe.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(F0))return e[F0](this);r=Rd(r);let i,s=Yr(this),o=Vt(void 0);try{if(!(r&fe.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=$O(e)&&Sd(e);l&&this.injectableDefInScope(l)?c=so($m(e),Jl):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&fe.Self?Lg():this.parent;return t=r&fe.Optional&&t===rc?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[rd]=a[rd]||[]).unshift(Nt(e)),s)throw a;return hO(a,e,"R3InjectorError",this.source)}else throw a}finally{Vt(o),Yr(s)}}resolveInjectorInitializers(){let e=we(null),t=Yr(this),r=Vt(void 0),i;try{let s=this.get(ho,en,fe.Self);for(let o of s)o()}finally{Yr(t),Vt(r),we(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Nt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new K(205,!1)}processProvider(e){e=Mt(e);let t=fo(e)?e:Mt(e&&e.provide),r=UO(e);if(!fo(e)&&e.multi===!0){let i=this.records.get(t);i||(i=so(void 0,Jl,!0),i.factory=()=>Um(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=we(null);try{return t.value===Jl&&(t.value=FO,t.value=t.factory()),typeof t.value=="object"&&t.value&&BO(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{we(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Mt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function $m(n){let e=Sd(n),t=e!==null?e.factory:Yi(n);if(t!==null)return t;if(n instanceof z)throw new K(204,!1);if(n instanceof Function)return VO(n);throw new K(204,!1)}function VO(n){if(n.length>0)throw new K(204,!1);let t=Jk(n);return t!==null?()=>t.factory(n):()=>new n}function UO(n){if(WT(n))return so(void 0,n.useValue);{let e=KT(n);return so(e,Jl)}}function KT(n,e,t){let r;if(fo(n)){let i=Mt(n);return Yi(i)||$m(i)}else if(WT(n))r=()=>Mt(n.useValue);else if(OO(n))r=()=>n.useFactory(...Um(n.deps||[]));else if(kO(n))r=()=>X(Mt(n.useExisting));else{let i=Mt(n&&(n.useClass||n.provide));if(jO(n))r=()=>new i(...Um(n.deps));else return Yi(i)||$m(i)}return r}function so(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function jO(n){return!!n.deps}function BO(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function $O(n){return typeof n=="function"||typeof n=="object"&&n instanceof z}function Hm(n,e){for(let t of n)Array.isArray(t)?Hm(t,e):t&&AT(t)?Hm(t.\u0275providers,e):e(t)}function yn(n,e){n instanceof sc&&n.assertNotDestroyed();let t,r=Yr(n),i=Vt(void 0);try{return e()}finally{Yr(r),Vt(i)}}function HO(){return RT()!==void 0||uO()!=null}function zO(n){return typeof n=="function"}var mr=0,ge=1,ie=2,Pt=3,mn=4,vn=5,od=6,ad=7,gn=8,po=9,kn=10,Ze=11,oc=12,H0=13,To=14,On=15,mo=16,oo=17,go=18,Nd=19,QT=20,Jr=21,Dm=22,tn=23,rn=25,YT=1;var Zi=7,cd=8,ud=9,nn=10,ld=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(ld||{});function Zr(n){return Array.isArray(n)&&typeof n[YT]=="object"}function gr(n){return Array.isArray(n)&&n[YT]===!0}function Fg(n){return(n.flags&4)!==0}function Pd(n){return n.componentOffset>-1}function xd(n){return(n.flags&1)===1}function ei(n){return!!n.template}function zm(n){return(n[ie]&512)!==0}var qm=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function JT(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function ri(){return ZT}function ZT(n){return n.type.prototype.ngOnChanges&&(n.setInput=GO),qO}ri.ngInherit=!0;function qO(){let n=eC(this),e=n?.current;if(e){let t=n.previous;if(t===lo)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function GO(n,e,t,r,i){let s=this.declaredInputs[r],o=eC(n)||WO(n,{previous:lo,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new qm(l&&l.currentValue,t,c===lo),JT(n,e,i,t)}var XT="__ngSimpleChanges__";function eC(n){return n[XT]||null}function WO(n,e){return n[XT]=e}var z0=null;var Nn=function(n,e,t){z0?.(n,e,t)},tC="svg",KO="math";function Ln(n){for(;Array.isArray(n);)n=n[mr];return n}function nC(n,e){return Ln(e[n])}function on(n,e){return Ln(e[n.index])}function rC(n,e){return n.data[e]}function iC(n,e){return n[e]}function ii(n,e){let t=e[n];return Zr(t)?t:t[mr]}function Vg(n){return(n[ie]&128)===128}function QO(n){return gr(n[Pt])}function yo(n,e){return e==null?null:n[e]}function sC(n){n[oo]=0}function oC(n){n[ie]&1024||(n[ie]|=1024,Vg(n)&&Od(n))}function YO(n,e){for(;n>0;)e=e[To],n--;return e}function kd(n){return!!(n[ie]&9216||n[tn]?.dirty)}function Gm(n){n[kn].changeDetectionScheduler?.notify(8),n[ie]&64&&(n[ie]|=1024),kd(n)&&Od(n)}function Od(n){n[kn].changeDetectionScheduler?.notify(0);let e=Xi(n);for(;e!==null&&!(e[ie]&8192||(e[ie]|=8192,!Vg(e)));)e=Xi(e)}function aC(n,e){if((n[ie]&256)===256)throw new K(911,!1);n[Jr]===null&&(n[Jr]=[]),n[Jr].push(e)}function JO(n,e){if(n[Jr]===null)return;let t=n[Jr].indexOf(e);t!==-1&&n[Jr].splice(t,1)}function Xi(n){let e=n[Pt];return gr(e)?e[Pt]:e}var he={lFrame:yC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var cC=!1;function ZO(){return he.lFrame.elementDepthCount}function XO(){he.lFrame.elementDepthCount++}function e1(){he.lFrame.elementDepthCount--}function uC(){return he.bindingsEnabled}function t1(){return he.skipHydrationRootTNode!==null}function n1(n){return he.skipHydrationRootTNode===n}function r1(){he.skipHydrationRootTNode=null}function Ae(){return he.lFrame.lView}function vt(){return he.lFrame.tView}function Ge(n){return he.lFrame.contextLView=n,n[gn]}function We(n){return he.lFrame.contextLView=null,n}function _t(){let n=lC();for(;n!==null&&n.type===64;)n=n.parent;return n}function lC(){return he.lFrame.currentTNode}function i1(){let n=he.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function is(n,e){let t=he.lFrame;t.currentTNode=n,t.isParent=e}function Ug(){return he.lFrame.isParent}function dC(){he.lFrame.isParent=!1}function s1(){return he.lFrame.contextLView}function hC(){return cC}function q0(n){cC=n}function fC(){let n=he.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function o1(n){return he.lFrame.bindingIndex=n}function Ld(){return he.lFrame.bindingIndex++}function a1(n){let e=he.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function c1(){return he.lFrame.inI18n}function u1(n,e){let t=he.lFrame;t.bindingIndex=t.bindingRootIndex=n,Wm(e)}function l1(){return he.lFrame.currentDirectiveIndex}function Wm(n){he.lFrame.currentDirectiveIndex=n}function d1(n){let e=he.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function pC(n){he.lFrame.currentQueryIndex=n}function h1(n){let e=n[ge];return e.type===2?e.declTNode:e.type===1?n[vn]:null}function mC(n,e,t){if(t&fe.SkipSelf){let i=e,s=n;for(;i=i.parent,i===null&&!(t&fe.Host);)if(i=h1(s),i===null||(s=s[To],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=he.lFrame=gC();return r.currentTNode=e,r.lView=n,!0}function jg(n){let e=gC(),t=n[ge];he.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function gC(){let n=he.lFrame,e=n===null?null:n.child;return e===null?yC(n):e}function yC(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function vC(){let n=he.lFrame;return he.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var _C=vC;function Bg(){let n=vC();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function f1(n){return(he.lFrame.contextLView=YO(n,he.lFrame.contextLView))[gn]}function Co(){return he.lFrame.selectedIndex}function es(n){he.lFrame.selectedIndex=n}function $g(){let n=he.lFrame;return rC(n.tView,n.selectedIndex)}function Hg(){he.lFrame.currentNamespace=tC}function IC(){p1()}function p1(){he.lFrame.currentNamespace=null}function m1(){return he.lFrame.currentNamespace}var wC=!0;function Fd(){return wC}function Vd(n){wC=n}function g1(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=ZT(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function Ud(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Zl(n,e,t){EC(n,e,3,t)}function Xl(n,e,t,r){(n[ie]&3)===t&&EC(n,e,t,r)}function Sm(n,e){let t=n[ie];(t&3)===e&&(t&=16383,t+=1,n[ie]=t)}function EC(n,e,t,r){let i=r!==void 0?n[oo]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[oo]+=65536),(a<s||s==-1)&&(y1(n,t,e,c),n[oo]=(n[oo]&4294901760)+c+2),c++}function G0(n,e){Nn(4,n,e);let t=we(null);try{e.call(n)}finally{we(t),Nn(5,n,e)}}function y1(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[ie]>>14<n[oo]>>16&&(n[ie]&3)===e&&(n[ie]+=16384,G0(a,s)):G0(a,s)}var uo=-1,ts=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function v1(n){return n instanceof ts}function _1(n){return(n.flags&8)!==0}function I1(n){return(n.flags&16)!==0}var Am={},Km=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Rd(r);let i=this.injector.get(e,Am,r);return i!==Am||t===Am?i:this.parentInjector.get(e,t,r)}};function bC(n){return n!==uo}function dd(n){return n&32767}function w1(n){return n>>16}function hd(n,e){let t=w1(n),r=e;for(;t>0;)r=r[To],t--;return r}var Qm=!0;function fd(n){let e=Qm;return Qm=n,e}var E1=256,TC=E1-1,CC=5,b1=0,Pn={};function T1(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(tc)&&(r=t[tc]),r==null&&(r=t[tc]=b1++);let i=r&TC,s=1<<i;e.data[n+(i>>CC)]|=s}function pd(n,e){let t=DC(n,e);if(t!==-1)return t;let r=e[ge];r.firstCreatePass&&(n.injectorIndex=e.length,Rm(r.data,n),Rm(e,null),Rm(r.blueprint,null));let i=zg(n,e),s=n.injectorIndex;if(bC(i)){let o=dd(i),a=hd(i,e),c=a[ge].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function Rm(n,e){n.push(0,0,0,0,0,0,0,0,e)}function DC(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function zg(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=NC(i),r===null)return uo;if(t++,i=i[To],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return uo}function Ym(n,e,t){T1(n,e,t)}function C1(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let s=t[i];if(FT(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(s===e)return t[i+1];i=i+2}}}return null}function SC(n,e,t){if(t&fe.Optional||n!==void 0)return n;Pg(e,"NodeInjector")}function AC(n,e,t,r){if(t&fe.Optional&&r===void 0&&(r=null),!(t&(fe.Self|fe.Host))){let i=n[po],s=Vt(void 0);try{return i?i.get(e,r,t&fe.Optional):MT(e,r,t&fe.Optional)}finally{Vt(s)}}return SC(r,e,t)}function RC(n,e,t,r=fe.Default,i){if(n!==null){if(e[ie]&2048&&!(r&fe.Self)){let o=M1(n,e,t,r,Pn);if(o!==Pn)return o}let s=MC(n,e,t,r,Pn);if(s!==Pn)return s}return AC(e,t,r,i)}function MC(n,e,t,r,i){let s=A1(t);if(typeof s=="function"){if(!mC(e,n,r))return r&fe.Host?SC(i,t,r):AC(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&fe.Optional))Pg(t);else return o}finally{_C()}}else if(typeof s=="number"){let o=null,a=DC(n,e),c=uo,l=r&fe.Host?e[On][vn]:null;for((a===-1||r&fe.SkipSelf)&&(c=a===-1?zg(n,e):e[a+8],c===uo||!K0(r,!1)?a=-1:(o=e[ge],a=dd(c),e=hd(c,e)));a!==-1;){let h=e[ge];if(W0(s,a,h.data)){let p=D1(a,e,t,o,r,l);if(p!==Pn)return p}c=e[a+8],c!==uo&&K0(r,e[ge].data[a+8]===l)&&W0(s,a,e)?(o=h,a=dd(c),e=hd(c,e)):a=-1}}return i}function D1(n,e,t,r,i,s){let o=e[ge],a=o.data[n+8],c=r==null?Pd(a)&&Qm:r!=o&&(a.type&3)!==0,l=i&fe.Host&&s===a,h=S1(a,o,t,c,l);return h!==null?vo(e,o,h,a):Pn}function S1(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,l=n.directiveEnd,h=s>>20,p=r?a:a+h,y=i?a+h:l;for(let v=p;v<y;v++){let C=o[v];if(v<c&&t===C||v>=c&&C.type===t)return v}if(i){let v=o[c];if(v&&ei(v)&&v.type===t)return c}return null}function vo(n,e,t,r){let i=n[t],s=e.data;if(v1(i)){let o=i;o.resolving&&iO(rO(s[t]));let a=fd(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?Vt(o.injectImpl):null,h=mC(n,r,fe.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&g1(t,s[t],e)}finally{l!==null&&Vt(l),fd(a),o.resolving=!1,_C()}}return i}function A1(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(tc)?n[tc]:void 0;return typeof e=="number"?e>=0?e&TC:R1:e}function W0(n,e,t){let r=1<<n;return!!(t[e+(n>>CC)]&r)}function K0(n,e){return!(n&fe.Self)&&!(n&fe.Host&&e)}var Qi=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return RC(this._tNode,this._lView,e,Rd(r),t)}};function R1(){return new Qi(_t(),Ae())}function si(n){return lc(()=>{let e=n.prototype.constructor,t=e[nd]||Jm(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[nd]||Jm(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Jm(n){return TT(n)?()=>{let e=Jm(Mt(n));return e&&e()}:Yi(n)}function M1(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[ie]&2048&&!(o[ie]&512);){let a=MC(s,o,t,r|fe.Self,Pn);if(a!==Pn)return a;let c=s.parent;if(!c){let l=o[QT];if(l){let h=l.get(t,Pn,r);if(h!==Pn)return h}c=NC(o),o=o[To]}s=c}return i}function NC(n){let e=n[ge],t=e.type;return t===2?e.declTNode:t===1?n[vn]:null}function qg(n){return C1(_t(),n)}function Q0(n,e=null,t=null,r){let i=PC(n,e,t,r);return i.resolveInjectorInitializers(),i}function PC(n,e=null,t=null,r,i=new Set){let s=[t||en,PO(n)];return r=r||(typeof n=="object"?void 0:Nt(n)),new sc(s,e||Lg(),r||null,i)}var yt=class n{static{this.THROW_IF_NOT_FOUND=rc}static{this.NULL=new sd}static create(e,t){if(Array.isArray(e))return Q0({name:""},t,e,"");{let r=e.name??"";return Q0({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=q({token:n,providedIn:"any",factory:()=>X(kT)})}static{this.__NG_ELEMENT_ID__=-1}};var N1=new z("");N1.__NG_ELEMENT_ID__=n=>{let e=_t();if(e===null)throw new K(204,!1);if(e.type&2)return e.value;if(n&fe.Optional)return null;throw new K(204,!1)};var P1="ngOriginalError";function Mm(n){return n[P1]}var xC=!0,kC=(()=>{class n{static{this.__NG_ELEMENT_ID__=x1}static{this.__NG_ENV_ID__=t=>t}}return n})(),Zm=class extends kC{constructor(e){super(),this._lView=e}onDestroy(e){return aC(this._lView,e),()=>JO(this._lView,e)}};function x1(){return new Zm(Ae())}var oi=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ut(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}}return n})();var Xm=class extends st{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,HO()&&(this.destroyRef=O(kC,{optional:!0})??void 0,this.pendingTasks=O(oi,{optional:!0})??void 0)}emit(e){let t=we(null);try{super.next(e)}finally{we(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Be&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Je=Xm;function md(...n){}function OC(n){let e,t;function r(){n=md;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function Y0(n){return queueMicrotask(()=>n()),()=>{n=md}}var Gg="isAngularZone",gd=Gg+"_ID",k1=0,be=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Je(!1),this.onMicrotaskEmpty=new Je(!1),this.onStable=new Je(!1),this.onError=new Je(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=xC}=e;if(typeof Zone>"u")throw new K(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,F1(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Gg)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new K(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new K(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,O1,md,md);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},O1={};function Wg(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function L1(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){OC(()=>{n.callbackScheduled=!1,eg(n),n.isCheckStableRunning=!0,Wg(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),eg(n)}function F1(n){let e=()=>{L1(n)},t=k1++;n._inner=n._inner.fork({name:"angular",properties:{[Gg]:!0,[gd]:t,[gd+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(V1(c))return r.invokeTask(s,o,a,c);try{return J0(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),Z0(n)}},onInvoke:(r,i,s,o,a,c,l)=>{try{return J0(n),r.invoke(s,o,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!U1(c)&&e(),Z0(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,eg(n),Wg(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function eg(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function J0(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Z0(n){n._nesting--,Wg(n)}var tg=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Je,this.onMicrotaskEmpty=new Je,this.onStable=new Je,this.onError=new Je}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function V1(n){return LC(n,"__ignore_ng_zone__")}function U1(n){return LC(n,"__scheduler_tick__")}function LC(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var cr=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Mm(e);for(;t&&Mm(t);)t=Mm(t);return t||null}},j1=new z("",{providedIn:"root",factory:()=>{let n=O(be),e=O(cr);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function B1(){return jd(_t(),Ae())}function jd(n,e){return new _n(on(n,e))}var _n=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=B1}}return n})();function FC(n){return(n.flags&128)===128}var VC=new Map,$1=0;function H1(){return $1++}function z1(n){VC.set(n[Nd],n)}function ng(n){VC.delete(n[Nd])}var X0="__ngContext__";function ti(n,e){Zr(e)?(n[X0]=e[Nd],z1(e)):n[X0]=e}function UC(n){return BC(n[oc])}function jC(n){return BC(n[mn])}function BC(n){for(;n!==null&&!gr(n);)n=n[mn];return n}var rg;function $C(n){rg=n}function q1(){if(rg!==void 0)return rg;if(typeof document<"u")return document;throw new K(210,!1)}var Kg=new z("",{providedIn:"root",factory:()=>G1}),G1="ng",Qg=new z(""),Fn=new z("",{providedIn:"platform",factory:()=>"unknown"});var Yg=new z("",{providedIn:"root",factory:()=>q1().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var W1="h",K1="b";var Q1=()=>null;function Jg(n,e,t=!1){return Q1(n,e,t)}var HC=!1,Y1=new z("",{providedIn:"root",factory:()=>HC});var ql;function J1(){if(ql===void 0&&(ql=null,nc.trustedTypes))try{ql=nc.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return ql}function Bd(n){return J1()?.createHTML(n)||n}var Gl;function Z1(){if(Gl===void 0&&(Gl=null,nc.trustedTypes))try{Gl=nc.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Gl}function eT(n){return Z1()?.createScriptURL(n)||n}var ur=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ET})`}},ig=class extends ur{getTypeName(){return"HTML"}},sg=class extends ur{getTypeName(){return"Style"}},og=class extends ur{getTypeName(){return"Script"}},ag=class extends ur{getTypeName(){return"URL"}},cg=class extends ur{getTypeName(){return"ResourceURL"}};function Vn(n){return n instanceof ur?n.changingThisBreaksApplicationSecurity:n}function ai(n,e){let t=X1(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${ET})`)}return t===e}function X1(n){return n instanceof ur&&n.getTypeName()||null}function zC(n){return new ig(n)}function qC(n){return new sg(n)}function GC(n){return new og(n)}function WC(n){return new ag(n)}function KC(n){return new cg(n)}function eL(n){let e=new lg(n);return tL()?new ug(e):e}var ug=class{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(Bd(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},lg=class{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=Bd(e),t}};function tL(){try{return!!new window.DOMParser().parseFromString(Bd(""),"text/html")}catch{return!1}}var nL=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function $d(n){return n=String(n),n.match(nL)?n:"unsafe:"+n}function yr(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function hc(...n){let e={};for(let t of n)for(let r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}var QC=yr("area,br,col,hr,img,wbr"),YC=yr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),JC=yr("rp,rt"),rL=hc(JC,YC),iL=hc(YC,yr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),sL=hc(JC,yr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),tT=hc(QC,iL,sL,rL),ZC=yr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),oL=yr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),aL=yr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),cL=hc(ZC,oL,aL),uL=yr("script,style,template"),dg=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0,i=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild){i.push(t),t=hL(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let s=dL(t);if(s){t=s;break}t=i.pop()}}return this.buf.join("")}startElement(e){let t=nT(e).toLowerCase();if(!tT.hasOwnProperty(t))return this.sanitizedSomething=!0,!uL.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let r=e.attributes;for(let i=0;i<r.length;i++){let s=r.item(i),o=s.name,a=o.toLowerCase();if(!cL.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=s.value;ZC[a]&&(c=$d(c)),this.buf.push(" ",o,'="',rT(c),'"')}return this.buf.push(">"),!0}endElement(e){let t=nT(e).toLowerCase();tT.hasOwnProperty(t)&&!QC.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(rT(e))}};function lL(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function dL(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw XC(e);return e}function hL(n){let e=n.firstChild;if(e&&lL(n,e))throw XC(e);return e}function nT(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function XC(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var fL=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,pL=/([^\#-~ |!])/g;function rT(n){return n.replace(/&/g,"&amp;").replace(fL,function(e){let t=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((t-55296)*1024+(r-56320)+65536)+";"}).replace(pL,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Wl;function eD(n,e){let t=null;try{Wl=Wl||eL(n);let r=e?String(e):"";t=Wl.getInertBodyElement(r);let i=5,s=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=t.innerHTML,t=Wl.getInertBodyElement(r)}while(r!==s);let a=new dg().sanitizeChildren(iT(t)||t);return Bd(a)}finally{if(t){let r=iT(t)||t;for(;r.firstChild;)r.firstChild.remove()}}}function iT(n){return"content"in n&&mL(n)?n.content:null}function mL(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var Un=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Un||{});function ss(n){let e=nD();return e?e.sanitize(Un.URL,n)||"":ai(n,"URL")?Vn(n):$d(Ad(n))}function Zg(n){let e=nD();if(e)return eT(e.sanitize(Un.RESOURCE_URL,n)||"");if(ai(n,"ResourceURL"))return eT(Vn(n));throw new K(904,!1)}function gL(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?Zg:ss}function tD(n,e,t){return gL(e,t)(n)}function nD(){let n=Ae();return n&&n[kn].sanitizer}var yL=/^>|^->|<!--|-->|--!>|<!-$/g,vL=/(<|>)/g,_L="\u200B$1\u200B";function IL(n){return n.replace(yL,e=>e.replace(vL,_L))}function rD(n){return n instanceof Function?n():n}var lr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(lr||{}),wL;function Xg(n,e){return wL(n,e)}function ao(n,e,t,r,i){if(r!=null){let s,o=!1;gr(r)?s=r:Zr(r)&&(o=!0,r=r[mr]);let a=Ln(r);n===0&&t!==null?i==null?cD(e,t,a):yd(e,t,a,i||null,!0):n===1&&t!==null?yd(e,t,a,i||null,!0):n===2?FL(e,a,o):n===3&&e.destroyNode(a),s!=null&&UL(e,n,s,t,i)}}function EL(n,e){return n.createText(e)}function bL(n,e,t){n.setValue(e,t)}function TL(n,e){return n.createComment(IL(e))}function iD(n,e,t){return n.createElement(e,t)}function CL(n,e){sD(n,e),e[mr]=null,e[vn]=null}function DL(n,e,t,r,i,s){r[mr]=i,r[vn]=e,zd(n,r,t,1,i,s)}function sD(n,e){e[kn].changeDetectionScheduler?.notify(9),zd(n,e,e[Ze],2,null,null)}function SL(n){let e=n[oc];if(!e)return Nm(n[ge],n);for(;e;){let t=null;if(Zr(e))t=e[oc];else{let r=e[nn];r&&(t=r)}if(!t){for(;e&&!e[mn]&&e!==n;)Zr(e)&&Nm(e[ge],e),e=e[Pt];e===null&&(e=n),Zr(e)&&Nm(e[ge],e),t=e&&e[mn]}e=t}}function AL(n,e,t,r){let i=nn+r,s=t.length;r>0&&(t[i-1][mn]=e),r<s-nn?(e[mn]=t[i],xT(t,nn+r,e)):(t.push(e),e[mn]=null),e[Pt]=t;let o=e[mo];o!==null&&t!==o&&oD(o,e);let a=e[go];a!==null&&a.insertView(n),Gm(e),e[ie]|=128}function oD(n,e){let t=n[ud],r=e[Pt];if(Zr(r))n[ie]|=ld.HasTransplantedViews;else{let i=r[Pt][On];e[On]!==i&&(n[ie]|=ld.HasTransplantedViews)}t===null?n[ud]=[e]:t.push(e)}function ey(n,e){let t=n[ud],r=t.indexOf(e);t.splice(r,1)}function hg(n,e){if(n.length<=nn)return;let t=nn+e,r=n[t];if(r){let i=r[mo];i!==null&&i!==n&&ey(i,r),e>0&&(n[t-1][mn]=r[mn]);let s=id(n,nn+e);CL(r[ge],r);let o=s[go];o!==null&&o.detachView(s[ge]),r[Pt]=null,r[mn]=null,r[ie]&=-129}return r}function aD(n,e){if(!(e[ie]&256)){let t=e[Ze];t.destroyNode&&zd(n,e,t,3,null,null),SL(e)}}function Nm(n,e){if(e[ie]&256)return;let t=we(null);try{e[ie]&=-129,e[ie]|=256,e[tn]&&rm(e[tn]),ML(n,e),RL(n,e),e[ge].type===1&&e[Ze].destroy();let r=e[mo];if(r!==null&&gr(e[Pt])){r!==e[Pt]&&ey(r,e);let i=e[go];i!==null&&i.detachView(n)}ng(e)}finally{we(t)}}function RL(n,e){let t=n.cleanup,r=e[ad];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[t[s+1]];t[s].call(o)}r!==null&&(e[ad]=null);let i=e[Jr];if(i!==null){e[Jr]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function ML(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof ts)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];Nn(4,a,c);try{c.call(a)}finally{Nn(5,a,c)}}else{Nn(4,i,s);try{s.call(i)}finally{Nn(5,i,s)}}}}}function NL(n,e,t){return PL(n,e.parent,t)}function PL(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[mr];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=n.data[r.directiveStart+i];if(s===xn.None||s===xn.Emulated)return null}return on(r,t)}}function yd(n,e,t,r,i){n.insertBefore(e,t,r,i)}function cD(n,e,t){n.appendChild(e,t)}function sT(n,e,t,r,i){r!==null?yd(n,e,t,r,i):cD(n,e,t)}function uD(n,e){return n.parentNode(e)}function xL(n,e){return n.nextSibling(e)}function kL(n,e,t){return LL(n,e,t)}function OL(n,e,t){return n.type&40?on(n,t):null}var LL=OL,oT;function Hd(n,e,t,r){let i=NL(n,r,e),s=e[Ze],o=r.parent||e[vn],a=kL(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)sT(s,i,t[c],a,!1);else sT(s,i,t,a,!1);oT!==void 0&&oT(s,r,e,t,i)}function Xa(n,e){if(e!==null){let t=e.type;if(t&3)return on(e,n);if(t&4)return fg(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Xa(n,r);{let i=n[e.index];return gr(i)?fg(-1,i):Ln(i)}}else{if(t&128)return Xa(n,e.next);if(t&32)return Xg(e,n)()||Ln(n[e.index]);{let r=lD(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Xi(n[On]);return Xa(i,r)}else return Xa(n,e.next)}}}return null}function lD(n,e){if(e!==null){let r=n[On][vn],i=e.projection;return r.projection[i]}return null}function fg(n,e){let t=nn+n+1;if(t<e.length){let r=e[t],i=r[ge].firstChild;if(i!==null)return Xa(r,i)}return e[Zi]}function FL(n,e,t){n.removeChild(null,e,t)}function ty(n,e,t,r,i,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(o&&e===0&&(a&&ti(Ln(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)ty(n,e,t.child,r,i,s,!1),ao(e,n,i,a,s);else if(c&32){let l=Xg(t,r),h;for(;h=l();)ao(e,n,i,h,s);ao(e,n,i,a,s)}else c&16?VL(n,e,r,t,i,s):ao(e,n,i,a,s);t=o?t.projectionNext:t.next}}function zd(n,e,t,r,i,s){ty(t,r,n.firstChild,e,i,s,!1)}function VL(n,e,t,r,i,s){let o=t[On],c=o[vn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let h=c[l];ao(e,n,i,h,s)}else{let l=c,h=o[Pt];FC(r)&&(l.flags|=128),ty(n,e,l,h,i,s,!0)}}function UL(n,e,t,r,i){let s=t[Zi],o=Ln(t);s!==o&&ao(e,n,r,s,i);for(let a=nn;a<t.length;a++){let c=t[a];zd(c[ge],c,n,e,r,s)}}function jL(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:lr.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=lr.Important),n.setStyle(t,r,i,s))}}function BL(n,e,t){n.setAttribute(e,"style",t)}function dD(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function hD(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&jm(n,e,r),i!==null&&dD(n,e,i),s!==null&&BL(n,e,s)}var os={};function k(n=1){fD(vt(),Ae(),Co()+n,!1)}function fD(n,e,t,r){if(!r)if((e[ie]&3)===3){let s=n.preOrderCheckHooks;s!==null&&Zl(e,s,t)}else{let s=n.preOrderHooks;s!==null&&Xl(e,s,0,t)}es(t)}function Z(n,e=fe.Default){let t=Ae();if(t===null)return X(n,e);let r=_t();return RC(r,t,Mt(n),e)}function pD(n,e,t,r,i,s){let o=we(null);try{let a=null;i&Xr.SignalBased&&(a=e[r][or]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&Xr.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),n.setInput!==null?n.setInput(e,a,s,t,r):JT(e,a,r,s)}finally{we(o)}}function $L(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)es(~i);else{let s=i,o=t[++r],a=t[++r];u1(o,s);let c=e[s];a(2,c)}}}finally{es(-1)}}function qd(n,e,t,r,i,s,o,a,c,l,h){let p=e.blueprint.slice();return p[mr]=i,p[ie]=r|4|128|8|64,(l!==null||n&&n[ie]&2048)&&(p[ie]|=2048),sC(p),p[Pt]=p[To]=n,p[gn]=t,p[kn]=o||n&&n[kn],p[Ze]=a||n&&n[Ze],p[po]=c||n&&n[po]||null,p[vn]=s,p[Nd]=H1(),p[od]=h,p[QT]=l,p[On]=e.type==2?n[On]:p,p}function fc(n,e,t,r,i){let s=n.data[e];if(s===null)s=HL(n,e,t,r,i),c1()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=i1();s.injectorIndex=o===null?-1:o.injectorIndex}return is(s,!0),s}function HL(n,e,t,r,i){let s=lC(),o=Ug(),a=o?s:s&&s.parent,c=n.data[e]=KL(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function mD(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function gD(n,e,t,r,i){let s=Co(),o=r&2;try{es(-1),o&&e.length>rn&&fD(n,e,rn,!1),Nn(o?2:0,i),t(r,i)}finally{es(s),Nn(o?3:1,i)}}function ny(n,e,t){if(Fg(e)){let r=we(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{we(r)}}}function ry(n,e,t){uC()&&(eF(n,e,t,on(t,e)),(t.flags&64)===64&&ID(n,e,t))}function iy(n,e,t=on){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function yD(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=sy(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function sy(n,e,t,r,i,s,o,a,c,l,h){let p=rn+r,y=p+i,v=zL(p,y),C=typeof l=="function"?l():l;return v[ge]={type:n,blueprint:v,template:t,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:C,incompleteFirstPass:!1,ssrId:h}}function zL(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:os);return t}function qL(n,e,t,r){let s=r.get(Y1,HC)||t===xn.ShadowDom,o=n.selectRootElement(e,s);return GL(o),o}function GL(n){WL(n)}var WL=()=>null;function KL(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return t1()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function aT(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=Xr.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}n===0?cT(r,t,l,a,c):cT(r,t,l,a)}return r}function cT(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],i!==void 0&&s.push(i)}function QL(n,e,t){let r=e.directiveStart,i=e.directiveEnd,s=n.data,o=e.attrs,a=[],c=null,l=null;for(let h=r;h<i;h++){let p=s[h],y=t?t.get(p):null,v=y?y.inputs:null,C=y?y.outputs:null;c=aT(0,p.inputs,h,c,v),l=aT(1,p.outputs,h,l,C);let M=c!==null&&o!==null&&!kg(e)?dF(c,h,o):null;a.push(M)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function YL(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function vD(n,e,t,r,i,s,o,a){let c=on(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(ay(n,t,h,r,i),Pd(e)&&JL(t,e.index)):e.type&3?(r=YL(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function JL(n,e){let t=ii(e,n);t[ie]&16||(t[ie]|=64)}function oy(n,e,t,r){if(uC()){let i=r===null?null:{"":-1},s=nF(n,t),o,a;s===null?o=a=null:[o,a]=s,o!==null&&_D(n,e,t,o,i,a),i&&rF(t,r,i)}t.mergedAttrs=ic(t.mergedAttrs,t.attrs)}function _D(n,e,t,r,i,s){for(let l=0;l<r.length;l++)Ym(pd(t,e),n,r[l].type);sF(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,c=mD(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=ic(t.mergedAttrs,h.hostAttrs),oF(n,t,e,c,h),iF(c,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let p=h.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}QL(n,t,s)}function ZL(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;XL(o)!=a&&o.push(a),o.push(t,r,s)}}function XL(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function eF(n,e,t,r){let i=t.directiveStart,s=t.directiveEnd;Pd(t)&&aF(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||pd(t,e),ti(r,e);let o=t.initialInputs;for(let a=i;a<s;a++){let c=n.data[a],l=vo(e,n,a,t);if(ti(l,e),o!==null&&lF(e,a-i,l,c,t,o),ei(c)){let h=ii(t.index,e);h[gn]=vo(e,n,a,t)}}}function ID(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=l1();try{es(s);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];Wm(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&tF(c,l)}}finally{es(-1),Wm(o)}}function tF(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function nF(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if(bO(e,o.selectors,!1))if(r||(r=[]),ei(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;pg(n,e,c)}else r.unshift(o),pg(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function pg(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function rF(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new K(-301,!1);r.push(e[i],s)}}}function iF(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;ei(e)&&(t[""]=n)}}function sF(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function oF(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=Yi(i.type,!0)),o=new ts(s,ei(i),Z);n.blueprint[r]=o,t[r]=o,ZL(n,e,r,mD(n,t,i.hostVars,os),i)}function aF(n,e,t){let r=on(e,n),i=yD(t),s=n[kn].rendererFactory,o=16;t.signals?o=4096:t.onPush&&(o=64);let a=Gd(n,qd(n,i,null,o,r,e,null,s.createRenderer(r,t),null,null,null));n[e.index]=a}function cF(n,e,t,r,i,s){let o=on(n,e);uF(e[Ze],o,s,n.value,t,r,i)}function uF(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?Ad(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function lF(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],h=o[a++],p=o[a++];pD(r,t,c,l,h,p)}}function dF(n,e,t){let r=null,i=0;for(;i<t.length;){let s=t[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){r===null&&(r=[]);let o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],t[i+1]);break}}i+=2}return r}function wD(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function ED(n,e){let t=n.contentQueries;if(t!==null){let r=we(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];pC(s),a.contentQueries(2,e[o],o)}}}finally{we(r)}}}function Gd(n,e){return n[oc]?n[H0][mn]=e:n[oc]=e,n[H0]=e,e}function mg(n,e,t){pC(0);let r=we(null);try{e(n,t)}finally{we(r)}}function hF(n){return n[ad]??=[]}function fF(n){return n.cleanup??=[]}function bD(n,e){let t=n[po],r=t?t.get(cr,null):null;r&&r.handleError(e)}function ay(n,e,t,r,i){for(let s=0;s<t.length;){let o=t[s++],a=t[s++],c=t[s++],l=e[o],h=n.data[o];pD(h,l,r,a,c,i)}}function pF(n,e,t){let r=nC(e,n);bL(n[Ze],r,t)}function mF(n,e){let t=ii(e,n),r=t[ge];gF(r,t);let i=t[mr];i!==null&&t[od]===null&&(t[od]=Jg(i,t[po])),cy(r,t,t[gn])}function gF(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function cy(n,e,t){jg(e);try{let r=n.viewQuery;r!==null&&mg(1,r,t);let i=n.template;i!==null&&gD(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[go]?.finishViewCreation(n),n.staticContentQueries&&ED(n,e),n.staticViewQueries&&mg(2,n.viewQuery,t);let s=n.components;s!==null&&yF(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ie]&=-5,Bg()}}function yF(n,e){for(let t=0;t<e.length;t++)mF(n,e[t])}function vF(n,e,t,r){let i=we(null);try{let s=e.tView,a=n[ie]&4096?4096:16,c=qd(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[mo]=l;let h=n[go];return h!==null&&(c[go]=h.createEmbeddedView(s)),cy(s,c,t),c}finally{we(i)}}function uT(n,e){return!e||e.firstChild===null||FC(n)}function _F(n,e,t,r=!0){let i=e[ge];if(AL(i,e,n,t),r){let o=fg(t,n),a=e[Ze],c=uD(a,n[Zi]);c!==null&&DL(i,n[vn],a,e,c,o)}let s=e[od];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function vd(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(Ln(s)),gr(s)&&IF(s,r);let o=t.type;if(o&8)vd(n,e,t.child,r);else if(o&32){let a=Xg(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=lD(e,t);if(Array.isArray(a))r.push(...a);else{let c=Xi(e[On]);vd(c[ge],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function IF(n,e){for(let t=nn;t<n.length;t++){let r=n[t],i=r[ge].firstChild;i!==null&&vd(r[ge],r,i,e)}n[Zi]!==n[mr]&&e.push(n[Zi])}var TD=[];function wF(n){return n[tn]??EF(n)}function EF(n){let e=TD.pop()??Object.create(TF);return e.lView=n,e}function bF(n){n.lView[tn]!==n&&(n.lView=null,TD.push(n))}var TF=de(V({},Ya),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Od(n.lView)},consumerOnSignalRead(){this.lView[tn]=this}});function CF(n){let e=n[tn]??Object.create(DF);return e.lView=n,e}var DF=de(V({},Ya),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=Xi(n.lView);for(;e&&!CD(e[ge]);)e=Xi(e);e&&oC(e)},consumerOnSignalRead(){this.lView[tn]=this}});function CD(n){return n.type!==2}var SF=100;function DD(n,e=!0,t=0){let r=n[kn],i=r.rendererFactory,s=!1;s||i.begin?.();try{AF(n,t)}catch(o){throw e&&bD(n,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function AF(n,e){let t=hC();try{q0(!0),gg(n,e);let r=0;for(;kd(n);){if(r===SF)throw new K(103,!1);r++,gg(n,1)}}finally{q0(t)}}function RF(n,e,t,r){let i=e[ie];if((i&256)===256)return;let s=!1,o=!1;!s&&e[kn].inlineEffectRunner?.flush(),jg(e);let a=!0,c=null,l=null;s||(CD(n)?(l=wF(e),c=gl(l)):Qb()===null?(a=!1,l=CF(e),c=gl(l)):e[tn]&&(rm(e[tn]),e[tn]=null));try{sC(e),o1(n.bindingStartIndex),t!==null&&gD(n,e,t,2,r);let h=(i&3)===3;if(!s)if(h){let v=n.preOrderCheckHooks;v!==null&&Zl(e,v,null)}else{let v=n.preOrderHooks;v!==null&&Xl(e,v,0,null),Sm(e,0)}if(o||MF(e),SD(e,0),n.contentQueries!==null&&ED(n,e),!s)if(h){let v=n.contentCheckHooks;v!==null&&Zl(e,v)}else{let v=n.contentHooks;v!==null&&Xl(e,v,1),Sm(e,1)}$L(n,e);let p=n.components;p!==null&&RD(e,p,0);let y=n.viewQuery;if(y!==null&&mg(2,y,r),!s)if(h){let v=n.viewCheckHooks;v!==null&&Zl(e,v)}else{let v=n.viewHooks;v!==null&&Xl(e,v,2),Sm(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Dm]){for(let v of e[Dm])v();e[Dm]=null}s||(e[ie]&=-73)}catch(h){throw s||Od(e),h}finally{l!==null&&(tm(l,c),a&&bF(l)),Bg()}}function SD(n,e){for(let t=UC(n);t!==null;t=jC(t))for(let r=nn;r<t.length;r++){let i=t[r];AD(i,e)}}function MF(n){for(let e=UC(n);e!==null;e=jC(e)){if(!(e[ie]&ld.HasTransplantedViews))continue;let t=e[ud];for(let r=0;r<t.length;r++){let i=t[r];oC(i)}}}function NF(n,e,t){let r=ii(e,n);AD(r,t)}function AD(n,e){Vg(n)&&gg(n,e)}function gg(n,e){let r=n[ge],i=n[ie],s=n[tn],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&nm(s)),o||=!1,s&&(s.dirty=!1),n[ie]&=-9217,o)RF(r,n,r.template,n[gn]);else if(i&8192){SD(n,1);let a=r.components;a!==null&&RD(n,a,1)}}function RD(n,e,t){for(let r=0;r<e.length;r++)NF(n,e[r],t)}function uy(n,e){let t=hC()?64:1088;for(n[kn].changeDetectionScheduler?.notify(e);n;){n[ie]|=t;let r=Xi(n);if(zm(n)&&!r)return n;n=r}return null}var ns=class{get rootNodes(){let e=this._lView,t=e[ge];return vd(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[gn]}set context(e){this._lView[gn]=e}get destroyed(){return(this._lView[ie]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Pt];if(gr(e)){let t=e[cd],r=t?t.indexOf(this):-1;r>-1&&(hg(e,r),id(t,r))}this._attachedToViewContainer=!1}aD(this._lView[ge],this._lView)}onDestroy(e){aC(this._lView,e)}markForCheck(){uy(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ie]&=-129}reattach(){Gm(this._lView),this._lView[ie]|=128}detectChanges(){this._lView[ie]|=1024,DD(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new K(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=zm(this._lView),t=this._lView[mo];t!==null&&!e&&ey(t,this._lView),sD(this._lView[ge],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new K(902,!1);this._appRef=e;let t=zm(this._lView),r=this._lView[mo];r!==null&&!t&&oD(r,this._lView),Gm(this._lView)}},Wd=(()=>{class n{static{this.__NG_ELEMENT_ID__=kF}}return n})(),PF=Wd,xF=class extends PF{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=vF(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new ns(i)}};function kF(){return MD(_t(),Ae())}function MD(n,e){return n.type&4?new xF(e,n,jd(n,e)):null}var xY=new RegExp(`^(\\d+)*(${K1}|${W1})*(.*)`);var OF=()=>null;function lT(n,e){return OF(n,e)}var _o=class{},Kd=new z("",{providedIn:"root",factory:()=>!1});var ND=new z(""),PD=new z(""),yg=class{},_d=class{};function LF(n){let e=Error(`No component factory found for ${Nt(n)}.`);return e[FF]=n,e}var FF="ngComponent";var vg=class{resolveComponentFactory(e){throw LF(e)}},Io=class{static{this.NULL=new vg}},wo=class{},jn=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>VF()}}return n})();function VF(){let n=Ae(),e=_t(),t=ii(e.index,n);return(Zr(t)?t:n)[Ze]}var UF=(()=>{class n{static{this.\u0275prov=q({token:n,providedIn:"root",factory:()=>null})}}return n})();function Id(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=x0(i,a);else if(s==2){let c=a,l=e[++o];r=x0(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var wd=class extends Io{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Ji(e);return new ac(t,this.ngModule)}};function dT(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:Xr.None;e?t.push({propName:o,templateName:r,isSignal:(a&Xr.SignalBased)!==0}):t.push({propName:o,templateName:r})}return t}function jF(n){let e=n.toLowerCase();return e==="svg"?tC:e==="math"?KO:null}var ac=class extends _d{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=dT(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return dT(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=SO(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=we(null);try{i=i||this.ngModule;let o=i instanceof Ut?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Km(e,o):e,c=a.get(wo,null);if(c===null)throw new K(407,!1);let l=a.get(UF,null),h=a.get(_o,null),p={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},y=c.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",C=r?qL(y,r,this.componentDef.encapsulation,a):iD(y,v,jF(v)),M=512;this.componentDef.signals?M|=4096:this.componentDef.onPush||(M|=16);let A=null;C!==null&&(A=Jg(C,a,!0));let F=sy(0,null,null,1,0,null,null,null,null,null,null),H=qd(null,F,null,M,null,null,p,y,a,null,A);jg(H);let U,W,me=null;try{let Y=this.componentDef,E,_=null;Y.findHostDirectiveDefs?(E=[],_=new Map,Y.findHostDirectiveDefs(Y,E,_),E.push(Y)):E=[Y];let I=BF(H,C);me=$F(I,C,Y,E,H,p,y),W=rC(F,rn),C&&qF(y,Y,C,r),t!==void 0&&GF(W,this.ngContentSelectors,t),U=zF(me,Y,E,_,H,[WF]),cy(F,H,null)}catch(Y){throw me!==null&&ng(me),ng(H),Y}finally{Bg()}return new _g(this.componentType,U,jd(W,H),H,W)}finally{we(s)}}},_g=class extends yg{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new ns(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;ay(s[ge],s,i,e,t),this.previousInputValues.set(e,t);let o=ii(this._tNode.index,s);uy(o,1)}}get injector(){return new Qi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function BF(n,e){let t=n[ge],r=rn;return n[r]=e,fc(t,r,2,"#host",null)}function $F(n,e,t,r,i,s,o){let a=i[ge];HF(r,n,e,o);let c=null;e!==null&&(c=Jg(e,i[po]));let l=s.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let p=qd(i,yD(t),null,h,i[n.index],n,s,l,null,null,c);return a.firstCreatePass&&pg(a,n,r.length-1),Gd(i,p),i[n.index]=p}function HF(n,e,t,r){for(let i of n)e.mergedAttrs=ic(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Id(e,e.mergedAttrs,!0),t!==null&&hD(r,t,e))}function zF(n,e,t,r,i,s){let o=_t(),a=i[ge],c=on(o,i);_D(a,i,o,t,null,r);for(let h=0;h<t.length;h++){let p=o.directiveStart+h,y=vo(i,a,p,o);ti(y,i)}ID(a,i,o),c&&ti(c,i);let l=vo(i,a,o.directiveStart+o.componentOffset,o);if(n[gn]=i[gn]=l,s!==null)for(let h of s)h(l,e);return ny(a,o,i),l}function qF(n,e,t,r){if(r)jm(n,t,["ng-version","18.2.14"]);else{let{attrs:i,classes:s}=AO(e.selectors[0]);i&&jm(n,t,i),s&&s.length>0&&dD(n,t,s.join(" "))}}function GF(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null?Array.from(s):null)}}function WF(){let n=_t();Ud(Ae()[ge],n)}var Do=(()=>{class n{static{this.__NG_ELEMENT_ID__=KF}}return n})();function KF(){let n=_t();return YF(n,Ae())}var QF=Do,xD=class extends QF{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return jd(this._hostTNode,this._hostLView)}get injector(){return new Qi(this._hostTNode,this._hostLView)}get parentInjector(){let e=zg(this._hostTNode,this._hostLView);if(bC(e)){let t=hd(e,this._hostLView),r=dd(e),i=t[ge].data[r+8];return new Qi(i,t)}else return new Qi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=hT(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-nn}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=lT(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,uT(this._hostTNode,o)),a}createComponent(e,t,r,i,s){let o=e&&!zO(e),a;if(o)a=t;else{let C=t||{};a=C.index,r=C.injector,i=C.projectableNodes,s=C.environmentInjector||C.ngModuleRef}let c=o?e:new ac(Ji(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let M=(o?l:this.parentInjector).get(Ut,null);M&&(s=M)}let h=Ji(c.componentType??{}),p=lT(this._lContainer,h?.id??null),y=p?.firstChild??null,v=c.create(l,i,y,s);return this.insertImpl(v.hostView,a,uT(this._hostTNode,p)),v}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(QO(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Pt],l=new xD(c,c[vn],c[Pt]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return _F(o,i,s,r),e.attachToViewContainerRef(),xT(Pm(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=hT(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=hg(this._lContainer,t);r&&(id(Pm(this._lContainer),t),aD(r[ge],r))}detach(e){let t=this._adjustIndex(e,-1),r=hg(this._lContainer,t);return r&&id(Pm(this._lContainer),t)!=null?new ns(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function hT(n){return n[cd]}function Pm(n){return n[cd]||(n[cd]=[])}function YF(n,e){let t,r=e[n.index];return gr(r)?t=r:(t=wD(r,e,null,n),e[n.index]=t,Gd(e,t)),ZF(t,e,n,r),new xD(t,n,e)}function JF(n,e){let t=n[Ze],r=t.createComment(""),i=on(e,n),s=uD(t,i);return yd(t,s,r,xL(t,i),!1),r}var ZF=tV,XF=()=>!1;function eV(n,e,t){return XF(n,e,t)}function tV(n,e,t,r){if(n[Zi])return;let i;t.type&8?i=Ln(r):i=JF(e,t),n[Zi]=i}var fT=new Set;function So(n){fT.has(n)||(fT.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function nV(n){return typeof n=="function"&&n[or]!==void 0}function pc(n,e){So("NgSignals");let t=o0(n),r=t[or];return e?.equal&&(r.equal=e.equal),t.set=i=>im(r,i),t.update=i=>a0(r,i),t.asReadonly=rV.bind(t),t}function rV(){let n=this[or];if(n.readonlyFn===void 0){let e=()=>this();e[or]=n,n.readonlyFn=e}return n.readonlyFn}function kD(n){return nV(n)&&typeof n.set=="function"}function iV(n){return Object.getPrototypeOf(n.prototype).constructor}function In(n){let e=iV(n.type),t=!0,r=[n];for(;e;){let i;if(ei(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new K(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=Kl(n.inputs),o.inputTransforms=Kl(n.inputTransforms),o.declaredInputs=Kl(n.declaredInputs),o.outputs=Kl(n.outputs);let a=i.hostBindings;a&&uV(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&aV(n,c),l&&cV(n,l),sV(n,i),Qk(n.outputs,i.outputs),ei(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===In&&(t=!1)}}e=Object.getPrototypeOf(e)}oV(r)}function sV(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function oV(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ic(i.hostAttrs,t=ic(t,i.hostAttrs))}}function Kl(n){return n===lo?{}:n===en?[]:n}function aV(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function cV(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function uV(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function ly(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}var ni=class{},cc=class{};var Ig=class extends ni{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new wd(this);let s=$T(e);this._bootstrapComponents=rD(s.bootstrap),this._r3Injector=PC(e,t,[{provide:ni,useValue:this},{provide:Io,useValue:this.componentFactoryResolver},...r],Nt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},wg=class extends cc{constructor(e){super(),this.moduleType=e}create(e){return new Ig(this.moduleType,e,[])}};var Ed=class extends ni{constructor(e){super(),this.componentFactoryResolver=new wd(this),this.instance=null;let t=new sc([...e.providers,{provide:ni,useValue:this},{provide:Io,useValue:this.componentFactoryResolver}],e.parent||Lg(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function dy(n,e,t=null){return new Ed({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function OD(n){return dV(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function lV(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function dV(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function hV(n,e,t){return n[e]=t}function Ao(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function fV(n){return(n.flags&32)===32}function pV(n,e,t,r,i,s,o,a,c){let l=e.consts,h=fc(e,n,4,o||null,a||null);oy(e,t,h,yo(l,c)),Ud(e,h);let p=h.tView=sy(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function mV(n,e,t,r,i,s,o,a,c,l){let h=t+rn,p=e.firstCreatePass?pV(h,e,n,r,i,s,o,a,c):e.data[h];is(p,!1);let y=gV(e,n,p,t);Fd()&&Hd(e,n,y,p),ti(y,n);let v=wD(y,n,y,p);return n[h]=v,Gd(n,v),eV(v,p,n),xd(p)&&ry(e,n,p),c!=null&&iy(n,p,l),p}function ke(n,e,t,r,i,s,o,a){let c=Ae(),l=vt(),h=yo(l.consts,s);return mV(c,l,n,e,t,r,i,h,o,a),ke}var gV=yV;function yV(n,e,t,r){return Vd(!0),e[Ze].createComment("")}var ec=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(ec||{}),vV=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}}return n})(),pT=class n{constructor(){this.ngZone=O(be),this.scheduler=O(_o),this.errorHandler=O(cr,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[ec.EarlyRead,ec.Write,ec.MixedReadWrite,ec.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}};function mc(n,e,t,r){let i=Ae(),s=Ld();if(Ao(i,s,e)){let o=vt(),a=$g();cF(a,i,n,e,t,r)}return mc}function _V(n,e,t,r){return Ao(n,Ld(),t)?e+Ad(t)+r:os}function Ql(n,e){return n<<17|e<<2}function rs(n){return n>>17&32767}function IV(n){return(n&2)==2}function wV(n,e){return n&131071|e<<17}function Eg(n){return n|2}function Eo(n){return(n&131068)>>2}function xm(n,e){return n&-131069|e<<2}function EV(n){return(n&1)===1}function bg(n){return n|1}function bV(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=rs(o),c=Eo(o);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||dc(p,h)>0)&&(l=!0)}else h=t;if(i)if(c!==0){let y=rs(n[a+1]);n[r+1]=Ql(y,a),y!==0&&(n[y+1]=xm(n[y+1],r)),n[a+1]=wV(n[a+1],r)}else n[r+1]=Ql(a,0),a!==0&&(n[a+1]=xm(n[a+1],r)),a=r;else n[r+1]=Ql(c,0),a===0?a=r:n[c+1]=xm(n[c+1],r),c=r;l&&(n[r+1]=Eg(n[r+1])),mT(n,h,r,!0),mT(n,h,r,!1),TV(e,h,n,r,s),o=Ql(a,c),s?e.classBindings=o:e.styleBindings=o}function TV(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&dc(s,e)>=0&&(t[r+1]=bg(t[r+1]))}function mT(n,e,t,r){let i=n[t+1],s=e===null,o=r?rs(i):Eo(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],l=n[o+1];CV(c,e)&&(a=!0,n[o+1]=r?bg(l):Eg(l)),o=r?rs(l):Eo(l)}a&&(n[t+1]=r?Eg(i):bg(i))}function CV(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?dc(n,e)>=0:!1}function J(n,e,t){let r=Ae(),i=Ld();if(Ao(r,i,e)){let s=vt(),o=$g();vD(s,o,r,n,e,r[Ze],t,!1)}return J}function gT(n,e,t,r,i){let s=e.inputs,o=i?"class":"style";ay(n,t,s[o],o,r)}function ci(n,e){return DV(n,e,null,!0),ci}function DV(n,e,t,r){let i=Ae(),s=vt(),o=a1(2);if(s.firstUpdatePass&&AV(s,n,o,r),e!==os&&Ao(i,o,e)){let a=s.data[Co()];xV(s,a,i,i[Ze],n,i[o+1]=kV(e,t),r,o)}}function SV(n,e){return e>=n.expandoStartIndex}function AV(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[Co()],o=SV(n,t);OV(s,r)&&e===null&&!o&&(e=!1),e=RV(i,s,e,r),bV(i,s,e,t,o,r)}}function RV(n,e,t,r){let i=d1(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=km(null,n,e,t,r),t=uc(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=km(i,n,e,t,r),s===null){let c=MV(n,e,r);c!==void 0&&Array.isArray(c)&&(c=km(null,n,e,c[1],r),c=uc(c,e.attrs,r),NV(n,e,r,c))}else s=PV(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function MV(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Eo(r)!==0)return n[rs(r)]}function NV(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[rs(i)]=r}function PV(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=uc(r,o,t)}return uc(r,e.attrs,t)}function km(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=uc(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function uc(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),mO(n,o,t?!0:e[++s]))}return n===void 0?null:n}function xV(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],h=EV(l)?yT(c,e,t,i,Eo(l),o):void 0;if(!bd(h)){bd(s)||IV(l)&&(s=yT(c,null,t,i,a,o));let p=nC(Co(),t);jL(r,o,p,i,s)}}function yT(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),h=l?c[1]:c,p=h===null,y=t[i+1];y===os&&(y=p?en:void 0);let v=p?Tm(y,r):h===r?y:void 0;if(l&&!bd(v)&&(v=Tm(c,r)),bd(v)&&(a=v,o))return a;let C=n[i+1];i=o?rs(C):Eo(C)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=Tm(c,r))}return a}function bd(n){return n!==void 0}function kV(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Nt(Vn(n)))),n}function OV(n,e){return(n.flags&(e?8:16))!==0}function LV(n,e,t,r,i,s){let o=e.consts,a=yo(o,i),c=fc(e,n,2,r,a);return oy(e,t,c,yo(o,s)),c.attrs!==null&&Id(c,c.attrs,!1),c.mergedAttrs!==null&&Id(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function P(n,e,t,r){let i=Ae(),s=vt(),o=rn+n,a=i[Ze],c=s.firstCreatePass?LV(o,s,i,e,t,r):s.data[o],l=FV(s,i,c,a,e,n);i[o]=l;let h=xd(c);return is(c,!0),hD(a,l,c),!fV(c)&&Fd()&&Hd(s,i,l,c),ZO()===0&&ti(l,i),XO(),h&&(ry(s,i,c),ny(s,c,i)),r!==null&&iy(i,c),P}function x(){let n=_t();Ug()?dC():(n=n.parent,is(n,!1));let e=n;n1(e)&&r1(),e1();let t=vt();return t.firstCreatePass&&(Ud(t,n),Fg(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&_1(e)&&gT(t,e,Ae(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&I1(e)&&gT(t,e,Ae(),e.stylesWithoutHost,!1),x}function It(n,e,t,r){return P(n,e,t,r),x(),It}var FV=(n,e,t,r,i,s)=>(Vd(!0),iD(r,i,m1()));function VV(n,e,t,r,i){let s=e.consts,o=yo(s,r),a=fc(e,n,8,"ng-container",o);o!==null&&Id(a,o,!0);let c=yo(s,i);return oy(e,t,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function as(n,e,t){let r=Ae(),i=vt(),s=n+rn,o=i.firstCreatePass?VV(s,i,r,e,t):i.data[s];is(o,!0);let a=UV(i,r,o,n);return r[s]=a,Fd()&&Hd(i,r,a,o),ti(a,r),xd(o)&&(ry(i,r,o),ny(i,o,r)),t!=null&&iy(r,o),as}function cs(){let n=_t(),e=vt();return Ug()?dC():(n=n.parent,is(n,!1)),e.firstCreatePass&&(Ud(e,n),Fg(n)&&e.queries.elementEnd(n)),cs}var UV=(n,e,t,r)=>(Vd(!0),TL(e[Ze],""));function ui(){return Ae()}var Td="en-US";var jV=Td;function BV(n){typeof n=="string"&&(jV=n.toLowerCase().replace(/_/g,"-"))}var $V=(n,e,t)=>{};function Pe(n,e,t,r){let i=Ae(),s=vt(),o=_t();return LD(s,i,i[Ze],o,n,e,r),Pe}function HV(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[ad],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function LD(n,e,t,r,i,s,o){let a=xd(r),l=n.firstCreatePass&&fF(n),h=e[gn],p=hF(e),y=!0;if(r.type&3||o){let M=on(r,e),A=o?o(M):M,F=p.length,H=o?W=>o(Ln(W[r.index])):r.index,U=null;if(!o&&a&&(U=HV(n,e,i,r.index)),U!==null){let W=U.__ngLastListenerFn__||U;W.__ngNextListenerFn__=s,U.__ngLastListenerFn__=s,y=!1}else{s=_T(r,e,h,s),$V(M,i,s);let W=t.listen(A,i,s);p.push(s,W),l&&l.push(i,H,F,F+1)}}else s=_T(r,e,h,s);let v=r.outputs,C;if(y&&v!==null&&(C=v[i])){let M=C.length;if(M)for(let A=0;A<M;A+=2){let F=C[A],H=C[A+1],me=e[F][H].subscribe(s),Y=p.length;p.push(s,me),l&&l.push(i,r.index,Y,-(Y+1))}}}function vT(n,e,t,r){let i=we(null);try{return Nn(6,e,t),t(r)!==!1}catch(s){return bD(n,s),!1}finally{Nn(7,e,t),we(i)}}function _T(n,e,t,r){return function i(s){if(s===Function)return r;let o=n.componentOffset>-1?ii(n.index,e):e;uy(o,5);let a=vT(e,t,r,s),c=i.__ngNextListenerFn__;for(;c;)a=vT(e,t,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function ae(n=1){return f1(n)}function zV(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function gc(n){let e=s1();return iC(e,rn+n)}function B(n,e=""){let t=Ae(),r=vt(),i=n+rn,s=r.firstCreatePass?fc(r,i,1,e,null):r.data[i],o=qV(r,t,s,e,n);t[i]=o,Fd()&&Hd(r,t,o,s),is(s,!1)}var qV=(n,e,t,r,i)=>(Vd(!0),EL(e[Ze],r));function He(n){return Wt("",n,""),He}function Wt(n,e,t){let r=Ae(),i=_V(r,n,e,t);return i!==os&&pF(r,Co(),i),Wt}function wt(n,e,t){kD(e)&&(e=e());let r=Ae(),i=Ld();if(Ao(r,i,e)){let s=vt(),o=$g();vD(s,o,r,n,e,r[Ze],t,!1)}return wt}function xt(n,e){let t=kD(n);return t&&n.set(e),t}function Et(n,e){let t=Ae(),r=vt(),i=_t();return LD(r,t,t[Ze],i,n,e),Et}function GV(n,e,t){let r=vt();if(r.firstCreatePass){let i=ei(n);Tg(t,r.data,r.blueprint,i,!0),Tg(e,r.data,r.blueprint,i,!1)}}function Tg(n,e,t,r,i){if(n=Mt(n),Array.isArray(n))for(let s=0;s<n.length;s++)Tg(n[s],e,t,r,i);else{let s=vt(),o=Ae(),a=_t(),c=fo(n)?n:Mt(n.provide),l=KT(n),h=a.providerIndexes&1048575,p=a.directiveStart,y=a.providerIndexes>>20;if(fo(n)||!n.multi){let v=new ts(l,i,Z),C=Lm(c,e,i?h:h+y,p);C===-1?(Ym(pd(a,o),s,c),Om(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(v),o.push(v)):(t[C]=v,o[C]=v)}else{let v=Lm(c,e,h+y,p),C=Lm(c,e,h,h+y),M=v>=0&&t[v],A=C>=0&&t[C];if(i&&!A||!i&&!M){Ym(pd(a,o),s,c);let F=QV(i?KV:WV,t.length,i,r,l);!i&&A&&(t[C].providerFactory=F),Om(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(F),o.push(F)}else{let F=FD(t[i?C:v],l,!i&&r);Om(s,n,v>-1?v:C,F)}!i&&r&&A&&t[C].componentProviders++}}}function Om(n,e,t,r){let i=fo(e),s=LO(e);if(i||s){let c=(s?Mt(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,c]):l[h+1].push(r,c)}else l.push(t,c)}}}function FD(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Lm(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function WV(n,e,t,r){return Cg(this.multi,[])}function KV(n,e,t,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=vo(t,t[ge],this.providerFactory.index,r);s=a.slice(0,o),Cg(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],Cg(i,s);return s}function Cg(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function QV(n,e,t,r,i){let s=new ts(n,t,Z);return s.multi=[],s.index=e,s.componentProviders=0,FD(s,i,r&&!t),s}function us(n,e=[]){return t=>{t.providersResolver=(r,i)=>GV(r,i?i(n):n,e)}}var YV=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=qT(!1,t.type),i=r.length>0?dy([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=q({token:n,providedIn:"environment",factory:()=>new n(X(Ut))})}}return n})();function an(n){So("NgStandalone"),n.getStandaloneInjector=e=>e.get(YV).getOrCreateStandaloneInjector(n)}function VD(n,e,t,r){return UD(Ae(),fC(),n,e,t,r)}function JV(n,e){let t=n[e];return t===os?void 0:t}function UD(n,e,t,r,i,s){let o=e+t;return Ao(n,o,i)?hV(n,o+1,s?r.call(s,i):r(i)):JV(n,o+1)}function Kt(n,e){let t=vt(),r,i=n+rn;t.firstCreatePass?(r=ZV(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=Yi(r.type,!0)),o,a=Vt(Z);try{let c=fd(!1),l=s();return fd(c),zV(t,Ae(),i,l),l}finally{Vt(a)}}function ZV(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Qt(n,e,t){let r=n+rn,i=Ae(),s=iC(i,r);return XV(i,r)?UD(i,fC(),e,s.transform,t,s):s.transform(t)}function XV(n,e){return n[ge].data[e].pure}function jD(n,e){return MD(n,e)}var dr=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},BD=new dr("18.2.14");var Qd=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var $D=new z("");function li(n){return!!n&&typeof n.then=="function"}function hy(n){return!!n&&typeof n.subscribe=="function"}var HD=new z(""),zD=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=O(HD,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=i();if(li(s))t.push(s);else if(hy(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Yd=new z("");function eU(){s0(()=>{throw new K(600,!1)})}function tU(n){return n.isBoundToModule}var nU=10;function rU(n,e,t){try{let r=t();return li(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var di=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=O(j1),this.afterRenderManager=O(vV),this.zonelessEnabled=O(Kd),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new st,this.afterTick=new st,this.componentTypes=[],this.components=[],this.isStable=O(oi).hasPendingTasks.pipe(Q(t=>!t)),this._injector=O(Ut)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof _d;if(!this._injector.get(zD).done){let y=!i&&BT(t),v=!1;throw new K(405,v)}let o;i?o=t:o=this._injector.get(Io).resolveComponentFactory(t),this.componentTypes.push(o.componentType);let a=tU(o)?void 0:this._injector.get(ni),c=r||o.selector,l=o.create(yt.NULL,[],c,a),h=l.location.nativeElement,p=l.injector.get($D,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),ed(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new K(101,!1);let t=we(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,we(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(wo,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<nU;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)iU(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>kd(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;ed(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(Yd,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>ed(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new K(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ed(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function iU(n,e,t,r){if(!t&&!kd(n))return;DD(n,e,t&&!r?0:1)}var Dg=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},fy=(()=>{class n{compileModuleSync(t){return new wg(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=$T(t),s=rD(i.declarations).reduce((o,a)=>{let c=Ji(a);return c&&o.push(new ac(c)),o},[]);return new Dg(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var sU=(()=>{class n{constructor(){this.zone=O(be),this.changeDetectionScheduler=O(_o),this.applicationRef=O(di)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),oU=new z("",{factory:()=>!1});function qD({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new be(de(V({},WD()),{scheduleInRootZone:t})),[{provide:be,useFactory:n},{provide:ho,multi:!0,useFactory:()=>{let r=O(sU,{optional:!0});return()=>r.initialize()}},{provide:ho,multi:!0,useFactory:()=>{let r=O(aU);return()=>{r.initialize()}}},e===!0?{provide:ND,useValue:!0}:[],{provide:PD,useValue:t??xC}]}function GD(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=qD({ngZoneFactory:()=>{let i=WD(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&So("NgZone_CoalesceEvent"),new be(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return jt([{provide:oU,useValue:!0},{provide:Kd,useValue:!1},r])}function WD(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var aU=(()=>{class n{constructor(){this.subscription=new Be,this.initialized=!1,this.zone=O(be),this.pendingTasks=O(oi)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{be.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{be.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var cU=(()=>{class n{constructor(){this.appRef=O(di),this.taskService=O(oi),this.ngZone=O(be),this.zonelessEnabled=O(Kd),this.disableScheduling=O(ND,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Be,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(gd):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(O(PD,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof tg||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?Y0:OC;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(gd+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Y0(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function uU(){return typeof $localize<"u"&&$localize.locale||Td}var py=new z("",{providedIn:"root",factory:()=>O(py,fe.Optional|fe.SkipSelf)||uU()});var Sg=new z("");function Yl(n){return!n.moduleRef}function lU(n){let e=Yl(n)?n.r3Injector:n.moduleRef.injector,t=e.get(be);return t.run(()=>{Yl(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(cr,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),Yl(n)){let s=()=>e.destroy(),o=n.platformInjector.get(Sg);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(Sg);o.add(s),n.moduleRef.onDestroy(()=>{ed(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return rU(r,t,()=>{let s=e.get(zD);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(py,Td);if(BV(o||Td),Yl(n)){let a=e.get(di);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return dU(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function dU(n,e){let t=n.injector.get(di);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new K(-403,!1);e.push(n)}var td=null,KD=new z("");function hU(n=[],e){return yt.create({name:e,providers:[{provide:Md,useValue:"platform"},{provide:Sg,useValue:new Set([()=>td=null])},...n]})}function fU(n=[]){if(td)return td;let e=hU(n);return e.get(KD,!1)||(td=e),eU(),pU(e),e}function pU(n){n.get(Qg,null)?.forEach(t=>t())}var hi=(()=>{class n{static{this.__NG_ELEMENT_ID__=mU}}return n})();function mU(n){return gU(_t(),Ae(),(n&16)===16)}function gU(n,e,t){if(Pd(n)&&!t){let r=ii(n.index,e);return new ns(r,r)}else if(n.type&175){let r=e[On];return new ns(r,e)}return null}var Ag=class{constructor(){}supports(e){return OD(e)}create(e){return new Rg(e)}},yU=(n,e)=>e,Rg=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||yU}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<IT(r,i,s)?t:r,a=IT(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,h=c-i;if(l!=h){for(let y=0;y<l;y++){let v=y<s.length?s[y]:s[y]=0,C=v+y;h<=C&&C<l&&(s[y]=v+1)}let p=o.previousIndex;s[p]=h-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!OD(e))throw new K(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,lV(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new Mg(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Cd),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Cd),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Mg=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Ng=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Cd=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Ng,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function IT(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function wT(){return new my([new Ag])}var my=(()=>{class n{static{this.\u0275prov=q({token:n,providedIn:"root",factory:wT})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||wT()),deps:[[n,new PT,new Xe]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new K(901,!1)}}return n})();function QD(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;try{let s=i?.injector??fU(r);if(s.get(KD,!1)===!0&&!n.platformRef)throw new K(401,!1);let o=[qD({}),{provide:_o,useExisting:cU},...t||[]],a=new Ed({providers:o,parent:s,debugName:"",runEnvironmentInitializers:!1});return lU({r3Injector:a.injector,platformInjector:s,rootComponent:e})}catch(s){return Promise.reject(s)}}function fi(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function yc(n,e){So("NgSignals");let t=n0(n);return e?.equal&&(t[or].equal=e.equal),t}function wn(n){let e=we(null);try{return n()}finally{we(e)}}var tS=null;function _r(){return tS}function nS(n){tS??=n}var Jd=class{};var kt=new z(""),wy=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>O(_U),providedIn:"platform"})}}return n})();var _U=(()=>{class n extends wy{constructor(){super(),this._doc=O(kt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return _r().getBaseHref(this._doc)}onPopState(t){let r=_r().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=_r().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function Ey(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function YD(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function vr(n){return n&&n[0]!=="?"?"?"+n:n}var pi=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>O(iS),providedIn:"root"})}}return n})(),rS=new z(""),iS=(()=>{class n extends pi{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??O(kt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ey(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+vr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+vr(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+vr(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(X(wy),X(rS,8))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),sS=(()=>{class n extends pi{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Ey(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+vr(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+vr(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(X(wy),X(rS,8))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),vc=(()=>{class n{constructor(t){this._subject=new Je,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=EU(YD(JD(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+vr(r))}normalize(t){return n.stripTrailingSlash(wU(this._basePath,JD(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+vr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+vr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=vr}static{this.joinWithSlash=Ey}static{this.stripTrailingSlash=YD}static{this.\u0275fac=function(r){return new(r||n)(X(pi))}}static{this.\u0275prov=q({token:n,factory:()=>IU(),providedIn:"root"})}}return n})();function IU(){return new vc(X(pi))}function wU(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function JD(n){return n.replace(/\/index.html$/,"")}function EU(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function Zd(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var gy=/\s+/,ZD=[],oS=(()=>{class n{constructor(t,r){this._ngEl=t,this._renderer=r,this.initialClasses=ZD,this.stateMap=new Map}set klass(t){this.initialClasses=t!=null?t.trim().split(gy):ZD}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(gy):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(gy).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||n)(Z(_n),Z(jn))}}static{this.\u0275dir=$e({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();var yy=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Mo=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new yy(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),XD(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);XD(s,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Z(Do),Z(Wd),Z(my))}}static{this.\u0275dir=$e({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function XD(n,e){n.context.$implicit=e.item}var mi=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new vy,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){eS("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){eS("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Z(Do),Z(Wd))}}static{this.\u0275dir=$e({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),vy=class{constructor(){this.$implicit=null,this.ngIf=null}};function eS(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Nt(e)}'.`)}function bU(n,e){return new K(2100,!1)}var _y=class{createSubscription(e,t){return wn(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){wn(()=>e.unsubscribe())}},Iy=class{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}},TU=new Iy,CU=new _y,No=(()=>{class n{constructor(t){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(li(t))return TU;if(hy(t))return CU;throw bU(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(r){return new(r||n)(Z(hi,16))}}static{this.\u0275pipe=bo({name:"async",type:n,pure:!1,standalone:!0})}}return n})();var Ir=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=pr({type:n})}static{this.\u0275inj=fr({})}}return n})(),aS="browser",DU="server";function Xd(n){return n===DU}var Ro=class{};var Ic=class{},th=class{},wr=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Ty=class{encodeKey(e){return cS(e)}encodeValue(e){return cS(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function SU(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,a]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],c=t.get(o)||[];c.push(a),t.set(o,c)}),t}var AU=/%(\d[a-f0-9])/gi,RU={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function cS(n){return encodeURIComponent(n).replace(AU,(e,t)=>RU[t]??e)}function eh(n){return`${n}`}var yi=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Ty,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=SU(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(eh):[eh(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(eh(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(eh(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Cy=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function MU(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function uS(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function lS(n){return typeof Blob<"u"&&n instanceof Blob}function dS(n){return typeof FormData<"u"&&n instanceof FormData}function NU(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var _c=class n{constructor(e,t,r,i){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(MU(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new wr,this.context??=new Cy,!this.params)this.params=new yi,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||uS(this.body)||lS(this.body)||dS(this.body)||NU(this.body)?this.body:this.body instanceof yi?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||dS(this.body)?null:lS(this.body)?this.body.type||null:uS(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof yi?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,l=e.headers||this.headers,h=e.params||this.params,p=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((y,v)=>y.set(v,e.setHeaders[v]),l)),e.setParams&&(h=Object.keys(e.setParams).reduce((y,v)=>y.set(v,e.setParams[v]),h)),new n(t,r,o,{params:h,headers:l,context:p,reportProgress:c,responseType:i,withCredentials:a,transferCache:s})}},vi=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(vi||{}),wc=class{constructor(e,t=200,r="OK"){this.headers=e.headers||new wr,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},nh=class n extends wc{constructor(e={}){super(e),this.type=vi.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Ec=class n extends wc{constructor(e={}){super(e),this.type=vi.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},gi=class extends wc{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},mS=200,PU=204;function by(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var xU=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof _c)s=t;else{let c;i.headers instanceof wr?c=i.headers:c=new wr(i.headers);let l;i.params&&(i.params instanceof yi?l=i.params:l=new yi({fromObject:i.params})),s=new _c(t,r,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let o=te(s).pipe(Kr(c=>this.handler.handle(c)));if(t instanceof _c||i.observe==="events")return o;let a=o.pipe(Gt(c=>c instanceof Ec));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(Q(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(Q(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(Q(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return a.pipe(Q(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new yi().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,by(i,r))}post(t,r,i={}){return this.request("POST",t,by(i,r))}put(t,r,i={}){return this.request("PUT",t,by(i,r))}static{this.\u0275fac=function(r){return new(r||n)(X(Ic))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),kU=/^\)\]\}',?\n/,OU="X-Request-URL";function hS(n){if(n.url)return n.url;let e=OU.toLocaleLowerCase();return n.headers.get(e)}var LU=(()=>{class n{constructor(){this.fetchImpl=O(Dy,{optional:!0})?.fetch??((...t)=>globalThis.fetch(...t)),this.ngZone=O(be)}handle(t){return new ce(r=>{let i=new AbortController;return this.doRequest(t,i.signal,r).then(Sy,s=>r.error(new gi({error:s}))),()=>i.abort()})}doRequest(t,r,i){return g(this,null,function*(){let s=this.createRequestInit(t),o;try{let v=this.ngZone.runOutsideAngular(()=>this.fetchImpl(t.urlWithParams,V({signal:r},s)));FU(v),i.next({type:vi.Sent}),o=yield v}catch(v){i.error(new gi({error:v,status:v.status??0,statusText:v.statusText,url:t.urlWithParams,headers:v.headers}));return}let a=new wr(o.headers),c=o.statusText,l=hS(o)??t.urlWithParams,h=o.status,p=null;if(t.reportProgress&&i.next(new nh({headers:a,status:h,statusText:c,url:l})),o.body){let v=o.headers.get("content-length"),C=[],M=o.body.getReader(),A=0,F,H,U=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>g(this,null,function*(){for(;;){let{done:me,value:Y}=yield M.read();if(me)break;if(C.push(Y),A+=Y.length,t.reportProgress){H=t.responseType==="text"?(H??"")+(F??=new TextDecoder).decode(Y,{stream:!0}):void 0;let E=()=>i.next({type:vi.DownloadProgress,total:v?+v:void 0,loaded:A,partialText:H});U?U.run(E):E()}}}));let W=this.concatChunks(C,A);try{let me=o.headers.get("Content-Type")??"";p=this.parseBody(t,W,me)}catch(me){i.error(new gi({error:me,headers:new wr(o.headers),status:o.status,statusText:o.statusText,url:hS(o)??t.urlWithParams}));return}}h===0&&(h=p?mS:0),h>=200&&h<300?(i.next(new Ec({body:p,headers:a,status:h,statusText:c,url:l})),i.complete()):i.error(new gi({error:p,headers:a,status:h,statusText:c,url:l}))})}parseBody(t,r,i){switch(t.responseType){case"json":let s=new TextDecoder().decode(r).replace(kU,"");return s===""?null:JSON.parse(s);case"text":return new TextDecoder().decode(r);case"blob":return new Blob([r],{type:i});case"arraybuffer":return r.buffer}}createRequestInit(t){let r={},i=t.withCredentials?"include":void 0;if(t.headers.forEach((s,o)=>r[s]=o.join(",")),t.headers.has("Accept")||(r.Accept="application/json, text/plain, */*"),!t.headers.has("Content-Type")){let s=t.detectContentTypeHeader();s!==null&&(r["Content-Type"]=s)}return{body:t.serializeBody(),method:t.method,headers:r,credentials:i}}concatChunks(t,r){let i=new Uint8Array(r),s=0;for(let o of t)i.set(o,s),s+=o.length;return i}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),Dy=class{};function Sy(){}function FU(n){n.then(Sy,Sy)}function VU(n,e){return e(n)}function UU(n,e,t){return(r,i)=>yn(t,()=>e(r,s=>n(s,i)))}var gS=new z(""),jU=new z(""),BU=new z("",{providedIn:"root",factory:()=>!0});var fS=(()=>{class n extends Ic{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=O(oi),this.contributeToStability=O(BU)}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(gS),...this.injector.get(jU,[])]));this.chain=r.reduceRight((i,s)=>UU(i,s,this.injector),VU)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Ki(()=>this.pendingTasks.remove(r)))}else return this.chain(t,r=>this.backend.handle(r))}static{this.\u0275fac=function(r){return new(r||n)(X(th),X(Ut))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})();var $U=/^\)\]\}',?\n/;function HU(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var pS=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new K(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?Se(r.\u0275loadImpl()):te(null)).pipe(ot(()=>new ce(s=>{let o=r.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((M,A)=>o.setRequestHeader(M,A.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){let M=t.detectContentTypeHeader();M!==null&&o.setRequestHeader("Content-Type",M)}if(t.responseType){let M=t.responseType.toLowerCase();o.responseType=M!=="json"?M:"text"}let a=t.serializeBody(),c=null,l=()=>{if(c!==null)return c;let M=o.statusText||"OK",A=new wr(o.getAllResponseHeaders()),F=HU(o)||t.url;return c=new nh({headers:A,status:o.status,statusText:M,url:F}),c},h=()=>{let{headers:M,status:A,statusText:F,url:H}=l(),U=null;A!==PU&&(U=typeof o.response>"u"?o.responseText:o.response),A===0&&(A=U?mS:0);let W=A>=200&&A<300;if(t.responseType==="json"&&typeof U=="string"){let me=U;U=U.replace($U,"");try{U=U!==""?JSON.parse(U):null}catch(Y){U=me,W&&(W=!1,U={error:Y,text:U})}}W?(s.next(new Ec({body:U,headers:M,status:A,statusText:F,url:H||void 0})),s.complete()):s.error(new gi({error:U,headers:M,status:A,statusText:F,url:H||void 0}))},p=M=>{let{url:A}=l(),F=new gi({error:M,status:o.status||0,statusText:o.statusText||"Unknown Error",url:A||void 0});s.error(F)},y=!1,v=M=>{y||(s.next(l()),y=!0);let A={type:vi.DownloadProgress,loaded:M.loaded};M.lengthComputable&&(A.total=M.total),t.responseType==="text"&&o.responseText&&(A.partialText=o.responseText),s.next(A)},C=M=>{let A={type:vi.UploadProgress,loaded:M.loaded};M.lengthComputable&&(A.total=M.total),s.next(A)};return o.addEventListener("load",h),o.addEventListener("error",p),o.addEventListener("timeout",p),o.addEventListener("abort",p),t.reportProgress&&(o.addEventListener("progress",v),a!==null&&o.upload&&o.upload.addEventListener("progress",C)),o.send(a),s.next({type:vi.Sent}),()=>{o.removeEventListener("error",p),o.removeEventListener("abort",p),o.removeEventListener("load",h),o.removeEventListener("timeout",p),t.reportProgress&&(o.removeEventListener("progress",v),a!==null&&o.upload&&o.upload.removeEventListener("progress",C)),o.readyState!==o.DONE&&o.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)(X(Ro))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),yS=new z(""),zU="XSRF-TOKEN",qU=new z("",{providedIn:"root",factory:()=>zU}),GU="X-XSRF-TOKEN",WU=new z("",{providedIn:"root",factory:()=>GU}),rh=class{},KU=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Zd(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)(X(kt),X(Fn),X(qU))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})();function QU(n,e){let t=n.url.toLowerCase();if(!O(yS)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=O(rh).getToken(),i=O(WU);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}function vS(...n){let e=[xU,pS,fS,{provide:Ic,useExisting:fS},{provide:th,useFactory:()=>O(LU,{optional:!0})??O(pS)},{provide:gS,useValue:QU,multi:!0},{provide:yS,useValue:!0},{provide:rh,useClass:KU}];for(let t of n)e.push(...t.\u0275providers);return jt(e)}var My=class extends Jd{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Ny=class n extends My{static makeCurrent(){nS(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=YU();return t==null?null:JU(t)}resetBaseElement(){bc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Zd(document.cookie,e)}},bc=null;function YU(){return bc=bc||document.querySelector("base"),bc?bc.getAttribute("href"):null}function JU(n){return new URL(n,document.baseURI).pathname}var ZU=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),Py=new z(""),ES=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new K(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(X(Py),X(be))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),ih=class{constructor(e){this._doc=e}},Ay="ng-app-id",bS=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Xd(s),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Ay}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(Ay),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(Ay,this.appId),t.appendChild(o),o}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(X(kt),X(Kg),X(Yg,8),X(Fn))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),Ry={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},ky=/%COMP%/g,TS="%COMP%",XU=`_nghost-${TS}`,e2=`_ngcontent-${TS}`,t2=!0,n2=new z("",{providedIn:"root",factory:()=>t2});function r2(n){return e2.replace(ky,n)}function i2(n){return XU.replace(ky,n)}function CS(n,e){return e.map(t=>t.replace(ky,n))}var _S=(()=>{class n{constructor(t,r,i,s,o,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Xd(a),this.defaultRenderer=new Tc(t,o,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===xn.ShadowDom&&(r=de(V({},r),{encapsulation:xn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof sh?i.applyToHost(t):i instanceof Cc&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case xn.Emulated:s=new sh(c,l,r,this.appId,h,o,a,p);break;case xn.ShadowDom:return new xy(c,l,t,r,o,a,this.nonce,p);default:s=new Cc(c,l,r,h,o,a,p);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(X(ES),X(bS),X(Kg),X(n2),X(kt),X(Fn),X(be),X(Yg))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),Tc=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Ry[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(IS(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(IS(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new K(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=Ry[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Ry[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(lr.DashCase|lr.Important)?e.style.setProperty(t,r,i&lr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&lr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=_r().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function IS(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var xy=class extends Tc{constructor(e,t,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=CS(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Cc=class extends Tc{constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?CS(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},sh=class extends Cc{constructor(e,t,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,t,r,s,o,a,c,l),this.contentAttr=r2(l),this.hostAttr=i2(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},s2=(()=>{class n extends ih{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(X(kt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),wS=["alt","control","meta","shift"],o2={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},a2={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},c2=(()=>{class n extends ih{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>_r().onAndCancel(t,s.domEventName,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),wS.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=o2[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),wS.forEach(o=>{if(o!==i){let a=a2[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(X(kt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})();function DS(n,e,t){return QD(V({rootComponent:n,platformRef:t?.platformRef},u2(e)))}function u2(n){return{appProviders:[...p2,...n?.providers??[]],platformProviders:f2}}function l2(){Ny.makeCurrent()}function d2(){return new cr}function h2(){return $C(document),document}var f2=[{provide:Fn,useValue:aS},{provide:Qg,useValue:l2,multi:!0},{provide:kt,useFactory:h2,deps:[]}];var p2=[{provide:Md,useValue:"root"},{provide:cr,useFactory:d2,deps:[]},{provide:Py,useClass:s2,multi:!0,deps:[kt,be,Fn]},{provide:Py,useClass:c2,multi:!0,deps:[kt]},_S,bS,ES,{provide:wo,useExisting:_S},{provide:Ro,useClass:ZU,deps:[]},[]];var SS=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(X(kt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Oy=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:function(r){let i=null;return r?i=new(r||n):i=X(m2),i},providedIn:"root"})}}return n})(),m2=(()=>{class n extends Oy{constructor(t){super(),this._doc=t}sanitize(t,r){if(r==null)return null;switch(t){case Un.NONE:return r;case Un.HTML:return ai(r,"HTML")?Vn(r):eD(this._doc,String(r)).toString();case Un.STYLE:return ai(r,"Style")?Vn(r):r;case Un.SCRIPT:if(ai(r,"Script"))return Vn(r);throw new K(5200,!1);case Un.URL:return ai(r,"URL")?Vn(r):$d(String(r));case Un.RESOURCE_URL:if(ai(r,"ResourceURL"))return Vn(r);throw new K(5201,!1);default:throw new K(5202,!1)}}bypassSecurityTrustHtml(t){return zC(t)}bypassSecurityTrustStyle(t){return qC(t)}bypassSecurityTrustScript(t){return GC(t)}bypassSecurityTrustUrl(t){return WC(t)}bypassSecurityTrustResourceUrl(t){return KC(t)}static{this.\u0275fac=function(r){return new(r||n)(X(kt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var le="primary",Bc=Symbol("RouteTitle"),jy=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Vo(n){return new jy(n)}function g2(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function y2(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Bn(n[t],e[t]))return!1;return!0}function Bn(n,e){let t=n?By(n):void 0,r=e?By(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!LS(n[i],e[i]))return!1;return!0}function By(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function LS(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function FS(n){return n.length>0?n[n.length-1]:null}function Ii(n){return gm(n)?n:li(n)?Se(Promise.resolve(n)):te(n)}var v2={exact:US,subset:jS},VS={exact:_2,subset:I2,ignored:()=>!0};function RS(n,e,t){return v2[t.paths](n.root,e.root,t.matrixParams)&&VS[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function _2(n,e){return Bn(n,e)}function US(n,e,t){if(!ds(n.segments,e.segments)||!ch(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!US(n.children[r],e.children[r],t))return!1;return!0}function I2(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>LS(n[t],e[t]))}function jS(n,e,t){return BS(n,e,e.segments,t)}function BS(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!ds(i,t)||e.hasChildren()||!ch(i,t,r))}else if(n.segments.length===t.length){if(!ds(n.segments,t)||!ch(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!jS(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!ds(n.segments,i)||!ch(n.segments,i,r)||!n.children[le]?!1:BS(n.children[le],e,s,r)}}function ch(n,e,t){return e.every((r,i)=>VS[t](n[i].parameters,r.parameters))}var br=class{constructor(e=new De([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Vo(this.queryParams),this._queryParamMap}toString(){return b2.serialize(this)}},De=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return uh(this)}},ls=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Vo(this.parameters),this._parameterMap}toString(){return HS(this)}};function w2(n,e){return ds(n,e)&&n.every((t,r)=>Bn(t.parameters,e[r].parameters))}function ds(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function E2(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===le&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==le&&(t=t.concat(e(i,r)))}),t}var fv=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>new Pc,providedIn:"root"})}}return n})(),Pc=class{parse(e){let t=new Hy(e);return new br(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Dc(e.root,!0)}`,r=D2(e.queryParams),i=typeof e.fragment=="string"?`#${T2(e.fragment)}`:"";return`${t}${r}${i}`}},b2=new Pc;function uh(n){return n.segments.map(e=>HS(e)).join("/")}function Dc(n,e){if(!n.hasChildren())return uh(n);if(e){let t=n.children[le]?Dc(n.children[le],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==le&&r.push(`${i}:${Dc(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=E2(n,(r,i)=>i===le?[Dc(n.children[le],!1)]:[`${i}:${Dc(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[le]!=null?`${uh(n)}/${t[0]}`:`${uh(n)}/(${t.join("//")})`}}function $S(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function oh(n){return $S(n).replace(/%3B/gi,";")}function T2(n){return encodeURI(n)}function $y(n){return $S(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function lh(n){return decodeURIComponent(n)}function MS(n){return lh(n.replace(/\+/g,"%20"))}function HS(n){return`${$y(n.path)}${C2(n.parameters)}`}function C2(n){return Object.entries(n).map(([e,t])=>`;${$y(e)}=${$y(t)}`).join("")}function D2(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${oh(t)}=${oh(i)}`).join("&"):`${oh(t)}=${oh(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var S2=/^[^\/()?;#]+/;function Ly(n){let e=n.match(S2);return e?e[0]:""}var A2=/^[^\/()?;=#]+/;function R2(n){let e=n.match(A2);return e?e[0]:""}var M2=/^[^=?&#]+/;function N2(n){let e=n.match(M2);return e?e[0]:""}var P2=/^[^&#]+/;function x2(n){let e=n.match(P2);return e?e[0]:""}var Hy=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new De([],{}):new De([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[le]=new De(e,t)),r}parseSegment(){let e=Ly(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new K(4009,!1);return this.capture(e),new ls(lh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=R2(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Ly(this.remaining);i&&(r=i,this.capture(r))}e[lh(t)]=lh(r)}parseQueryParam(e){let t=N2(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=x2(this.remaining);o&&(r=o,this.capture(r))}let i=MS(t),s=MS(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Ly(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new K(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=le);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[le]:new De([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new K(4011,!1)}};function zS(n){return n.segments.length>0?new De([],{[le]:n}):n}function qS(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=qS(i);if(r===le&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new De(n.segments,e);return k2(t)}function k2(n){if(n.numberOfChildren===1&&n.children[le]){let e=n.children[le];return new De(n.segments.concat(e.segments),e.children)}return n}function hs(n){return n instanceof br}function O2(n,e,t=null,r=null){let i=GS(n);return WS(i,e,t,r)}function GS(n){let e;function t(s){let o={};for(let c of s.children){let l=t(c);o[c.outlet]=l}let a=new De(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=zS(r);return e??i}function WS(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Fy(i,i,i,t,r);let s=L2(e);if(s.toRoot())return Fy(i,i,new De([],{}),t,r);let o=F2(s,i,n),a=o.processChildren?Rc(o.segmentGroup,o.index,s.commands):QS(o.segmentGroup,o.index,s.commands);return Fy(i,o.segmentGroup,a,t,r)}function dh(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function xc(n){return typeof n=="object"&&n!=null&&n.outlets}function Fy(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let o;n===e?o=t:o=KS(n,e,t);let a=zS(qS(o));return new br(a,s,i)}function KS(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=KS(s,e,t)}),new De(n.segments,r)}var hh=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&dh(r[0]))throw new K(4003,!1);let i=r.find(xc);if(i&&i!==FS(r))throw new K(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function L2(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new hh(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new hh(t,e,r)}var Oo=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function F2(n,e,t){if(n.isAbsolute)return new Oo(e,!0,0);if(!t)return new Oo(e,!1,NaN);if(t.parent===null)return new Oo(t,!0,0);let r=dh(n.commands[0])?0:1,i=t.segments.length-1+r;return V2(t,i,n.numberOfDoubleDots)}function V2(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new K(4005,!1);i=r.segments.length}return new Oo(r,!1,i-s)}function U2(n){return xc(n[0])?n[0].outlets:{[le]:n}}function QS(n,e,t){if(n??=new De([],{}),n.segments.length===0&&n.hasChildren())return Rc(n,e,t);let r=j2(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new De(n.segments.slice(0,r.pathIndex),{});return s.children[le]=new De(n.segments.slice(r.pathIndex),n.children),Rc(s,0,i)}else return r.match&&i.length===0?new De(n.segments,{}):r.match&&!n.hasChildren()?zy(n,e,t):r.match?Rc(n,0,i):zy(n,e,t)}function Rc(n,e,t){if(t.length===0)return new De(n.segments,{});{let r=U2(t),i={};if(Object.keys(r).some(s=>s!==le)&&n.children[le]&&n.numberOfChildren===1&&n.children[le].segments.length===0){let s=Rc(n.children[le],e,t);return new De(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=QS(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new De(n.segments,i)}}function j2(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(xc(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!PS(c,l,o))return s;r+=2}else{if(!PS(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function zy(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(xc(s)){let c=B2(s.outlets);return new De(r,c)}if(i===0&&dh(t[0])){let c=n.segments[e];r.push(new ls(c.path,NS(t[0]))),i++;continue}let o=xc(s)?s.outlets[le]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&dh(a)?(r.push(new ls(o,NS(a))),i+=2):(r.push(new ls(o,{})),i++)}return new De(r,{})}function B2(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=zy(new De([],{}),0,r))}),e}function NS(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function PS(n,e,t){return n==t.path&&Bn(e,t.parameters)}var Mc="imperative",lt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(lt||{}),cn=class{constructor(e,t){this.id=e,this.url=t}},kc=class extends cn{constructor(e,t,r="imperative",i=null){super(e,t),this.type=lt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},_i=class extends cn{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=lt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Jt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Jt||{}),qy=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(qy||{}),Er=class extends cn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=lt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},fs=class extends cn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=lt.NavigationSkipped}},Oc=class extends cn{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=lt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},fh=class extends cn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=lt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Gy=class extends cn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=lt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wy=class extends cn{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=lt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Ky=class extends cn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=lt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Qy=class extends cn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=lt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yy=class{constructor(e){this.route=e,this.type=lt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Jy=class{constructor(e){this.route=e,this.type=lt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Zy=class{constructor(e){this.snapshot=e,this.type=lt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Xy=class{constructor(e){this.snapshot=e,this.type=lt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ev=class{constructor(e){this.snapshot=e,this.type=lt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},tv=class{constructor(e){this.snapshot=e,this.type=lt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Lc=class{},Uo=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function $2(n,e){return n.providers&&!n._injector&&(n._injector=dy(n.providers,e,`Route: ${n.path}`)),n._injector??e}function En(n){return n.outlet||le}function H2(n,e){let t=n.filter(r=>En(r)===e);return t.push(...n.filter(r=>En(r)!==e)),t}function $c(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var nv=class{get injector(){return $c(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Ih(this.rootInjector),this.attachRef=null}},Ih=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new nv(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(X(Ut))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ph=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=rv(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=rv(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=iv(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return iv(e,this._root).map(t=>t.value)}};function rv(n,e){if(n===e.value)return e;for(let t of e.children){let r=rv(n,t);if(r)return r}return null}function iv(n,e){if(n===e.value)return[e];for(let t of e.children){let r=iv(n,t);if(r.length)return r.unshift(e),r}return[]}var Yt=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ko(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var mh=class extends ph{constructor(e,t){super(e),this.snapshot=t,pv(this,e)}toString(){return this.snapshot.toString()}};function YS(n){let e=z2(n),t=new ut([new ls("",{})]),r=new ut({}),i=new ut({}),s=new ut({}),o=new ut(""),a=new Tr(t,r,s,o,i,le,n,e.root);return a.snapshot=e.root,new mh(new Yt(a,[]),e)}function z2(n){let e={},t={},r={},i="",s=new Lo([],e,r,i,t,le,n,null,{});return new yh("",new Yt(s,[]))}var Tr=class{constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Q(l=>l[Bc]))??te(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Q(e=>Vo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Q(e=>Vo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function gh(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:V(V({},e.params),n.params),data:V(V({},e.data),n.data),resolve:V(V(V(V({},n.data),e.data),i?.data),n._resolvedData)}:r={params:V({},n.params),data:V({},n.data),resolve:V(V({},n.data),n._resolvedData??{})},i&&ZS(i)&&(r.resolve[Bc]=i.title),r}var Lo=class{get title(){return this.data?.[Bc]}constructor(e,t,r,i,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Vo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Vo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},yh=class extends ph{constructor(e,t){super(t),this.url=e,pv(this,t)}toString(){return JS(this._root)}};function pv(n,e){e.value._routerState=n,e.children.forEach(t=>pv(n,t))}function JS(n){let e=n.children.length>0?` { ${n.children.map(JS).join(", ")} } `:"";return`${n.value}${e}`}function Vy(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Bn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Bn(e.params,t.params)||n.paramsSubject.next(t.params),y2(e.url,t.url)||n.urlSubject.next(t.url),Bn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function sv(n,e){let t=Bn(n.params,e.params)&&w2(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||sv(n.parent,e.parent))}function ZS(n){return typeof n.title=="string"||n.title===null}var mv=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=le,this.activateEvents=new Je,this.deactivateEvents=new Je,this.attachEvents=new Je,this.detachEvents=new Je,this.parentContexts=O(Ih),this.location=O(Do),this.changeDetector=O(hi),this.inputBinder=O(gv,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new K(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new K(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new K(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new K(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new ov(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=$e({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ri]})}}return n})(),ov=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Tr?this.route:e===Ih?this.childContexts:this.parent.get(e,t)}},gv=new z("");function q2(n,e,t){let r=Fc(n,e._root,t?t._root:void 0);return new mh(r,e)}function Fc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=G2(n,e,t);return new Yt(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Fc(n,a)),o}}let r=W2(e.value),i=e.children.map(s=>Fc(n,s));return new Yt(r,i)}}function G2(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Fc(n,r,i);return Fc(n,r)})}function W2(n){return new Tr(new ut(n.url),new ut(n.params),new ut(n.queryParams),new ut(n.fragment),new ut(n.data),n.outlet,n.component,n)}var Vc=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},XS="ngNavigationCancelingError";function vh(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=hs(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=eA(!1,Jt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function eA(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[XS]=!0,t.cancellationCode=e,t}function K2(n){return tA(n)&&hs(n.url)}function tA(n){return!!n&&n[XS]}var Q2=(n,e,t,r)=>Q(i=>(new av(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),av=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Vy(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=ko(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=ko(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=ko(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=ko(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new tv(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Xy(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(Vy(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Vy(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},_h=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Fo=class{constructor(e,t){this.component=e,this.route=t}};function Y2(n,e,t){let r=n._root,i=e?e._root:null;return Sc(r,i,t,[r.value])}function J2(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Bo(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!CT(n)?n:e.get(n):r}function Sc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=ko(e);return n.children.forEach(o=>{Z2(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Nc(a,t.getContext(o),i)),i}function Z2(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=X2(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new _h(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Sc(n,e,a?a.children:null,r,i):Sc(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Fo(a.outlet.component,o))}else o&&Nc(e,a,i),i.canActivateChecks.push(new _h(r)),s.component?Sc(n,null,a?a.children:null,r,i):Sc(n,null,t,r,i);return i}function X2(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!ds(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ds(n.url,e.url)||!Bn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!sv(n,e)||!Bn(n.queryParams,e.queryParams);case"paramsChange":default:return!sv(n,e)}}function Nc(n,e,t){let r=ko(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Nc(o,e.children.getContext(s),t):Nc(o,null,t):Nc(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Fo(e.outlet.component,i)):t.canDeactivateChecks.push(new Fo(null,i)):t.canDeactivateChecks.push(new Fo(null,i))}function Hc(n){return typeof n=="function"}function ej(n){return typeof n=="boolean"}function tj(n){return n&&Hc(n.canLoad)}function nj(n){return n&&Hc(n.canActivate)}function rj(n){return n&&Hc(n.canActivateChild)}function ij(n){return n&&Hc(n.canDeactivate)}function sj(n){return n&&Hc(n.canMatch)}function nA(n){return n instanceof ar||n?.name==="EmptyError"}var ah=Symbol("INITIAL_VALUE");function jo(){return ot(n=>Bl(n.map(e=>e.pipe(Ft(1),Em(ah)))).pipe(Q(e=>{for(let t of e)if(t!==!0){if(t===ah)return ah;if(t===!1||oj(t))return t}return!0}),Gt(e=>e!==ah),Ft(1)))}function oj(n){return hs(n)||n instanceof Vc}function aj(n,e){return it(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?te(de(V({},t),{guardsResult:!0})):cj(o,r,i,n).pipe(it(a=>a&&ej(a)?uj(r,s,n,e):te(a)),Q(a=>de(V({},t),{guardsResult:a})))})}function cj(n,e,t,r){return Se(n).pipe(it(i=>pj(i.component,i.route,t,e,r)),Mn(i=>i!==!0,!0))}function uj(n,e,t,r){return Se(e).pipe(Kr(i=>ro(dj(i.route.parent,r),lj(i.route,r),fj(n,i.path,t),hj(n,i.route,t))),Mn(i=>i!==!0,!0))}function lj(n,e){return n!==null&&e&&e(new ev(n)),te(!0)}function dj(n,e){return n!==null&&e&&e(new Zy(n)),te(!0)}function hj(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return te(!0);let i=r.map(s=>$l(()=>{let o=$c(e)??t,a=Bo(s,o),c=nj(a)?a.canActivate(e,n):yn(o,()=>a(e,n));return Ii(c).pipe(Mn())}));return te(i).pipe(jo())}function fj(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>J2(o)).filter(o=>o!==null).map(o=>$l(()=>{let a=o.guards.map(c=>{let l=$c(o.node)??t,h=Bo(c,l),p=rj(h)?h.canActivateChild(r,n):yn(l,()=>h(r,n));return Ii(p).pipe(Mn())});return te(a).pipe(jo())}));return te(s).pipe(jo())}function pj(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return te(!0);let o=s.map(a=>{let c=$c(e)??i,l=Bo(a,c),h=ij(l)?l.canDeactivate(n,e,t,r):yn(c,()=>l(n,e,t,r));return Ii(h).pipe(Mn())});return te(o).pipe(jo())}function mj(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return te(!0);let s=i.map(o=>{let a=Bo(o,n),c=tj(a)?a.canLoad(e,t):yn(n,()=>a(e,t));return Ii(c)});return te(s).pipe(jo(),rA(r))}function rA(n){return Ys(Ye(e=>{if(typeof e!="boolean")throw vh(n,e)}),Q(e=>e===!0))}function gj(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return te(!0);let s=i.map(o=>{let a=Bo(o,n),c=sj(a)?a.canMatch(e,t):yn(n,()=>a(e,t));return Ii(c)});return te(s).pipe(jo(),rA(r))}var Uc=class{constructor(e){this.segmentGroup=e||null}},jc=class extends Error{constructor(e){super(),this.urlTree=e}};function xo(n){return no(new Uc(n))}function yj(n){return no(new K(4e3,!1))}function vj(n){return no(eA(!1,Jt.GuardRejected))}var cv=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return te(r);if(i.numberOfChildren>1||!i.children[le])return yj(`${e.redirectTo}`);i=i.children[le]}}applyRedirectCommands(e,t,r,i,s){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:h,url:p,outlet:y,params:v,data:C,title:M}=i,A=yn(s,()=>a({params:v,data:C,queryParams:c,fragment:l,routeConfig:h,url:p,outlet:y,title:M}));if(A instanceof br)throw new jc(A);t=A}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new jc(o);return o}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new br(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new De(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new K(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},uv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function _j(n,e,t,r,i){let s=iA(n,e,t);return s.matched?(r=$2(e,r),gj(r,e,t,i).pipe(Q(o=>o===!0?s:V({},uv)))):te(s)}function iA(n,e,t){if(e.path==="**")return Ij(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?V({},uv):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||g2)(t,n,e);if(!i)return V({},uv);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?V(V({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function Ij(n){return{matched:!0,parameters:n.length>0?FS(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function xS(n,e,t,r){return t.length>0&&bj(n,t,r)?{segmentGroup:new De(e,Ej(r,new De(t,n.children))),slicedSegments:[]}:t.length===0&&Tj(n,t,r)?{segmentGroup:new De(n.segments,wj(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new De(n.segments,n.children),slicedSegments:t}}function wj(n,e,t,r){let i={};for(let s of t)if(wh(n,e,s)&&!r[En(s)]){let o=new De([],{});i[En(s)]=o}return V(V({},r),i)}function Ej(n,e){let t={};t[le]=e;for(let r of n)if(r.path===""&&En(r)!==le){let i=new De([],{});t[En(r)]=i}return t}function bj(n,e,t){return t.some(r=>wh(n,e,r)&&En(r)!==le)}function Tj(n,e,t){return t.some(r=>wh(n,e,r))}function wh(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function Cj(n,e,t){return e.length===0&&!n.children[t]}var lv=class{};function Dj(n,e,t,r,i,s,o="emptyOnly"){return new dv(n,e,t,r,i,o,s).recognize()}var Sj=31,dv=class{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new cv(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new K(4002,`'${e.segmentGroup}'`)}recognize(){let e=xS(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Q(({children:t,rootSnapshot:r})=>{let i=new Yt(r,t),s=new yh("",i),o=O2(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new Lo([],Object.freeze({}),Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),le,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,le,t).pipe(Q(r=>({children:r,rootSnapshot:t})),Wr(r=>{if(r instanceof jc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Uc?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(Q(o=>o instanceof Yt?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return Se(s).pipe(Kr(o=>{let a=r.children[o],c=H2(t,o);return this.processSegmentGroup(e,c,a,o,i)}),wm((o,a)=>(o.push(...a),o)),Qr(null),Im(),it(o=>{if(o===null)return xo(r);let a=sA(o);return Aj(a),te(a)}))}processSegment(e,t,r,i,s,o,a){return Se(t).pipe(Kr(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a).pipe(Wr(l=>{if(l instanceof Uc)return te(null);throw l}))),Mn(c=>!!c),Wr(c=>{if(nA(c))return Cj(r,i,s)?te(new lv):xo(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,c){return En(r)!==o&&(o===le||!wh(i,s,r))?xo(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c):xo(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:y}=iA(t,i,s);if(!c)return xo(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Sj&&(this.allowRedirects=!1));let v=new Lo(s,l,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,kS(i),En(i),i.component??i._loadedComponent??null,i,OS(i)),C=gh(v,a,this.paramsInheritanceStrategy);v.params=Object.freeze(C.params),v.data=Object.freeze(C.data);let M=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,v,e);return this.applyRedirects.lineralizeSegments(i,M).pipe(it(A=>this.processSegment(e,r,t,A.concat(y),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a=_j(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(ot(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(ot(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:y,remainingSegments:v}=c,C=new Lo(y,p,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,kS(r),En(r),r.component??r._loadedComponent??null,r,OS(r)),M=gh(C,o,this.paramsInheritanceStrategy);C.params=Object.freeze(M.params),C.data=Object.freeze(M.data);let{segmentGroup:A,slicedSegments:F}=xS(t,y,v,l);if(F.length===0&&A.hasChildren())return this.processChildren(h,l,A,C).pipe(Q(U=>new Yt(C,U)));if(l.length===0&&F.length===0)return te(new Yt(C,[]));let H=En(r)===s;return this.processSegment(h,l,A,F,H?le:s,!0,C).pipe(Q(U=>new Yt(C,U instanceof Yt?[U]:[])))}))):xo(t)))}getChildConfig(e,t,r){return t.children?te({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?te({routes:t._loadedRoutes,injector:t._loadedInjector}):mj(e,t,r,this.urlSerializer).pipe(it(i=>i?this.configLoader.loadChildren(e,t).pipe(Ye(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):vj(t))):te({routes:[],injector:e})}};function Aj(n){n.sort((e,t)=>e.value.outlet===le?-1:t.value.outlet===le?1:e.value.outlet.localeCompare(t.value.outlet))}function Rj(n){let e=n.value.routeConfig;return e&&e.path===""}function sA(n){let e=[],t=new Set;for(let r of n){if(!Rj(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=sA(r.children);e.push(new Yt(r.value,i))}return e.filter(r=>!t.has(r))}function kS(n){return n.data||{}}function OS(n){return n.resolve||{}}function Mj(n,e,t,r,i,s){return it(o=>Dj(n,e,t,r,o.extractedUrl,i,s).pipe(Q(({state:a,tree:c})=>de(V({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function Nj(n,e){return it(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return te(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of oA(c))o.add(l);let a=0;return Se(o).pipe(Kr(c=>s.has(c)?Pj(c,r,n,e):(c.data=gh(c,c.parent,n).resolve,te(void 0))),Ye(()=>a++),io(1),it(c=>a===o.size?te(t):qt))})}function oA(n){let e=n.children.map(t=>oA(t)).flat();return[n,...e]}function Pj(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!ZS(i)&&(s[Bc]=i.title),xj(s,n,e,r).pipe(Q(o=>(n._resolvedData=o,n.data=gh(n,n.parent,t).resolve,null)))}function xj(n,e,t,r){let i=By(n);if(i.length===0)return te({});let s={};return Se(i).pipe(it(o=>kj(n[o],e,t,r).pipe(Mn(),Ye(a=>{if(a instanceof Vc)throw vh(new Pc,a);s[o]=a}))),io(1),_m(s),Wr(o=>nA(o)?qt:no(o)))}function kj(n,e,t,r){let i=$c(e)??r,s=Bo(n,i),o=s.resolve?s.resolve(e,t):yn(i,()=>s(e,t));return Ii(o)}function Uy(n){return ot(e=>{let t=n(e);return t?Se(t).pipe(Q(()=>e)):te(e)})}var aA=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===le);return r}getResolvedTitleForRoute(t){return t.data[Bc]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>O(Oj),providedIn:"root"})}}return n})(),Oj=(()=>{class n extends aA{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(X(SS))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),yv=new z("",{providedIn:"root",factory:()=>({})}),Lj=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=sn({type:n,selectors:[["ng-component"]],standalone:!0,features:[an],decls:1,vars:0,template:function(r,i){r&1&&It(0,"router-outlet")},dependencies:[mv],encapsulation:2})}}return n})();function vv(n){let e=n.children&&n.children.map(vv),t=e?de(V({},n),{children:e}):V({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==le&&(t.component=Lj),t}var _v=new z(""),Fj=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=O(fy)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return te(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Ii(t.loadComponent()).pipe(Q(cA),Ye(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Ki(()=>{this.componentLoaders.delete(t)})),i=new Zs(r,()=>new st).pipe(Js());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return te({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=Vj(r,this.compiler,t,this.onLoadEndListener).pipe(Ki(()=>{this.childrenLoaders.delete(r)})),o=new Zs(s,()=>new st).pipe(Js());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Vj(n,e,t,r){return Ii(n.loadChildren()).pipe(Q(cA),it(i=>i instanceof cc||Array.isArray(i)?te(i):Se(e.compileModuleAsync(i))),Q(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(t).injector,o=s.get(_v,[],{optional:!0,self:!0}).flat()),{routes:o.map(vv),injector:s}}))}function Uj(n){return n&&typeof n=="object"&&"default"in n}function cA(n){return Uj(n)?n.default:n}var Iv=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>O(jj),providedIn:"root"})}}return n})(),jj=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Bj=new z("");var $j=new z(""),Hj=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new st,this.transitionAbortSubject=new st,this.configLoader=O(Fj),this.environmentInjector=O(Ut),this.urlSerializer=O(fv),this.rootContexts=O(Ih),this.location=O(vc),this.inputBindingEnabled=O(gv,{optional:!0})!==null,this.titleStrategy=O(aA),this.options=O(yv,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=O(Iv),this.createViewTransition=O(Bj,{optional:!0}),this.navigationErrorHandler=O($j,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>te(void 0),this.rootComponentType=null;let t=i=>this.events.next(new Yy(i)),r=i=>this.events.next(new Jy(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(de(V(V({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new ut({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Mc,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Gt(s=>s.id!==0),Q(s=>de(V({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),ot(s=>{let o=!1,a=!1;return te(s).pipe(ot(c=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Jt.SupersededByNewNavigation),qt;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?de(V({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new fs(c.id,this.urlSerializer.serialize(c.rawUrl),p,qy.IgnoredSameUrlNavigation)),c.resolve(!1),qt}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return te(c).pipe(ot(p=>{let y=this.transitions?.getValue();return this.events.next(new kc(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),y!==this.transitions?.getValue()?qt:Promise.resolve(p)}),Mj(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Ye(p=>{s.targetSnapshot=p.targetSnapshot,s.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=de(V({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let y=new fh(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(y)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:p,extractedUrl:y,source:v,restoredState:C,extras:M}=c,A=new kc(p,this.urlSerializer.serialize(y),v,C);this.events.next(A);let F=YS(this.rootComponentType).snapshot;return this.currentTransition=s=de(V({},c),{targetSnapshot:F,urlAfterRedirects:y,extras:de(V({},M),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=y,te(s)}else{let p="";return this.events.next(new fs(c.id,this.urlSerializer.serialize(c.extractedUrl),p,qy.IgnoredByUrlHandlingStrategy)),c.resolve(!1),qt}}),Ye(c=>{let l=new Gy(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),Q(c=>(this.currentTransition=s=de(V({},c),{guards:Y2(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),aj(this.environmentInjector,c=>this.events.next(c)),Ye(c=>{if(s.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw vh(this.urlSerializer,c.guardsResult);let l=new Wy(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),Gt(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Jt.GuardRejected),!1)),Uy(c=>{if(c.guards.canActivateChecks.length)return te(c).pipe(Ye(l=>{let h=new Ky(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),ot(l=>{let h=!1;return te(l).pipe(Nj(this.paramsInheritanceStrategy,this.environmentInjector),Ye({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",Jt.NoDataFromResolver)}}))}),Ye(l=>{let h=new Qy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),Uy(c=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(Ye(y=>{h.component=y}),Q(()=>{})));for(let y of h.children)p.push(...l(y));return p};return Bl(l(c.targetSnapshot.root)).pipe(Qr(null),Ft(1))}),Uy(()=>this.afterPreactivation()),ot(()=>{let{currentSnapshot:c,targetSnapshot:l}=s,h=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return h?Se(h).pipe(Q(()=>s)):te(s)}),Q(c=>{let l=q2(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=de(V({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),Ye(()=>{this.events.next(new Lc)}),Q2(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Ft(1),Ye({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new _i(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),bm(this.transitionAbortSubject.pipe(Ye(c=>{throw c}))),Ki(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",Jt.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Wr(c=>{if(a=!0,tA(c))this.events.next(new Er(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),K2(c)?this.events.next(new Uo(c.url,c.navigationBehaviorOptions)):s.resolve(!1);else{let l=new Oc(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0);try{let h=yn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof Vc){let{message:p,cancellationCode:y}=vh(this.urlSerializer,h);this.events.next(new Er(s.id,this.urlSerializer.serialize(s.extractedUrl),p,y)),this.events.next(new Uo(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=t.errorHandler(c);s.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(h)}}return qt}))}))}cancelNavigationTransition(t,r,i){let s=new Er(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function zj(n){return n!==Mc}var qj=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>O(Gj),providedIn:"root"})}}return n})(),hv=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},Gj=(()=>{class n extends hv{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=si(n)))(i||n)}})()}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),uA=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>O(Wj),providedIn:"root"})}}return n})(),Wj=(()=>{class n extends uA{constructor(){super(...arguments),this.location=O(vc),this.urlSerializer=O(fv),this.options=O(yv,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=O(Iv),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new br,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=YS(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof kc)this.stateMemento=this.createStateMemento();else if(t instanceof fs)this.rawUrlTree=r.initialUrl;else if(t instanceof fh){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Lc?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Er&&(t.code===Jt.GuardRejected||t.code===Jt.NoDataFromResolver)?this.restoreHistory(r):t instanceof Oc?this.restoreHistory(r,!0):t instanceof _i&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof br?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=V(V({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=V(V({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=si(n)))(i||n)}})()}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ac=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Ac||{});function Kj(n,e){n.events.pipe(Gt(t=>t instanceof _i||t instanceof Er||t instanceof Oc||t instanceof fs),Q(t=>t instanceof _i||t instanceof fs?Ac.COMPLETE:(t instanceof Er?t.code===Jt.Redirect||t.code===Jt.SupersededByNewNavigation:!1)?Ac.REDIRECTING:Ac.FAILED),Gt(t=>t!==Ac.REDIRECTING),Ft(1)).subscribe(()=>{e()})}function Qj(n){throw n}var Yj={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Jj={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Cr=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=O(Qd),this.stateManager=O(uA),this.options=O(yv,{optional:!0})||{},this.pendingTasks=O(oi),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=O(Hj),this.urlSerializer=O(fv),this.location=O(vc),this.urlHandlingStrategy=O(Iv),this._events=new st,this.errorHandler=this.options.errorHandler||Qj,this.navigated=!1,this.routeReuseStrategy=O(qj),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=O(_v,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!O(gv,{optional:!0}),this.eventsSubscription=new Be,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Er&&r.code!==Jt.Redirect&&r.code!==Jt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof _i)this.navigated=!0;else if(r instanceof Uo){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=V({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||zj(i.source)},o);this.scheduleNavigation(a,Mc,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}Xj(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Mc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=V({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(vv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:o,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=V(V({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let y=i?i.snapshot:this.routerState.snapshot.root;p=GS(y)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return WS(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=hs(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Mc,null,r)}navigate(t,r={skipLocationChange:!1}){return Zj(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=V({},Yj):r===!1?i=V({},Jj):i=r,hs(t))return RS(this.currentUrlTree,t,i);let s=this.parseUrl(t);return RS(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((p,y)=>{a=p,c=y});let h=this.pendingTasks.add();return Kj(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Zj(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new K(4008,!1)}function Xj(n){return!(n instanceof Lc)&&!(n instanceof Uo)}var Eh=(()=>{class n{constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.onChanges=new st,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof _i&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(hs(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,s,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:tD(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,s=this.el.nativeElement;r!==null?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return this.routerLinkInput===null?null:hs(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(Z(Cr),Z(Tr),qg("tabindex"),Z(jn),Z(_n),Z(pi))}}static{this.\u0275dir=$e({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&Pe("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),r&2&&mc("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",fi],skipLocationChange:[2,"skipLocationChange","skipLocationChange",fi],replaceUrl:[2,"replaceUrl","replaceUrl",fi],routerLink:"routerLink"},standalone:!0,features:[ly,ri]})}}return n})();var eB=new z("");function lA(n,...e){return jt([{provide:_v,multi:!0,useValue:n},[],{provide:Tr,useFactory:tB,deps:[Cr]},{provide:Yd,multi:!0,useFactory:rB},e.map(t=>t.\u0275providers)])}function tB(n){return n.routerState.root}function nB(n,e){return{\u0275kind:n,\u0275providers:e}}function rB(){let n=O(yt);return e=>{let t=n.get(di);if(e!==t.components[0])return;let r=n.get(Cr),i=n.get(iB);n.get(sB)===1&&r.initialNavigation(),n.get(oB,null,fe.Optional)?.setUpPreloading(),n.get(eB,null,fe.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var iB=new z("",{factory:()=>new st}),sB=new z("",{providedIn:"root",factory:()=>1});var oB=new z("");function dA(){return nB(6,[{provide:pi,useClass:sS}])}var fA=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},aB=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},pA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,y=(a&15)<<2|l>>6,v=l&63;c||(v=64,o||(y=64)),r.push(t[h],t[p],t[y],t[v])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(fA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):aB(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||l==null||p==null)throw new Ev;let y=s<<2|a>>4;if(r.push(y),l!==64){let v=a<<4&240|l>>2;if(r.push(v),p!==64){let C=l<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Ev=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},cB=function(n){let e=fA(n);return pA.encodeByteArray(e,!0)},zc=function(n){return cB(n).replace(/\./g,"")},Tv=function(n){try{return pA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function uB(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var lB=()=>uB().__FIREBASE_DEFAULTS__,dB=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},hB=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Tv(n[1]);return e&&JSON.parse(e)},Ch=()=>{try{return lB()||dB()||hB()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Cv=n=>{var e,t;return(t=(e=Ch())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Dv=n=>{let e=Cv(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Sv=()=>{var n;return(n=Ch())===null||n===void 0?void 0:n.config},Av=n=>{var e;return(e=Ch())===null||e===void 0?void 0:e[`_${n}`]};var Th=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Rv(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[zc(JSON.stringify(t)),zc(JSON.stringify(o)),""].join(".")}function at(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(at())}function fB(){var n;let e=(n=Ch())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yA(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function vA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _A(){let n=at();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function IA(){return!fB()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Mv(){try{return typeof indexedDB=="object"}catch{return!1}}function wA(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var pB="FirebaseError",Ot=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=pB,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Dr.prototype.create)}},Dr=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?mB(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Ot(i,a,r)}};function mB(n,e){return n.replace(gB,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var gB=/\{\$([^}]+)}/g;function EA(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function wi(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(hA(s)&&hA(o)){if(!wi(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function hA(n){return n!==null&&typeof n=="object"}function $o(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ho(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function zo(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function bA(n,e){let t=new bv(n,e);return t.subscribe.bind(t)}var bv=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");yB(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=wv),i.error===void 0&&(i.error=wv),i.complete===void 0&&(i.complete=wv);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function yB(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function wv(){}var cZ=4*60*60*1e3;function Fe(n){return n&&n._delegate?n._delegate:n}var Bt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ps="[DEFAULT]";var Nv=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Th;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_B(e))try{this.getOrInitializeService({instanceIdentifier:ps})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ps){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return g(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=ps){return this.instances.has(e)}getOptions(e=ps){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:vB(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ps){return this.component?this.component.multipleInstances?e:ps:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function vB(n){return n===ps?void 0:n}function _B(n){return n.instantiationMode==="EAGER"}var Dh=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Nv(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var IB=[],pe=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(pe||{}),wB={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},EB=pe.INFO,bB={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},TB=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=bB[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},un=class{constructor(e){this.name=e,this._logLevel=EB,this._logHandler=TB,this._userLogHandler=null,IB.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?wB[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}};var CB=(n,e)=>e.some(t=>n instanceof t),TA,CA;function DB(){return TA||(TA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function SB(){return CA||(CA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var DA=new WeakMap,xv=new WeakMap,SA=new WeakMap,Pv=new WeakMap,Ov=new WeakMap;function AB(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t($n(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&DA.set(t,n)}).catch(()=>{}),Ov.set(e,n),e}function RB(n){if(xv.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});xv.set(n,e)}var kv={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return xv.get(n);if(e==="objectStoreNames")return n.objectStoreNames||SA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return $n(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function AA(n){kv=n(kv)}function MB(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Sh(this),e,...t);return SA.set(r,e.sort?e.sort():[e]),$n(r)}:SB().includes(n)?function(...e){return n.apply(Sh(this),e),$n(DA.get(this))}:function(...e){return $n(n.apply(Sh(this),e))}}function NB(n){return typeof n=="function"?MB(n):(n instanceof IDBTransaction&&RB(n),CB(n,DB())?new Proxy(n,kv):n)}function $n(n){if(n instanceof IDBRequest)return AB(n);if(Pv.has(n))return Pv.get(n);let e=NB(n);return e!==n&&(Pv.set(n,e),Ov.set(e,n)),e}var Sh=n=>Ov.get(n);function Ah(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=$n(o);return r&&o.addEventListener("upgradeneeded",c=>{r($n(o.result),c.oldVersion,c.newVersion,$n(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var PB=["get","getKey","getAll","getAllKeys","count"],xB=["put","add","delete","clear"],Lv=new Map;function RA(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Lv.get(e))return Lv.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=xB.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||PB.includes(t)))return;let s=function(o,...a){return g(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&c.done]))[0]})};return Lv.set(e,s),s}AA(n=>de(V({},n),{get:(e,t,r)=>RA(e,t)||n.get(e,t,r),has:(e,t)=>!!RA(e,t)||n.has(e,t)}));var Vv=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(LB(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function LB(n){let e=n.getComponent();return e?.type==="VERSION"}var Uv="@firebase/app",MA="0.10.13";var Sr=new un("@firebase/app"),FB="@firebase/app-compat",VB="@firebase/analytics-compat",UB="@firebase/analytics",jB="@firebase/app-check-compat",BB="@firebase/app-check",$B="@firebase/auth",HB="@firebase/auth-compat",zB="@firebase/database",qB="@firebase/data-connect",GB="@firebase/database-compat",WB="@firebase/functions",KB="@firebase/functions-compat",QB="@firebase/installations",YB="@firebase/installations-compat",JB="@firebase/messaging",ZB="@firebase/messaging-compat",XB="@firebase/performance",e$="@firebase/performance-compat",t$="@firebase/remote-config",n$="@firebase/remote-config-compat",r$="@firebase/storage",i$="@firebase/storage-compat",s$="@firebase/firestore",o$="@firebase/vertexai-preview",a$="@firebase/firestore-compat",c$="firebase",u$="10.14.1";var jv="[DEFAULT]",l$={[Uv]:"fire-core",[FB]:"fire-core-compat",[UB]:"fire-analytics",[VB]:"fire-analytics-compat",[BB]:"fire-app-check",[jB]:"fire-app-check-compat",[$B]:"fire-auth",[HB]:"fire-auth-compat",[zB]:"fire-rtdb",[qB]:"fire-data-connect",[GB]:"fire-rtdb-compat",[WB]:"fire-fn",[KB]:"fire-fn-compat",[QB]:"fire-iid",[YB]:"fire-iid-compat",[JB]:"fire-fcm",[ZB]:"fire-fcm-compat",[XB]:"fire-perf",[e$]:"fire-perf-compat",[t$]:"fire-rc",[n$]:"fire-rc-compat",[r$]:"fire-gcs",[i$]:"fire-gcs-compat",[s$]:"fire-fst",[a$]:"fire-fst-compat",[o$]:"fire-vertex","fire-js":"fire-js",[c$]:"fire-js-all"};var qc=new Map,d$=new Map,Bv=new Map;function NA(n,e){try{n.container.addComponent(e)}catch(t){Sr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Hn(n){let e=n.name;if(Bv.has(e))return Sr.debug(`There were multiple attempts to register component ${e}.`),!1;Bv.set(e,n);for(let t of qc.values())NA(t,n);for(let t of d$.values())NA(t,n);return!0}function ms(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function bn(n){return n.settings!==void 0}var h$={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ei=new Dr("app","Firebase",h$);var $v=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Bt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ei.create("app-deleted",{appName:this._name})}};var zn=u$;function qv(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:jv,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ei.create("bad-app-name",{appName:String(i)});if(t||(t=Sv()),!t)throw Ei.create("no-options");let s=qc.get(i);if(s){if(wi(t,s.options)&&wi(r,s.config))return s;throw Ei.create("duplicate-app",{appName:i})}let o=new Dh(i);for(let c of Bv.values())o.addComponent(c);let a=new $v(t,r,o);return qc.set(i,a),a}function bi(n=jv){let e=qc.get(n);if(!e&&n===jv&&Sv())return qv();if(!e)throw Ei.create("no-app",{appName:n});return e}function Rh(){return Array.from(qc.values())}function Le(n,e,t){var r;let i=(r=l$[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Sr.warn(a.join(" "));return}Hn(new Bt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var f$="firebase-heartbeat-database",p$=1,Gc="firebase-heartbeat-store",Fv=null;function OA(){return Fv||(Fv=Ah(f$,p$,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Gc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ei.create("idb-open",{originalErrorMessage:n.message})})),Fv}function m$(n){return g(this,null,function*(){try{let t=(yield OA()).transaction(Gc),r=yield t.objectStore(Gc).get(LA(n));return yield t.done,r}catch(e){if(e instanceof Ot)Sr.warn(e.message);else{let t=Ei.create("idb-get",{originalErrorMessage:e?.message});Sr.warn(t.message)}}})}function PA(n,e){return g(this,null,function*(){try{let r=(yield OA()).transaction(Gc,"readwrite");yield r.objectStore(Gc).put(e,LA(n)),yield r.done}catch(t){if(t instanceof Ot)Sr.warn(t.message);else{let r=Ei.create("idb-set",{originalErrorMessage:t?.message});Sr.warn(r.message)}}})}function LA(n){return`${n.name}!${n.options.appId}`}var g$=1024,y$=30*24*60*60*1e3,Hv=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new zv(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return g(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=xA();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=y$}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Sr.warn(r)}})}getHeartbeatsHeader(){return g(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=xA(),{heartbeatsToSend:r,unsentEntries:i}=v$(this._heartbeatsCache.heartbeats),s=zc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Sr.warn(t),""}})}};function xA(){return new Date().toISOString().substring(0,10)}function v$(n,e=g$){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),kA(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),kA(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var zv=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return g(this,null,function*(){return Mv()?wA().then(()=>!0).catch(()=>!1):!1})}read(){return g(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield m$(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return g(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return PA(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return g(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return PA(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function kA(n){return zc(JSON.stringify({version:2,heartbeats:n})).length}function _$(n){Hn(new Bt("platform-logger",e=>new Vv(e),"PRIVATE")),Hn(new Bt("heartbeat",e=>new Hv(e),"PRIVATE")),Le(Uv,MA,n),Le(Uv,MA,"esm2017"),Le("fire-js","")}_$("");var I$="firebase",w$="10.14.1";Le(I$,w$,"app");var Ar=new dr("ANGULARFIRE2_VERSION");function Go(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var ys=(n,e)=>{let t=e?[e]:Rh(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Ti=class{constructor(){return ys(E$)}},E$="app-check";function qo(){}var Mh=class{zone;delegate;constructor(e,t=mm){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,r)}},Gv=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",qo,{},qo,qo)),t.pipe(Ye({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Ci=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Mh(Zone.current)),this.insideAngular=t.run(()=>new Mh(Zone.current,pm)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(X(be))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Nh(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function b$(n){return Nh().ngZone.runOutsideAngular(()=>n())}function gs(n){return Nh().ngZone.run(()=>n())}function T$(n){return C$(Nh())(n)}function C$(n){return function(t){return t=t.lift(new Gv(n.ngZone)),t.pipe(Gr(n.outsideAngular),qr(n.insideAngular))}}var D$=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),gs(()=>n.apply(void 0,r))},xe=(n,e)=>function(){let t,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(t||=gs(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",qo,{},qo,qo))),r[s]=D$(r[s],t));let i=b$(()=>n.apply(this,r));if(!e)if(i instanceof ce){let s=Nh();return i.pipe(Gr(s.outsideAngular),qr(s.insideAngular))}else return gs(()=>i);return i instanceof ce?i.pipe(T$):i instanceof Promise?gs(()=>new Promise((s,o)=>i.then(a=>gs(()=>s(a)),a=>gs(()=>o(a))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:gs(()=>i)};var Tn=class{constructor(e){return e}},Rr=class{constructor(){return Rh()}};function S$(n){return n&&n.length===1?n[0]:new Tn(bi())}var Wv=new z("angularfire2._apps"),A$={provide:Tn,useFactory:S$,deps:[[new Xe,Wv]]},R$={provide:Rr,deps:[[new Xe,Wv]]};function M$(n){return(e,t)=>{let r=t.get(Fn);Le("angularfire",Ar.full,"core"),Le("angularfire",Ar.full,"app"),Le("angular",BD.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Tn(i)}}function FA(n,...e){return jt([A$,R$,{provide:Wv,useFactory:M$(n),multi:!0,deps:[be,yt,Ci,...e]}])}var VA=xe(bi,!0);var UA=xe(qv,!0);var jA=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},N$=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},BA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,y=(a&15)<<2|l>>6,v=l&63;c||(v=64,o||(y=64)),r.push(t[h],t[p],t[y],t[v])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(jA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):N$(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||l==null||p==null)throw new Qv;let y=s<<2|a>>4;if(r.push(y),l!==64){let v=a<<4&240|l>>2;if(r.push(v),p!==64){let C=l<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Qv=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},P$=function(n){let e=jA(n);return BA.encodeByteArray(e,!0)},Jv=function(n){return P$(n).replace(/\./g,"")},Zv=function(n){try{return BA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function x$(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var k$=()=>x$().__FIREBASE_DEFAULTS__,O$=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},L$=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Zv(n[1]);return e&&JSON.parse(e)},F$=()=>{try{return k$()||O$()||L$()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}};var $A=n=>{var e;return(e=F$())===null||e===void 0?void 0:e[`_${n}`]};function Cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function HA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Cn())}function zA(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function qA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function GA(){try{return typeof indexedDB=="object"}catch{return!1}}function WA(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var V$="FirebaseError",qn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=V$,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mr.prototype.create)}},Mr=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?U$(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new qn(i,a,r)}};function U$(n,e){return n.replace(j$,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var j$=/\{\$([^}]+)}/g;function Xv(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function KA(n,e){let t=new Yv(n,e);return t.subscribe.bind(t)}var Yv=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");B$(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Kv),i.error===void 0&&(i.error=Kv),i.complete===void 0&&(i.complete=Kv);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function B$(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Kv(){}var KZ=4*60*60*1e3;function vs(n){return n&&n._delegate?n._delegate:n}var Nr=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var t_=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(H$(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function H$(n){let e=n.getComponent();return e?.type==="VERSION"}var n_="@firebase/app",QA="0.10.3";var _s=new un("@firebase/app"),z$="@firebase/app-compat",q$="@firebase/analytics-compat",G$="@firebase/analytics",W$="@firebase/app-check-compat",K$="@firebase/app-check",Q$="@firebase/auth",Y$="@firebase/auth-compat",J$="@firebase/database",Z$="@firebase/database-compat",X$="@firebase/functions",eH="@firebase/functions-compat",tH="@firebase/installations",nH="@firebase/installations-compat",rH="@firebase/messaging",iH="@firebase/messaging-compat",sH="@firebase/performance",oH="@firebase/performance-compat",aH="@firebase/remote-config",cH="@firebase/remote-config-compat",uH="@firebase/storage",lH="@firebase/storage-compat",dH="@firebase/firestore",hH="@firebase/vertexai-preview",fH="@firebase/firestore-compat",pH="firebase",mH="10.12.0";var gH={[n_]:"fire-core",[z$]:"fire-core-compat",[G$]:"fire-analytics",[q$]:"fire-analytics-compat",[K$]:"fire-app-check",[W$]:"fire-app-check-compat",[Q$]:"fire-auth",[Y$]:"fire-auth-compat",[J$]:"fire-rtdb",[Z$]:"fire-rtdb-compat",[X$]:"fire-fn",[eH]:"fire-fn-compat",[tH]:"fire-iid",[nH]:"fire-iid-compat",[rH]:"fire-fcm",[iH]:"fire-fcm-compat",[sH]:"fire-perf",[oH]:"fire-perf-compat",[aH]:"fire-rc",[cH]:"fire-rc-compat",[uH]:"fire-gcs",[lH]:"fire-gcs-compat",[dH]:"fire-fst",[fH]:"fire-fst-compat",[hH]:"fire-vertex","fire-js":"fire-js",[pH]:"fire-js-all"};var yH=new Map,vH=new Map,YA=new Map;function JA(n,e){try{n.container.addComponent(e)}catch(t){_s.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ko(n){let e=n.name;if(YA.has(e))return _s.debug(`There were multiple attempts to register component ${e}.`),!1;YA.set(e,n);for(let t of yH.values())JA(t,n);for(let t of vH.values())JA(t,n);return!0}function Qo(n){return n.settings!==void 0}var _H={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},s_=new Mr("app","Firebase",_H);var Ph=mH;function Wo(n,e,t){var r;let i=(r=gH[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_s.warn(a.join(" "));return}Ko(new Nr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var IH="firebase-heartbeat-database",wH=1,Wc="firebase-heartbeat-store",e_=null;function tR(){return e_||(e_=Ah(IH,wH,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Wc)}catch(t){console.warn(t)}}}}).catch(n=>{throw s_.create("idb-open",{originalErrorMessage:n.message})})),e_}function EH(n){return g(this,null,function*(){try{let t=(yield tR()).transaction(Wc),r=yield t.objectStore(Wc).get(nR(n));return yield t.done,r}catch(e){if(e instanceof qn)_s.warn(e.message);else{let t=s_.create("idb-get",{originalErrorMessage:e?.message});_s.warn(t.message)}}})}function ZA(n,e){return g(this,null,function*(){try{let r=(yield tR()).transaction(Wc,"readwrite");yield r.objectStore(Wc).put(e,nR(n)),yield r.done}catch(t){if(t instanceof qn)_s.warn(t.message);else{let r=s_.create("idb-set",{originalErrorMessage:t?.message});_s.warn(r.message)}}})}function nR(n){return`${n.name}!${n.options.appId}`}var bH=1024,TH=30*24*60*60*1e3,r_=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new i_(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return g(this,null,function*(){var e,t;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=XA();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=TH}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return g(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=XA(),{heartbeatsToSend:r,unsentEntries:i}=CH(this._heartbeatsCache.heartbeats),s=Jv(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function XA(){return new Date().toISOString().substring(0,10)}function CH(n,e=bH){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),eR(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),eR(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var i_=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return g(this,null,function*(){return GA()?WA().then(()=>!0).catch(()=>!1):!1})}read(){return g(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield EH(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return g(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return ZA(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return g(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return ZA(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function eR(n){return Jv(JSON.stringify({version:2,heartbeats:n})).length}function DH(n){Ko(new Nr("platform-logger",e=>new t_(e),"PRIVATE")),Ko(new Nr("heartbeat",e=>new r_(e),"PRIVATE")),Wo(n_,QA,n),Wo(n_,QA,"esm2017"),Wo("fire-js","")}DH("");function lR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var dR=lR,hR=new Mr("auth","Firebase",lR());var Lh=new un("@firebase/auth");function SH(n,...e){Lh.logLevel<=pe.WARN&&Lh.warn(`Auth (${Ph}): ${n}`,...e)}function kh(n,...e){Lh.logLevel<=pe.ERROR&&Lh.error(`Auth (${Ph}): ${n}`,...e)}function rR(n,...e){throw y_(n,...e)}function g_(n,...e){return y_(n,...e)}function fR(n,e,t){let r=Object.assign(Object.assign({},dR()),{[e]:t});return new Mr("auth","Firebase",r).create(e,{appName:n.name})}function Oh(n){return fR(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function y_(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return hR.create(n,...e)}function Ce(n,e,...t){if(!n)throw y_(e,...t)}function Kc(n){let e="INTERNAL ASSERTION FAILED: "+n;throw kh(e),new Error(e)}function Fh(n,e){n||Kc(e)}function AH(){return iR()==="http:"||iR()==="https:"}function iR(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function RH(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(AH()||zA()||"connection"in navigator)?navigator.onLine:!0}function MH(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var ws=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Fh(t>e,"Short delay should be less than long delay!"),this.isMobile=HA()||qA()}get(){return RH()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function NH(n,e){Fh(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Vh=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Kc("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Kc("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Kc("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var PH={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var xH=new ws(3e4,6e4);function pR(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function $h(s,o,a,c){return g(this,arguments,function*(n,e,t,r,i={}){return mR(n,i,()=>g(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Xv(Object.assign({key:n.config.apiKey},h)).slice(1),y=yield n._getAdditionalHeaders();return y["Content-Type"]="application/json",n.languageCode&&(y["X-Firebase-Locale"]=n.languageCode),Vh.fetch()(gR(n,n.config.apiHost,t,p),Object.assign({method:e,headers:y,referrerPolicy:"no-referrer"},l))}))})}function mR(n,e,t){return g(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},PH),e);try{let i=new c_(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw xh(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw xh(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw xh(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw xh(n,"user-disabled",o);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw fR(n,h,l);rR(n,h)}}catch(i){if(i instanceof qn)throw i;rR(n,"network-request-failed",{message:String(i)})}})}function gR(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?NH(n.config,i):`${n.config.apiScheme}://${i}`}var c_=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(g_(this.auth,"network-request-failed")),xH.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function xh(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=g_(n,e,r);return i.customData._tokenResponse=t,i}function kH(n,e){return g(this,null,function*(){return $h(n,"POST","/v1/accounts:delete",e)})}function yR(n,e){return g(this,null,function*(){return $h(n,"POST","/v1/accounts:lookup",e)})}function Qc(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function vR(n,e=!1){return g(this,null,function*(){let t=vs(n),r=yield t.getIdToken(e),i=_R(r);Ce(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Qc(o_(i.auth_time)),issuedAtTime:Qc(o_(i.iat)),expirationTime:Qc(o_(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function o_(n){return Number(n)*1e3}function _R(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return kh("JWT malformed, contained fewer than 3 sections"),null;try{let i=Zv(t);return i?JSON.parse(i):(kh("Failed to decode base64 JWT payload"),null)}catch(i){return kh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function sR(n){let e=_R(n);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function u_(n,e,t=!1){return g(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof qn&&OH(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function OH({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var l_=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>g(this,null,function*(){yield this.iteration()}),t)}iteration(){return g(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Jc=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qc(this.lastLoginAt),this.creationTime=Qc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Uh(n){return g(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield u_(n,yR(t,{idToken:r}));Ce(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?wR(s.providerUserInfo):[],a=LH(n.providerData,o),c=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!a?.length,h=c?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Jc(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,p)})}function IR(n){return g(this,null,function*(){let e=vs(n);yield Uh(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function LH(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function wR(n){return n.map(e=>{var{providerId:t}=e,r=Wi(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function FH(n,e){return g(this,null,function*(){let t=yield mR(n,{},()=>g(this,null,function*(){let r=Xv({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=gR(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Vh.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function VH(n,e){return g(this,null,function*(){return $h(n,"POST","/v2/accounts:revokeToken",pR(n,e))})}var Yc=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):sR(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");let t=sR(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return g(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return g(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield FH(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(Ce(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Ce(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Ce(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Kc("not implemented")}};function Di(n,e){Ce(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Zc=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Wi(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new l_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Jc(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return g(this,null,function*(){let t=yield u_(this,this.stsTokenManager.getToken(this.auth,e));return Ce(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return vR(this,e)}reload(){return IR(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return g(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Uh(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return g(this,null,function*(){if(Qo(this.auth.app))return Promise.reject(Oh(this.auth));let e=yield this.getIdToken();return yield u_(this,kH(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,y=(i=t.email)!==null&&i!==void 0?i:void 0,v=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,C=(o=t.photoURL)!==null&&o!==void 0?o:void 0,M=(a=t.tenantId)!==null&&a!==void 0?a:void 0,A=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,F=(l=t.createdAt)!==null&&l!==void 0?l:void 0,H=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:U,emailVerified:W,isAnonymous:me,providerData:Y,stsTokenManager:E}=t;Ce(U&&E,e,"internal-error");let _=Yc.fromJSON(this.name,E);Ce(typeof U=="string",e,"internal-error"),Di(p,e.name),Di(y,e.name),Ce(typeof W=="boolean",e,"internal-error"),Ce(typeof me=="boolean",e,"internal-error"),Di(v,e.name),Di(C,e.name),Di(M,e.name),Di(A,e.name),Di(F,e.name),Di(H,e.name);let I=new n({uid:U,auth:e,email:y,emailVerified:W,displayName:p,isAnonymous:me,photoURL:C,phoneNumber:v,tenantId:M,stsTokenManager:_,createdAt:F,lastLoginAt:H});return Y&&Array.isArray(Y)&&(I.providerData=Y.map(b=>Object.assign({},b))),A&&(I._redirectEventId=A),I}static _fromIdTokenResponse(e,t,r=!1){return g(this,null,function*(){let i=new Yc;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Uh(s),s})}static _fromGetAccountInfoResponse(e,t,r){return g(this,null,function*(){let i=t.users[0];Ce(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?wR(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Yc;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Jc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var oR=new Map;function Is(n){Fh(n instanceof Function,"Expected a class definition");let e=oR.get(n);return e?(Fh(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,oR.set(n,e),e)}var UH=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return g(this,null,function*(){return!0})}_set(t,r){return g(this,null,function*(){this.storage[t]=r})}_get(t){return g(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return g(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),d_=UH;function a_(n,e,t){return`firebase:${n}:${e}:${t}`}var jh=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=a_(this.userKey,i.apiKey,s),this.fullPersistenceKey=a_("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return g(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Zc._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return g(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return g(this,null,function*(){if(!t.length)return new n(Is(d_),e,r);let i=(yield Promise.all(t.map(l=>g(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||Is(d_),o=a_(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=yield l._get(o);if(h){let p=Zc._fromJSON(e,h);l!==s&&(a=p),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(l=>g(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new n(s,e,r))})}};function aR(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(HH(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(jH(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(qH(e))return"Blackberry";if(GH(e))return"Webos";if(BH(e))return"Safari";if((e.includes("chrome/")||$H(e))&&!e.includes("edge/"))return"Chrome";if(zH(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function jH(n=Cn()){return/firefox\//i.test(n)}function BH(n=Cn()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $H(n=Cn()){return/crios\//i.test(n)}function HH(n=Cn()){return/iemobile/i.test(n)}function zH(n=Cn()){return/android/i.test(n)}function qH(n=Cn()){return/blackberry/i.test(n)}function GH(n=Cn()){return/webos/i.test(n)}function ER(n,e=[]){let t;switch(n){case"Browser":t=aR(Cn());break;case"Worker":t=`${aR(Cn())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ph}/${r}`}var h_=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return g(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function WH(t){return g(this,arguments,function*(n,e={}){return $h(n,"GET","/v2/passwordPolicy",pR(n,e))})}var KH=6,f_=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:KH,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var p_=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bh(this),this.idTokenSubscription=new Bh(this),this.beforeStateQueue=new h_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Is(t)),this._initializationPromise=this.queue(()=>g(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield jh.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return g(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return g(this,null,function*(){try{let t=yield yR(this,{idToken:e}),r=yield Zc._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return g(this,null,function*(){var t;if(Qo(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return g(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return g(this,null,function*(){try{yield Uh(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=MH()}_delete(){return g(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return g(this,null,function*(){if(Qo(this.app))return Promise.reject(Oh(this));let t=e?vs(e):null;return t&&Ce(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return g(this,null,function*(){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>g(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return g(this,null,function*(){return Qo(this.app)?Promise.reject(Oh(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Qo(this.app)?Promise.reject(Oh(this)):this.queue(()=>g(this,null,function*(){yield this.assertedPersistence.setPersistence(Is(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return g(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return g(this,null,function*(){let e=yield WH(this),t=new f_(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Mr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return g(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield VH(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return g(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return g(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Is(e)||this._popupRedirectResolver;Ce(t,this,"argument-error"),this.redirectPersistenceManager=yield jh.create(this,[Is(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return g(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>g(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return g(this,null,function*(){if(e===this.currentUser)return this.queue(()=>g(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return g(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ER(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return g(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return g(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&SH(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function QH(n){return vs(n)}var Bh=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=KA(t=>this.observer=t)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var YH={loadJS(){return g(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function JH(n){YH=n}function ZH(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function XH(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Is);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function v_(n,e,t,r){return vs(n).onIdTokenChanged(e,t,r)}function __(n,e,t,r){return vs(n).onAuthStateChanged(e,t,r)}var EX=ZH("rcb"),bX=new ws(3e4,6e4);var TX=new ws(2e3,1e4);var CX=10*60*1e3;var DX=new ws(3e4,6e4);var SX=new ws(5e3,15e3);var AX=encodeURIComponent("fac");var cR="@firebase/auth",uR="1.7.3";var m_=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return g(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function ez(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function tz(n){Ko(new Nr("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ce(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ER(n)},l=new p_(r,i,s,c);return XH(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ko(new Nr("auth-internal",e=>{let t=QH(e.getProvider("auth").getImmediate());return(r=>new m_(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Wo(cR,uR,ez(n)),Wo(cR,uR,"esm2017")}var nz=5*60,RX=$A("authIdTokenMaxAge")||nz;function rz(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}JH({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=g_("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",rz().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});tz("Browser");function bR(n){return new ce(function(e){var t=__(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}function TR(n){return new ce(function(e){var t=v_(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}function $R(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var HR=$R,zR=new Dr("auth","Firebase",$R());var Kh=new un("@firebase/auth");function sz(n,...e){Kh.logLevel<=pe.WARN&&Kh.warn(`Auth (${zn}): ${n}`,...e)}function zh(n,...e){Kh.logLevel<=pe.ERROR&&Kh.error(`Auth (${zn}): ${n}`,...e)}function ln(n,...e){throw U_(n,...e)}function Dn(n,...e){return U_(n,...e)}function V_(n,e,t){let r=Object.assign(Object.assign({},HR()),{[e]:t});return new Dr("auth","Firebase",r).create(e,{appName:n.name})}function Ai(n){return V_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function oz(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&ln(n,"argument-error"),V_(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function U_(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return zR.create(n,...e)}function ne(n,e,...t){if(!n)throw U_(e,...t)}function Pr(n){let e="INTERNAL ASSERTION FAILED: "+n;throw zh(e),new Error(e)}function kr(n,e){n||Pr(e)}function E_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function az(){return CR()==="http:"||CR()==="https:"}function CR(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function cz(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(az()||yA()||"connection"in navigator)?navigator.onLine:!0}function uz(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Es=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,kr(t>e,"Short delay should be less than long delay!"),this.isMobile=mA()||vA()}get(){return cz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function j_(n,e){kr(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Qh=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Pr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Pr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Pr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var lz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var dz=new Es(3e4,6e4);function Ts(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Ri(s,o,a,c){return g(this,arguments,function*(n,e,t,r,i={}){return qR(n,i,()=>g(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=$o(Object.assign({key:n.config.apiKey},h)).slice(1),y=yield n._getAdditionalHeaders();y["Content-Type"]="application/json",n.languageCode&&(y["X-Firebase-Locale"]=n.languageCode);let v=Object.assign({method:e,headers:y},l);return gA()||(v.referrerPolicy="no-referrer"),Qh.fetch()(GR(n,n.config.apiHost,t,p),v)}))})}function qR(n,e,t){return g(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},lz),e);try{let i=new b_(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Hh(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hh(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Hh(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw Hh(n,"user-disabled",o);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw V_(n,h,l);ln(n,h)}}catch(i){if(i instanceof Ot)throw i;ln(n,"network-request-failed",{message:String(i)})}})}function of(s,o,a,c){return g(this,arguments,function*(n,e,t,r,i={}){let l=yield Ri(n,e,t,r,i);return"mfaPendingCredential"in l&&ln(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function GR(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?j_(n.config,i):`${n.config.apiScheme}://${i}`}function hz(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var b_=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Dn(this.auth,"network-request-failed")),dz.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Hh(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Dn(n,e,r);return i.customData._tokenResponse=t,i}function DR(n){return n!==void 0&&n.enterprise!==void 0}var T_=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return hz(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function fz(n,e){return g(this,null,function*(){return Ri(n,"GET","/v2/recaptchaConfig",Ts(n,e))})}function pz(n,e){return g(this,null,function*(){return Ri(n,"POST","/v1/accounts:delete",e)})}function WR(n,e){return g(this,null,function*(){return Ri(n,"POST","/v1/accounts:lookup",e)})}function Xc(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function B_(n,e=!1){return g(this,null,function*(){let t=Fe(n),r=yield t.getIdToken(e),i=$_(r);ne(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Xc(I_(i.auth_time)),issuedAtTime:Xc(I_(i.iat)),expirationTime:Xc(I_(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function I_(n){return Number(n)*1e3}function $_(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return zh("JWT malformed, contained fewer than 3 sections"),null;try{let i=Tv(t);return i?JSON.parse(i):(zh("Failed to decode base64 JWT payload"),null)}catch(i){return zh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function SR(n){let e=$_(n);return ne(e,"internal-error"),ne(typeof e.exp<"u","internal-error"),ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function tu(n,e,t=!1){return g(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Ot&&mz(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function mz({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var C_=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>g(this,null,function*(){yield this.iteration()}),t)}iteration(){return g(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var nu=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xc(this.lastLoginAt),this.creationTime=Xc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Yh(n){return g(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield tu(n,WR(t,{idToken:r}));ne(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?KR(s.providerUserInfo):[],a=gz(n.providerData,o),c=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!a?.length,h=c?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new nu(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,p)})}function H_(n){return g(this,null,function*(){let e=Fe(n);yield Yh(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function gz(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function KR(n){return n.map(e=>{var{providerId:t}=e,r=Wi(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function yz(n,e){return g(this,null,function*(){let t=yield qR(n,{},()=>g(this,null,function*(){let r=$o({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=GR(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Qh.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function vz(n,e){return g(this,null,function*(){return Ri(n,"POST","/v2/accounts:revokeToken",Ts(n,e))})}var eu=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ne(e.idToken,"internal-error"),ne(typeof e.idToken<"u","internal-error"),ne(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):SR(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ne(e.length!==0,"internal-error");let t=SR(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return g(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return g(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield yz(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(ne(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ne(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ne(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Pr("not implemented")}};function Si(n,e){ne(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Jo=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Wi(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new C_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new nu(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return g(this,null,function*(){let t=yield tu(this,this.stsTokenManager.getToken(this.auth,e));return ne(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return B_(this,e)}reload(){return H_(this)}_assign(e){this!==e&&(ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return g(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Yh(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return g(this,null,function*(){if(bn(this.auth.app))return Promise.reject(Ai(this.auth));let e=yield this.getIdToken();return yield tu(this,pz(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,y=(i=t.email)!==null&&i!==void 0?i:void 0,v=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,C=(o=t.photoURL)!==null&&o!==void 0?o:void 0,M=(a=t.tenantId)!==null&&a!==void 0?a:void 0,A=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,F=(l=t.createdAt)!==null&&l!==void 0?l:void 0,H=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:U,emailVerified:W,isAnonymous:me,providerData:Y,stsTokenManager:E}=t;ne(U&&E,e,"internal-error");let _=eu.fromJSON(this.name,E);ne(typeof U=="string",e,"internal-error"),Si(p,e.name),Si(y,e.name),ne(typeof W=="boolean",e,"internal-error"),ne(typeof me=="boolean",e,"internal-error"),Si(v,e.name),Si(C,e.name),Si(M,e.name),Si(A,e.name),Si(F,e.name),Si(H,e.name);let I=new n({uid:U,auth:e,email:y,emailVerified:W,displayName:p,isAnonymous:me,photoURL:C,phoneNumber:v,tenantId:M,stsTokenManager:_,createdAt:F,lastLoginAt:H});return Y&&Array.isArray(Y)&&(I.providerData=Y.map(b=>Object.assign({},b))),A&&(I._redirectEventId=A),I}static _fromIdTokenResponse(e,t,r=!1){return g(this,null,function*(){let i=new eu;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Yh(s),s})}static _fromGetAccountInfoResponse(e,t,r){return g(this,null,function*(){let i=t.users[0];ne(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?KR(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new eu;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new nu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var AR=new Map;function xr(n){kr(n instanceof Function,"Expected a class definition");let e=AR.get(n);return e?(kr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,AR.set(n,e),e)}var _z=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return g(this,null,function*(){return!0})}_set(t,r){return g(this,null,function*(){this.storage[t]=r})}_get(t){return g(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return g(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),D_=_z;function qh(n,e,t){return`firebase:${n}:${e}:${t}`}var Jh=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=qh(this.userKey,i.apiKey,s),this.fullPersistenceKey=qh("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return g(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Jo._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return g(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return g(this,null,function*(){if(!t.length)return new n(xr(D_),e,r);let i=(yield Promise.all(t.map(l=>g(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||xr(D_),o=qh(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=yield l._get(o);if(h){let p=Jo._fromJSON(e,h);l!==s&&(a=p),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(l=>g(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new n(s,e,r))})}};function RR(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ZR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(QR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(eM(e))return"Blackberry";if(tM(e))return"Webos";if(YR(e))return"Safari";if((e.includes("chrome/")||JR(e))&&!e.includes("edge/"))return"Chrome";if(XR(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function QR(n=at()){return/firefox\//i.test(n)}function YR(n=at()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function JR(n=at()){return/crios\//i.test(n)}function ZR(n=at()){return/iemobile/i.test(n)}function XR(n=at()){return/android/i.test(n)}function eM(n=at()){return/blackberry/i.test(n)}function tM(n=at()){return/webos/i.test(n)}function z_(n=at()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Iz(n=at()){var e;return z_(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function wz(){return _A()&&document.documentMode===10}function nM(n=at()){return z_(n)||XR(n)||tM(n)||eM(n)||/windows phone/i.test(n)||ZR(n)}function rM(n,e=[]){let t;switch(n){case"Browser":t=RR(at());break;case"Worker":t=`${RR(at())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${zn}/${r}`}var S_=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return g(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function Ez(t){return g(this,arguments,function*(n,e={}){return Ri(n,"GET","/v2/passwordPolicy",Ts(n,e))})}var bz=6,A_=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:bz,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var R_=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zh(this),this.idTokenSubscription=new Zh(this),this.beforeStateQueue=new S_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=xr(t)),this._initializationPromise=this.queue(()=>g(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Jh.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return g(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return g(this,null,function*(){try{let t=yield WR(this,{idToken:e}),r=yield Jo._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return g(this,null,function*(){var t;if(bn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ne(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return g(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return g(this,null,function*(){try{yield Yh(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=uz()}_delete(){return g(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return g(this,null,function*(){if(bn(this.app))return Promise.reject(Ai(this));let t=e?Fe(e):null;return t&&ne(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return g(this,null,function*(){if(!this._deleted)return e&&ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>g(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return g(this,null,function*(){return bn(this.app)?Promise.reject(Ai(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return bn(this.app)?Promise.reject(Ai(this)):this.queue(()=>g(this,null,function*(){yield this.assertedPersistence.setPersistence(xr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return g(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return g(this,null,function*(){let e=yield Ez(this),t=new A_(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Dr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return g(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield vz(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return g(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return g(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&xr(e)||this._popupRedirectResolver;ne(t,this,"argument-error"),this.redirectPersistenceManager=yield Jh.create(this,[xr(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return g(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>g(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return g(this,null,function*(){if(e===this.currentUser)return this.queue(()=>g(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ne(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return g(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=rM(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return g(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return g(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&sz(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Cs(n){return Fe(n)}var Zh=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=bA(t=>this.observer=t)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var af={loadJS(){return g(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Tz(n){af=n}function iM(n){return af.loadJS(n)}function Cz(){return af.recaptchaEnterpriseScript}function Dz(){return af.gapiScript}function sM(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var Sz="recaptcha-enterprise",Az="NO_RECAPTCHA",M_=class{constructor(e){this.type=Sz,this.auth=Cs(e)}verify(e="verify",t=!1){return g(this,null,function*(){function r(s){return g(this,null,function*(){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>g(this,null,function*(){fz(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new T_(c);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(c=>{a(c)})}))})}function i(s,o,a){let c=window.grecaptcha;DR(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(Az)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!t&&DR(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=Cz();c.length!==0&&(c+=a),iM(c).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})})}};function MR(n,e,t,r=!1){return g(this,null,function*(){let i=new M_(n),s;try{s=yield i.verify(t)}catch{s=yield i.verify(t,!0)}let o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function NR(n,e,t,r){return g(this,null,function*(){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield MR(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(s=>g(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield MR(n,e,t,t==="getOobCode");return r(n,o)}else return Promise.reject(s)}))})}function q_(n,e){let t=ms(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(wi(s,e??{}))return i;ln(i,"already-initialized")}return t.initialize({options:e})}function Rz(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(xr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function G_(n,e,t){let r=Cs(n);ne(r._canInitEmulator,r,"emulator-config-failed"),ne(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=oM(e),{host:o,port:a}=Mz(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||Nz()}function oM(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Mz(n){let e=oM(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:PR(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:PR(o)}}}function PR(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function Nz(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Zo=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Pr("not implemented")}_getIdTokenResponse(e){return Pr("not implemented")}_linkToIdToken(e,t){return Pr("not implemented")}_getReauthenticationResolver(e){return Pr("not implemented")}};function Pz(n,e){return g(this,null,function*(){return Ri(n,"POST","/v1/accounts:signUp",e)})}function xz(n,e){return g(this,null,function*(){return of(n,"POST","/v1/accounts:signInWithPassword",Ts(n,e))})}function kz(n,e){return g(this,null,function*(){return of(n,"POST","/v1/accounts:signInWithEmailLink",Ts(n,e))})}function Oz(n,e){return g(this,null,function*(){return of(n,"POST","/v1/accounts:signInWithEmailLink",Ts(n,e))})}var ru=class n extends Zo{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return g(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return NR(e,t,"signInWithPassword",xz);case"emailLink":return kz(e,{email:this._email,oobCode:this._password});default:ln(e,"internal-error")}})}_linkToIdToken(e,t){return g(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return NR(e,r,"signUpPassword",Pz);case"emailLink":return Oz(e,{idToken:t,email:this._email,oobCode:this._password});default:ln(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Yo(n,e){return g(this,null,function*(){return of(n,"POST","/v1/accounts:signInWithIdp",Ts(n,e))})}var Lz="http://localhost",iu=class n extends Zo{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ln("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=Wi(t,["providerId","signInMethod"]);if(!r||!i)return null;let o=new n(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let t=this.buildRequest();return Yo(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,Yo(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,Yo(e,t)}buildRequest(){let e={requestUri:Lz,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=$o(t)}return e}};function Fz(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Vz(n){let e=Ho(zo(n)).link,t=e?Ho(zo(e)).deep_link_id:null,r=Ho(zo(n)).deep_link_id;return(r?Ho(zo(r)).link:null)||r||t||e||n}var Xh=class n{constructor(e){var t,r,i,s,o,a;let c=Ho(zo(e)),l=(t=c.apiKey)!==null&&t!==void 0?t:null,h=(r=c.oobCode)!==null&&r!==void 0?r:null,p=Fz((i=c.mode)!==null&&i!==void 0?i:null);ne(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=Vz(e);try{return new n(t)}catch{return null}}};var aM=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return ru._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=Xh.parseLink(r);return ne(i,"argument-error"),ru._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),su=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var ou=class extends su{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var W_=(()=>{class n extends ou{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return iu._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})(),K_=(()=>{class n extends ou{constructor(){super("github.com")}static credential(t){return iu._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch{return null}}}n.GITHUB_SIGN_IN_METHOD="github.com",n.PROVIDER_ID="github.com";return n})();var au=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return g(this,null,function*(){let s=yield Jo._fromIdTokenResponse(e,r,i),o=xR(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return g(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=xR(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function xR(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var N_=class n extends Ot{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function cM(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?N_._fromErrorAndOperation(n,s,e,r):s})}function Uz(n,e,t=!1){return g(this,null,function*(){let r=yield tu(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return au._forOperation(n,"link",r)})}function jz(n,e,t=!1){return g(this,null,function*(){let{auth:r}=n;if(bn(r.app))return Promise.reject(Ai(r));let i="reauthenticate";try{let s=yield tu(n,cM(r,i,e,n),t);ne(s.idToken,r,"internal-error");let o=$_(s.idToken);ne(o,r,"internal-error");let{sub:a}=o;return ne(n.uid===a,r,"user-mismatch"),au._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&ln(r,"user-mismatch"),s}})}function uM(n,e,t=!1){return g(this,null,function*(){if(bn(n.app))return Promise.reject(Ai(n));let r="signIn",i=yield cM(n,r,e),s=yield au._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}function Q_(n,e){return g(this,null,function*(){return uM(Cs(n),e)})}function Bz(n){return g(this,null,function*(){let e=Cs(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Y_(n,e,t){return bn(n.app)?Promise.reject(Ai(n)):Q_(Fe(n),aM.credential(e,t)).catch(r=>g(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&Bz(n),r}))}function J_(n,e,t,r){return Fe(n).onIdTokenChanged(e,t,r)}function Z_(n,e,t){return Fe(n).beforeAuthStateChanged(e,t)}function X_(n){return Fe(n).signOut()}var ef="__sak";var tf=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ef,"1"),this.storage.removeItem(ef),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var $z=1e3,Hz=10,zz=(()=>{class n extends tf{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=nM(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);wz()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,Hz):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},$z)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return g(this,null,function*(){yield sr(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return g(this,null,function*(){let r=yield sr(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return g(this,null,function*(){yield sr(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),lM=zz;var qz=(()=>{class n extends tf{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),eI=qz;function Gz(n){return Promise.all(n.map(e=>g(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var Wz=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return g(this,null,function*(){let r=t,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(h=>g(this,null,function*(){return h(r.origin,o)})),l=yield Gz(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function tI(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var P_=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return g(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=tI("",20);i.port1.start();let h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let y=p;if(y.data.eventId===l)switch(y.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(y.data.response);break;default:clearTimeout(h),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Gn(){return window}function Kz(n){Gn().location.href=n}function dM(){return typeof Gn().WorkerGlobalScope<"u"&&typeof Gn().importScripts=="function"}function Qz(){return g(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function Yz(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function Jz(){return dM()?self:null}var hM="firebaseLocalStorageDb",Zz=1,nf="firebaseLocalStorage",fM="fbase_key",bs=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function cf(n,e){return n.transaction([nf],e?"readwrite":"readonly").objectStore(nf)}function Xz(){let n=indexedDB.deleteDatabase(hM);return new bs(n).toPromise()}function x_(){let n=indexedDB.open(hM,Zz);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(nf,{keyPath:fM})}catch(i){t(i)}}),n.addEventListener("success",()=>g(this,null,function*(){let r=n.result;r.objectStoreNames.contains(nf)?e(r):(r.close(),yield Xz(),e(yield x_()))}))})}function kR(n,e,t){return g(this,null,function*(){let r=cf(n,!0).put({[fM]:e,value:t});return new bs(r).toPromise()})}function e4(n,e){return g(this,null,function*(){let t=cf(n,!1).get(e),r=yield new bs(t).toPromise();return r===void 0?null:r.value})}function OR(n,e){let t=cf(n,!0).delete(e);return new bs(t).toPromise()}var t4=800,n4=3,r4=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return g(this,null,function*(){return this.db?this.db:(this.db=yield x_(),this.db)})}_withRetries(t){return g(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>n4)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return g(this,null,function*(){return dM()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return g(this,null,function*(){this.receiver=Wz._getInstance(Jz()),this.receiver._subscribe("keyChanged",(t,r)=>g(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>g(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return g(this,null,function*(){var t,r;if(this.activeServiceWorker=yield Qz(),!this.activeServiceWorker)return;this.sender=new P_(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return g(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||Yz()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return g(this,null,function*(){try{if(!indexedDB)return!1;let t=yield x_();return yield kR(t,ef,"1"),yield OR(t,ef),!0}catch{}return!1})}_withPendingWrite(t){return g(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return g(this,null,function*(){return this._withPendingWrite(()=>g(this,null,function*(){return yield this._withRetries(i=>kR(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return g(this,null,function*(){let r=yield this._withRetries(i=>e4(i,t));return this.localCache[t]=r,r})}_remove(t){return g(this,null,function*(){return this._withPendingWrite(()=>g(this,null,function*(){return yield this._withRetries(r=>OR(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return g(this,null,function*(){let t=yield this._withRetries(s=>{let o=cf(s,!1).getAll();return new bs(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>g(this,null,function*(){return this._poll()}),t4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),pM=r4;var yte=sM("rcb"),vte=new Es(3e4,6e4);function mM(n,e){return e?xr(e):(ne(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var cu=class extends Zo{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Yo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Yo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Yo(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function i4(n){return uM(n.auth,new cu(n),n.bypassAuthState)}function s4(n){let{auth:e,user:t}=n;return ne(t,e,"internal-error"),jz(t,new cu(n),n.bypassAuthState)}function o4(n){return g(this,null,function*(){let{auth:e,user:t}=n;return ne(t,e,"internal-error"),Uz(t,new cu(n),n.bypassAuthState)})}var rf=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>g(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return g(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return i4;case"linkViaPopup":case"linkViaRedirect":return o4;case"reauthViaPopup":case"reauthViaRedirect":return s4;default:ln(this.auth,"internal-error")}}resolve(e){kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var a4=new Es(2e3,1e4);function nI(n,e,t){return g(this,null,function*(){if(bn(n.app))return Promise.reject(Dn(n,"operation-not-supported-in-this-environment"));let r=Cs(n);oz(n,e,su);let i=mM(r,t);return new c4(r,"signInViaPopup",e,i).executeNotNull()})}var c4=(()=>{class n extends rf{constructor(t,r,i,s,o){super(t,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return g(this,null,function*(){let t=yield this.execute();return ne(t,this.auth,"internal-error"),t})}onExecution(){return g(this,null,function*(){kr(this.filter.length===1,"Popup operations only handle one event");let t=tI();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Dn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Dn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Dn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,a4.get())};t()}}n.currentPopupAction=null;return n})(),u4="pendingRedirect",Gh=new Map,k_=class n extends rf{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return g(this,null,function*(){let e=Gh.get(this.auth._key());if(!e){try{let r=(yield l4(this.resolver,this.auth))?yield sr(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Gh.set(this.auth._key(),e)}return this.bypassAuthState||Gh.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return g(this,null,function*(){if(e.type==="signInViaRedirect")return sr(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,sr(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return g(this,null,function*(){})}cleanUp(){}};function l4(n,e){return g(this,null,function*(){let t=f4(e),r=h4(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function d4(n,e){Gh.set(n._key(),e)}function h4(n){return xr(n._redirectPersistence)}function f4(n){return qh(u4,n.config.apiKey,n.name)}function p4(n,e,t=!1){return g(this,null,function*(){if(bn(n.app))return Promise.reject(Ai(n));let r=Cs(n),i=mM(r,e),o=yield new k_(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var m4=10*60*1e3,O_=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!g4(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!gM(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Dn(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=m4&&this.cachedEventUids.clear(),this.cachedEventUids.has(LR(e))}saveEventToCache(e){this.cachedEventUids.add(LR(e)),this.lastProcessedEventTime=Date.now()}};function LR(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function gM({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function g4(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gM(n);default:return!1}}function y4(t){return g(this,arguments,function*(n,e={}){return Ri(n,"GET","/v1/projects",e)})}var v4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_4=/^https?/;function I4(n){return g(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield y4(n);for(let t of e)try{if(w4(t))return}catch{}ln(n,"unauthorized-domain")})}function w4(n){let e=E_(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!_4.test(t))return!1;if(v4.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var E4=new Es(3e4,6e4);function FR(){let n=Gn().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function b4(n){return new Promise((e,t)=>{var r,i,s;function o(){FR(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{FR(),t(Dn(n,"network-request-failed"))},timeout:E4.get()})}if(!((i=(r=Gn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Gn().gapi)===null||s===void 0)&&s.load)o();else{let a=sM("iframefcb");return Gn()[a]=()=>{gapi.load?o():t(Dn(n,"network-request-failed"))},iM(`${Dz()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw Wh=null,e})}var Wh=null;function T4(n){return Wh=Wh||b4(n),Wh}var C4=new Es(5e3,15e3),D4="__/auth/iframe",S4="emulator/auth/iframe",A4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},R4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function M4(n){let e=n.config;ne(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?j_(e,S4):`https://${n.config.authDomain}/${D4}`,r={apiKey:e.apiKey,appName:n.name,v:zn},i=R4.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${$o(r).slice(1)}`}function N4(n){return g(this,null,function*(){let e=yield T4(n),t=Gn().gapi;return ne(t,n,"internal-error"),e.open({where:document.body,url:M4(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:A4,dontclear:!0},r=>new Promise((i,s)=>g(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=Dn(n,"network-request-failed"),a=Gn().setTimeout(()=>{s(o)},C4.get());function c(){Gn().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})})))})}var P4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},x4=500,k4=600,O4="_blank",L4="http://localhost",sf=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function F4(n,e,t,r=x4,i=k4){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},P4),{width:r.toString(),height:i.toString(),top:s,left:o}),l=at().toLowerCase();t&&(a=JR(l)?O4:t),QR(l)&&(e=e||L4,c.scrollbars="yes");let h=Object.entries(c).reduce((y,[v,C])=>`${y}${v}=${C},`,"");if(Iz(l)&&a!=="_self")return V4(e||"",a),new sf(null);let p=window.open(e||"",a,h);ne(p,n,"popup-blocked");try{p.focus()}catch{}return new sf(p)}function V4(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var U4="__/auth/handler",j4="emulator/auth/handler",B4=encodeURIComponent("fac");function VR(n,e,t,r,i,s){return g(this,null,function*(){ne(n.config.authDomain,n,"auth-domain-config-required"),ne(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:zn,eventId:i};if(e instanceof su){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",EA(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof ou){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let c=yield n._getAppCheckToken(),l=c?`#${B4}=${encodeURIComponent(c)}`:"";return`${$4(n)}?${$o(a).slice(1)}${l}`})}function $4({config:n}){return n.emulator?j_(n,j4):`https://${n.authDomain}/${U4}`}var w_="webStorageSupport",L_=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=eI,this._completeRedirectFn=p4,this._overrideRedirectResult=d4}_openPopup(e,t,r,i){return g(this,null,function*(){var s;kr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield VR(e,t,r,E_(),i);return F4(e,o,tI())})}_openRedirect(e,t,r,i){return g(this,null,function*(){yield this._originValidation(e);let s=yield VR(e,t,r,E_(),i);return Kz(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(kr(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return g(this,null,function*(){let t=yield N4(e),r=new O_(e);return t.register("authEvent",i=>(ne(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(w_,{type:w_},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[w_];o!==void 0&&t(!!o),ln(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=I4(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return nM()||YR()||z_()}},yM=L_;var UR="@firebase/auth",jR="1.7.9";var F_=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return g(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function H4(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function z4(n){Hn(new Bt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ne(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rM(n)},l=new R_(r,i,s,c);return Rz(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Hn(new Bt("auth-internal",e=>{let t=Cs(e.getProvider("auth").getImmediate());return(r=>new F_(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Le(UR,jR,H4(n)),Le(UR,jR,"esm2017")}var q4=5*60,G4=Av("authIdTokenMaxAge")||q4,BR=null,W4=n=>e=>g(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>G4)return;let i=t?.token;BR!==i&&(BR=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function rI(n=bi()){let e=ms(n,"auth");if(e.isInitialized())return e.getImmediate();let t=q_(n,{popupRedirectResolver:yM,persistence:[pM,lM,eI]}),r=Av("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=W4(s.toString());Z_(t,o,()=>o(t.currentUser)),J_(t,a=>o(a))}}let i=Cv("auth");return i&&G_(t,`http://${i}`),t}function K4(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Tz({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=Dn("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",K4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});z4("Browser");var vM="auth",Or=class{constructor(e){return e}},Ds=class{constructor(){return ys(vM)}};var iI=new z("angularfire2.auth-instances");function Vq(n,e){let t=Go(vM,n,e);return t&&new Or(t)}function Uq(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Or(r)}}var jq={provide:Ds,deps:[[new Xe,iI]]},Bq={provide:Or,useFactory:Vq,deps:[[new Xe,iI],Tn]};function _M(n,...e){return Le("angularfire",Ar.full,"auth"),jt([Bq,jq,{provide:iI,useFactory:Uq(n),multi:!0,deps:[be,yt,Ci,Rr,[new Xe,Ti],...e]}])}var IM=xe(bR,!0),wM=xe(TR,!0);var EM=xe(rI,!0);var bM=xe(Y_,!0);var sI=xe(nI,!0);var TM=xe(X_,!0);var CM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},DM={};var Mi,oI;(function(){var n;function e(E,_){function I(){}I.prototype=_.prototype,E.D=_.prototype,E.prototype=new I,E.prototype.constructor=E,E.C=function(b,T,S){for(var w=Array(arguments.length-2),nr=2;nr<arguments.length;nr++)w[nr-2]=arguments[nr];return _.prototype[T].apply(b,w)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,_,I){I||(I=0);var b=Array(16);if(typeof _=="string")for(var T=0;16>T;++T)b[T]=_.charCodeAt(I++)|_.charCodeAt(I++)<<8|_.charCodeAt(I++)<<16|_.charCodeAt(I++)<<24;else for(T=0;16>T;++T)b[T]=_[I++]|_[I++]<<8|_[I++]<<16|_[I++]<<24;_=E.g[0],I=E.g[1],T=E.g[2];var S=E.g[3],w=_+(S^I&(T^S))+b[0]+3614090360&4294967295;_=I+(w<<7&4294967295|w>>>25),w=S+(T^_&(I^T))+b[1]+3905402710&4294967295,S=_+(w<<12&4294967295|w>>>20),w=T+(I^S&(_^I))+b[2]+606105819&4294967295,T=S+(w<<17&4294967295|w>>>15),w=I+(_^T&(S^_))+b[3]+3250441966&4294967295,I=T+(w<<22&4294967295|w>>>10),w=_+(S^I&(T^S))+b[4]+4118548399&4294967295,_=I+(w<<7&4294967295|w>>>25),w=S+(T^_&(I^T))+b[5]+1200080426&4294967295,S=_+(w<<12&4294967295|w>>>20),w=T+(I^S&(_^I))+b[6]+2821735955&4294967295,T=S+(w<<17&4294967295|w>>>15),w=I+(_^T&(S^_))+b[7]+4249261313&4294967295,I=T+(w<<22&4294967295|w>>>10),w=_+(S^I&(T^S))+b[8]+1770035416&4294967295,_=I+(w<<7&4294967295|w>>>25),w=S+(T^_&(I^T))+b[9]+2336552879&4294967295,S=_+(w<<12&4294967295|w>>>20),w=T+(I^S&(_^I))+b[10]+4294925233&4294967295,T=S+(w<<17&4294967295|w>>>15),w=I+(_^T&(S^_))+b[11]+2304563134&4294967295,I=T+(w<<22&4294967295|w>>>10),w=_+(S^I&(T^S))+b[12]+1804603682&4294967295,_=I+(w<<7&4294967295|w>>>25),w=S+(T^_&(I^T))+b[13]+4254626195&4294967295,S=_+(w<<12&4294967295|w>>>20),w=T+(I^S&(_^I))+b[14]+2792965006&4294967295,T=S+(w<<17&4294967295|w>>>15),w=I+(_^T&(S^_))+b[15]+1236535329&4294967295,I=T+(w<<22&4294967295|w>>>10),w=_+(T^S&(I^T))+b[1]+4129170786&4294967295,_=I+(w<<5&4294967295|w>>>27),w=S+(I^T&(_^I))+b[6]+3225465664&4294967295,S=_+(w<<9&4294967295|w>>>23),w=T+(_^I&(S^_))+b[11]+643717713&4294967295,T=S+(w<<14&4294967295|w>>>18),w=I+(S^_&(T^S))+b[0]+3921069994&4294967295,I=T+(w<<20&4294967295|w>>>12),w=_+(T^S&(I^T))+b[5]+3593408605&4294967295,_=I+(w<<5&4294967295|w>>>27),w=S+(I^T&(_^I))+b[10]+38016083&4294967295,S=_+(w<<9&4294967295|w>>>23),w=T+(_^I&(S^_))+b[15]+3634488961&4294967295,T=S+(w<<14&4294967295|w>>>18),w=I+(S^_&(T^S))+b[4]+3889429448&4294967295,I=T+(w<<20&4294967295|w>>>12),w=_+(T^S&(I^T))+b[9]+568446438&4294967295,_=I+(w<<5&4294967295|w>>>27),w=S+(I^T&(_^I))+b[14]+3275163606&4294967295,S=_+(w<<9&4294967295|w>>>23),w=T+(_^I&(S^_))+b[3]+4107603335&4294967295,T=S+(w<<14&4294967295|w>>>18),w=I+(S^_&(T^S))+b[8]+1163531501&4294967295,I=T+(w<<20&4294967295|w>>>12),w=_+(T^S&(I^T))+b[13]+2850285829&4294967295,_=I+(w<<5&4294967295|w>>>27),w=S+(I^T&(_^I))+b[2]+4243563512&4294967295,S=_+(w<<9&4294967295|w>>>23),w=T+(_^I&(S^_))+b[7]+1735328473&4294967295,T=S+(w<<14&4294967295|w>>>18),w=I+(S^_&(T^S))+b[12]+2368359562&4294967295,I=T+(w<<20&4294967295|w>>>12),w=_+(I^T^S)+b[5]+4294588738&4294967295,_=I+(w<<4&4294967295|w>>>28),w=S+(_^I^T)+b[8]+2272392833&4294967295,S=_+(w<<11&4294967295|w>>>21),w=T+(S^_^I)+b[11]+1839030562&4294967295,T=S+(w<<16&4294967295|w>>>16),w=I+(T^S^_)+b[14]+4259657740&4294967295,I=T+(w<<23&4294967295|w>>>9),w=_+(I^T^S)+b[1]+2763975236&4294967295,_=I+(w<<4&4294967295|w>>>28),w=S+(_^I^T)+b[4]+1272893353&4294967295,S=_+(w<<11&4294967295|w>>>21),w=T+(S^_^I)+b[7]+4139469664&4294967295,T=S+(w<<16&4294967295|w>>>16),w=I+(T^S^_)+b[10]+3200236656&4294967295,I=T+(w<<23&4294967295|w>>>9),w=_+(I^T^S)+b[13]+681279174&4294967295,_=I+(w<<4&4294967295|w>>>28),w=S+(_^I^T)+b[0]+3936430074&4294967295,S=_+(w<<11&4294967295|w>>>21),w=T+(S^_^I)+b[3]+3572445317&4294967295,T=S+(w<<16&4294967295|w>>>16),w=I+(T^S^_)+b[6]+76029189&4294967295,I=T+(w<<23&4294967295|w>>>9),w=_+(I^T^S)+b[9]+3654602809&4294967295,_=I+(w<<4&4294967295|w>>>28),w=S+(_^I^T)+b[12]+3873151461&4294967295,S=_+(w<<11&4294967295|w>>>21),w=T+(S^_^I)+b[15]+530742520&4294967295,T=S+(w<<16&4294967295|w>>>16),w=I+(T^S^_)+b[2]+3299628645&4294967295,I=T+(w<<23&4294967295|w>>>9),w=_+(T^(I|~S))+b[0]+4096336452&4294967295,_=I+(w<<6&4294967295|w>>>26),w=S+(I^(_|~T))+b[7]+1126891415&4294967295,S=_+(w<<10&4294967295|w>>>22),w=T+(_^(S|~I))+b[14]+2878612391&4294967295,T=S+(w<<15&4294967295|w>>>17),w=I+(S^(T|~_))+b[5]+4237533241&4294967295,I=T+(w<<21&4294967295|w>>>11),w=_+(T^(I|~S))+b[12]+1700485571&4294967295,_=I+(w<<6&4294967295|w>>>26),w=S+(I^(_|~T))+b[3]+2399980690&4294967295,S=_+(w<<10&4294967295|w>>>22),w=T+(_^(S|~I))+b[10]+4293915773&4294967295,T=S+(w<<15&4294967295|w>>>17),w=I+(S^(T|~_))+b[1]+2240044497&4294967295,I=T+(w<<21&4294967295|w>>>11),w=_+(T^(I|~S))+b[8]+1873313359&4294967295,_=I+(w<<6&4294967295|w>>>26),w=S+(I^(_|~T))+b[15]+4264355552&4294967295,S=_+(w<<10&4294967295|w>>>22),w=T+(_^(S|~I))+b[6]+2734768916&4294967295,T=S+(w<<15&4294967295|w>>>17),w=I+(S^(T|~_))+b[13]+1309151649&4294967295,I=T+(w<<21&4294967295|w>>>11),w=_+(T^(I|~S))+b[4]+4149444226&4294967295,_=I+(w<<6&4294967295|w>>>26),w=S+(I^(_|~T))+b[11]+3174756917&4294967295,S=_+(w<<10&4294967295|w>>>22),w=T+(_^(S|~I))+b[2]+718787259&4294967295,T=S+(w<<15&4294967295|w>>>17),w=I+(S^(T|~_))+b[9]+3951481745&4294967295,E.g[0]=E.g[0]+_&4294967295,E.g[1]=E.g[1]+(T+(w<<21&4294967295|w>>>11))&4294967295,E.g[2]=E.g[2]+T&4294967295,E.g[3]=E.g[3]+S&4294967295}r.prototype.u=function(E,_){_===void 0&&(_=E.length);for(var I=_-this.blockSize,b=this.B,T=this.h,S=0;S<_;){if(T==0)for(;S<=I;)i(this,E,S),S+=this.blockSize;if(typeof E=="string"){for(;S<_;)if(b[T++]=E.charCodeAt(S++),T==this.blockSize){i(this,b),T=0;break}}else for(;S<_;)if(b[T++]=E[S++],T==this.blockSize){i(this,b),T=0;break}}this.h=T,this.o+=_},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var _=1;_<E.length-8;++_)E[_]=0;var I=8*this.o;for(_=E.length-8;_<E.length;++_)E[_]=I&255,I/=256;for(this.u(E),E=Array(16),_=I=0;4>_;++_)for(var b=0;32>b;b+=8)E[I++]=this.g[_]>>>b&255;return E};function s(E,_){var I=a;return Object.prototype.hasOwnProperty.call(I,E)?I[E]:I[E]=_(E)}function o(E,_){this.h=_;for(var I=[],b=!0,T=E.length-1;0<=T;T--){var S=E[T]|0;b&&S==_||(I[T]=S,b=!1)}this.g=I}var a={};function c(E){return-128<=E&&128>E?s(E,function(_){return new o([_|0],0>_?-1:0)}):new o([E|0],0>E?-1:0)}function l(E){if(isNaN(E)||!isFinite(E))return p;if(0>E)return A(l(-E));for(var _=[],I=1,b=0;E>=I;b++)_[b]=E/I|0,I*=4294967296;return new o(_,0)}function h(E,_){if(E.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(E.charAt(0)=="-")return A(h(E.substring(1),_));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(_,8)),b=p,T=0;T<E.length;T+=8){var S=Math.min(8,E.length-T),w=parseInt(E.substring(T,T+S),_);8>S?(S=l(Math.pow(_,S)),b=b.j(S).add(l(w))):(b=b.j(I),b=b.add(l(w)))}return b}var p=c(0),y=c(1),v=c(16777216);n=o.prototype,n.m=function(){if(M(this))return-A(this).m();for(var E=0,_=1,I=0;I<this.g.length;I++){var b=this.i(I);E+=(0<=b?b:4294967296+b)*_,_*=4294967296}return E},n.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(C(this))return"0";if(M(this))return"-"+A(this).toString(E);for(var _=l(Math.pow(E,6)),I=this,b="";;){var T=W(I,_).g;I=F(I,T.j(_));var S=((0<I.g.length?I.g[0]:I.h)>>>0).toString(E);if(I=T,C(I))return S+b;for(;6>S.length;)S="0"+S;b=S+b}},n.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function C(E){if(E.h!=0)return!1;for(var _=0;_<E.g.length;_++)if(E.g[_]!=0)return!1;return!0}function M(E){return E.h==-1}n.l=function(E){return E=F(this,E),M(E)?-1:C(E)?0:1};function A(E){for(var _=E.g.length,I=[],b=0;b<_;b++)I[b]=~E.g[b];return new o(I,~E.h).add(y)}n.abs=function(){return M(this)?A(this):this},n.add=function(E){for(var _=Math.max(this.g.length,E.g.length),I=[],b=0,T=0;T<=_;T++){var S=b+(this.i(T)&65535)+(E.i(T)&65535),w=(S>>>16)+(this.i(T)>>>16)+(E.i(T)>>>16);b=w>>>16,S&=65535,w&=65535,I[T]=w<<16|S}return new o(I,I[I.length-1]&-2147483648?-1:0)};function F(E,_){return E.add(A(_))}n.j=function(E){if(C(this)||C(E))return p;if(M(this))return M(E)?A(this).j(A(E)):A(A(this).j(E));if(M(E))return A(this.j(A(E)));if(0>this.l(v)&&0>E.l(v))return l(this.m()*E.m());for(var _=this.g.length+E.g.length,I=[],b=0;b<2*_;b++)I[b]=0;for(b=0;b<this.g.length;b++)for(var T=0;T<E.g.length;T++){var S=this.i(b)>>>16,w=this.i(b)&65535,nr=E.i(T)>>>16,Ma=E.i(T)&65535;I[2*b+2*T]+=w*Ma,H(I,2*b+2*T),I[2*b+2*T+1]+=S*Ma,H(I,2*b+2*T+1),I[2*b+2*T+1]+=w*nr,H(I,2*b+2*T+1),I[2*b+2*T+2]+=S*nr,H(I,2*b+2*T+2)}for(b=0;b<_;b++)I[b]=I[2*b+1]<<16|I[2*b];for(b=_;b<2*_;b++)I[b]=0;return new o(I,0)};function H(E,_){for(;(E[_]&65535)!=E[_];)E[_+1]+=E[_]>>>16,E[_]&=65535,_++}function U(E,_){this.g=E,this.h=_}function W(E,_){if(C(_))throw Error("division by zero");if(C(E))return new U(p,p);if(M(E))return _=W(A(E),_),new U(A(_.g),A(_.h));if(M(_))return _=W(E,A(_)),new U(A(_.g),_.h);if(30<E.g.length){if(M(E)||M(_))throw Error("slowDivide_ only works with positive integers.");for(var I=y,b=_;0>=b.l(E);)I=me(I),b=me(b);var T=Y(I,1),S=Y(b,1);for(b=Y(b,2),I=Y(I,2);!C(b);){var w=S.add(b);0>=w.l(E)&&(T=T.add(I),S=w),b=Y(b,1),I=Y(I,1)}return _=F(E,T.j(_)),new U(T,_)}for(T=p;0<=E.l(_);){for(I=Math.max(1,Math.floor(E.m()/_.m())),b=Math.ceil(Math.log(I)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),S=l(I),w=S.j(_);M(w)||0<w.l(E);)I-=b,S=l(I),w=S.j(_);C(S)&&(S=y),T=T.add(S),E=F(E,w)}return new U(T,E)}n.A=function(E){return W(this,E).h},n.and=function(E){for(var _=Math.max(this.g.length,E.g.length),I=[],b=0;b<_;b++)I[b]=this.i(b)&E.i(b);return new o(I,this.h&E.h)},n.or=function(E){for(var _=Math.max(this.g.length,E.g.length),I=[],b=0;b<_;b++)I[b]=this.i(b)|E.i(b);return new o(I,this.h|E.h)},n.xor=function(E){for(var _=Math.max(this.g.length,E.g.length),I=[],b=0;b<_;b++)I[b]=this.i(b)^E.i(b);return new o(I,this.h^E.h)};function me(E){for(var _=E.g.length+1,I=[],b=0;b<_;b++)I[b]=E.i(b)<<1|E.i(b-1)>>>31;return new o(I,E.h)}function Y(E,_){var I=_>>5;_%=32;for(var b=E.g.length-I,T=[],S=0;S<b;S++)T[S]=0<_?E.i(S+I)>>>_|E.i(S+I+1)<<32-_:E.i(S+I);return new o(T,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,oI=DM.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,Mi=DM.Integer=o}).apply(typeof CM<"u"?CM:typeof self<"u"?self:typeof window<"u"?window:{});var uf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Lr={};var aI,Hq,Xo,cI,uu,lf,uI,lI,dI;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,d,f){return u==Array.prototype||u==Object.prototype||(u[d]=f.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof uf=="object"&&uf];for(var d=0;d<u.length;++d){var f=u[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(u,d){if(d)e:{var f=r;u=u.split(".");for(var m=0;m<u.length-1;m++){var D=u[m];if(!(D in f))break e;f=f[D]}u=u[u.length-1],m=f[u],d=d(m),d!=m&&d!=null&&e(f,u,{configurable:!0,writable:!0,value:d})}}function s(u,d){u instanceof String&&(u+="");var f=0,m=!1,D={next:function(){if(!m&&f<u.length){var R=f++;return{value:d(R,u[R]),done:!1}}return m=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(u){return u||function(){return s(this,function(d,f){return f})}});var o=o||{},a=this||self;function c(u){var d=typeof u;return d=d!="object"?d:u?Array.isArray(u)?"array":d:"null",d=="array"||d=="object"&&typeof u.length=="number"}function l(u){var d=typeof u;return d=="object"&&u!=null||d=="function"}function h(u,d,f){return u.call.apply(u.bind,arguments)}function p(u,d,f){if(!u)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,m),u.apply(d,D)}}return function(){return u.apply(d,arguments)}}function y(u,d,f){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,y.apply(null,arguments)}function v(u,d){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),u.apply(this,m)}}function C(u,d){function f(){}f.prototype=d.prototype,u.aa=d.prototype,u.prototype=new f,u.prototype.constructor=u,u.Qb=function(m,D,R){for(var j=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)j[Me-2]=arguments[Me];return d.prototype[D].apply(m,j)}}function M(u){let d=u.length;if(0<d){let f=Array(d);for(let m=0;m<d;m++)f[m]=u[m];return f}return[]}function A(u,d){for(let f=1;f<arguments.length;f++){let m=arguments[f];if(c(m)){let D=u.length||0,R=m.length||0;u.length=D+R;for(let j=0;j<R;j++)u[D+j]=m[j]}else u.push(m)}}class F{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function H(u){return/^[\s\xa0]*$/.test(u)}function U(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function W(u){return W[" "](u),u}W[" "]=function(){};var me=U().indexOf("Gecko")!=-1&&!(U().toLowerCase().indexOf("webkit")!=-1&&U().indexOf("Edge")==-1)&&!(U().indexOf("Trident")!=-1||U().indexOf("MSIE")!=-1)&&U().indexOf("Edge")==-1;function Y(u,d,f){for(let m in u)d.call(f,u[m],m,u)}function E(u,d){for(let f in u)d.call(void 0,u[f],f,u)}function _(u){let d={};for(let f in u)d[f]=u[f];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(u,d){let f,m;for(let D=1;D<arguments.length;D++){m=arguments[D];for(f in m)u[f]=m[f];for(let R=0;R<I.length;R++)f=I[R],Object.prototype.hasOwnProperty.call(m,f)&&(u[f]=m[f])}}function T(u){var d=1;u=u.split(":");let f=[];for(;0<d&&u.length;)f.push(u.shift()),d--;return u.length&&f.push(u.join(":")),f}function S(u){a.setTimeout(()=>{throw u},0)}function w(){var u=Dp;let d=null;return u.g&&(d=u.g,u.g=u.g.next,u.g||(u.h=null),d.next=null),d}class nr{constructor(){this.h=this.g=null}add(d,f){let m=Ma.get();m.set(d,f),this.h?this.h.next=m:this.g=m,this.h=m}}var Ma=new F(()=>new Lx,u=>u.reset());class Lx{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Na,Pa=!1,Dp=new nr,zE=()=>{let u=a.Promise.resolve(void 0);Na=()=>{u.then(Fx)}};var Fx=()=>{for(var u;u=w();){try{u.h.call(u.g)}catch(f){S(f)}var d=Ma;d.j(u),100>d.h&&(d.h++,u.next=d.g,d.g=u)}Pa=!1};function jr(){this.s=this.s,this.C=this.C}jr.prototype.s=!1,jr.prototype.ma=function(){this.s||(this.s=!0,this.N())},jr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ft(u,d){this.type=u,this.g=this.target=d,this.defaultPrevented=!1}ft.prototype.h=function(){this.defaultPrevented=!0};var Vx=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,d=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return u}();function xa(u,d){if(ft.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var f=this.type=u.type,m=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=d,d=u.relatedTarget){if(me){e:{try{W(d.nodeName);var D=!0;break e}catch{}D=!1}D||(d=null)}}else f=="mouseover"?d=u.fromElement:f=="mouseout"&&(d=u.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ux[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&xa.aa.h.call(this)}}C(xa,ft);var Ux={2:"touch",3:"pen",4:"mouse"};xa.prototype.h=function(){xa.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ka="closure_listenable_"+(1e6*Math.random()|0),jx=0;function Bx(u,d,f,m,D){this.listener=u,this.proxy=null,this.src=d,this.type=f,this.capture=!!m,this.ha=D,this.key=++jx,this.da=this.fa=!1}function Qu(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Yu(u){this.src=u,this.g={},this.h=0}Yu.prototype.add=function(u,d,f,m,D){var R=u.toString();u=this.g[R],u||(u=this.g[R]=[],this.h++);var j=Ap(u,d,m,D);return-1<j?(d=u[j],f||(d.fa=!1)):(d=new Bx(d,this.src,R,!!m,D),d.fa=f,u.push(d)),d};function Sp(u,d){var f=d.type;if(f in u.g){var m=u.g[f],D=Array.prototype.indexOf.call(m,d,void 0),R;(R=0<=D)&&Array.prototype.splice.call(m,D,1),R&&(Qu(d),u.g[f].length==0&&(delete u.g[f],u.h--))}}function Ap(u,d,f,m){for(var D=0;D<u.length;++D){var R=u[D];if(!R.da&&R.listener==d&&R.capture==!!f&&R.ha==m)return D}return-1}var Rp="closure_lm_"+(1e6*Math.random()|0),Mp={};function qE(u,d,f,m,D){if(m&&m.once)return WE(u,d,f,m,D);if(Array.isArray(d)){for(var R=0;R<d.length;R++)qE(u,d[R],f,m,D);return null}return f=kp(f),u&&u[ka]?u.K(d,f,l(m)?!!m.capture:!!m,D):GE(u,d,f,!1,m,D)}function GE(u,d,f,m,D,R){if(!d)throw Error("Invalid event type");var j=l(D)?!!D.capture:!!D,Me=Pp(u);if(Me||(u[Rp]=Me=new Yu(u)),f=Me.add(d,f,m,j,R),f.proxy)return f;if(m=$x(),f.proxy=m,m.src=u,m.listener=f,u.addEventListener)Vx||(D=j),D===void 0&&(D=!1),u.addEventListener(d.toString(),m,D);else if(u.attachEvent)u.attachEvent(QE(d.toString()),m);else if(u.addListener&&u.removeListener)u.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function $x(){function u(f){return d.call(u.src,u.listener,f)}let d=Hx;return u}function WE(u,d,f,m,D){if(Array.isArray(d)){for(var R=0;R<d.length;R++)WE(u,d[R],f,m,D);return null}return f=kp(f),u&&u[ka]?u.L(d,f,l(m)?!!m.capture:!!m,D):GE(u,d,f,!0,m,D)}function KE(u,d,f,m,D){if(Array.isArray(d))for(var R=0;R<d.length;R++)KE(u,d[R],f,m,D);else m=l(m)?!!m.capture:!!m,f=kp(f),u&&u[ka]?(u=u.i,d=String(d).toString(),d in u.g&&(R=u.g[d],f=Ap(R,f,m,D),-1<f&&(Qu(R[f]),Array.prototype.splice.call(R,f,1),R.length==0&&(delete u.g[d],u.h--)))):u&&(u=Pp(u))&&(d=u.g[d.toString()],u=-1,d&&(u=Ap(d,f,m,D)),(f=-1<u?d[u]:null)&&Np(f))}function Np(u){if(typeof u!="number"&&u&&!u.da){var d=u.src;if(d&&d[ka])Sp(d.i,u);else{var f=u.type,m=u.proxy;d.removeEventListener?d.removeEventListener(f,m,u.capture):d.detachEvent?d.detachEvent(QE(f),m):d.addListener&&d.removeListener&&d.removeListener(m),(f=Pp(d))?(Sp(f,u),f.h==0&&(f.src=null,d[Rp]=null)):Qu(u)}}}function QE(u){return u in Mp?Mp[u]:Mp[u]="on"+u}function Hx(u,d){if(u.da)u=!0;else{d=new xa(d,this);var f=u.listener,m=u.ha||u.src;u.fa&&Np(u),u=f.call(m,d)}return u}function Pp(u){return u=u[Rp],u instanceof Yu?u:null}var xp="__closure_events_fn_"+(1e9*Math.random()>>>0);function kp(u){return typeof u=="function"?u:(u[xp]||(u[xp]=function(d){return u.handleEvent(d)}),u[xp])}function pt(){jr.call(this),this.i=new Yu(this),this.M=this,this.F=null}C(pt,jr),pt.prototype[ka]=!0,pt.prototype.removeEventListener=function(u,d,f,m){KE(this,u,d,f,m)};function At(u,d){var f,m=u.F;if(m)for(f=[];m;m=m.F)f.push(m);if(u=u.M,m=d.type||d,typeof d=="string")d=new ft(d,u);else if(d instanceof ft)d.target=d.target||u;else{var D=d;d=new ft(m,u),b(d,D)}if(D=!0,f)for(var R=f.length-1;0<=R;R--){var j=d.g=f[R];D=Ju(j,m,!0,d)&&D}if(j=d.g=u,D=Ju(j,m,!0,d)&&D,D=Ju(j,m,!1,d)&&D,f)for(R=0;R<f.length;R++)j=d.g=f[R],D=Ju(j,m,!1,d)&&D}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var u=this.i,d;for(d in u.g){for(var f=u.g[d],m=0;m<f.length;m++)Qu(f[m]);delete u.g[d],u.h--}}this.F=null},pt.prototype.K=function(u,d,f,m){return this.i.add(String(u),d,!1,f,m)},pt.prototype.L=function(u,d,f,m){return this.i.add(String(u),d,!0,f,m)};function Ju(u,d,f,m){if(d=u.i.g[String(d)],!d)return!0;d=d.concat();for(var D=!0,R=0;R<d.length;++R){var j=d[R];if(j&&!j.da&&j.capture==f){var Me=j.listener,ct=j.ha||j.src;j.fa&&Sp(u.i,j),D=Me.call(ct,m)!==!1&&D}}return D&&!m.defaultPrevented}function YE(u,d,f){if(typeof u=="function")f&&(u=y(u,f));else if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(u,d||0)}function JE(u){u.g=YE(()=>{u.g=null,u.i&&(u.i=!1,JE(u))},u.l);let d=u.h;u.h=null,u.m.apply(null,d)}class zx extends jr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:JE(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Oa(u){jr.call(this),this.h=u,this.g={}}C(Oa,jr);var ZE=[];function XE(u){Y(u.g,function(d,f){this.g.hasOwnProperty(f)&&Np(d)},u),u.g={}}Oa.prototype.N=function(){Oa.aa.N.call(this),XE(this)},Oa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Op=a.JSON.stringify,qx=a.JSON.parse,Gx=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Lp(){}Lp.prototype.h=null;function eb(u){return u.h||(u.h=u.i())}function tb(){}var La={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Fp(){ft.call(this,"d")}C(Fp,ft);function Vp(){ft.call(this,"c")}C(Vp,ft);var Ui={},nb=null;function Zu(){return nb=nb||new pt}Ui.La="serverreachability";function rb(u){ft.call(this,Ui.La,u)}C(rb,ft);function Fa(u){let d=Zu();At(d,new rb(d))}Ui.STAT_EVENT="statevent";function ib(u,d){ft.call(this,Ui.STAT_EVENT,u),this.stat=d}C(ib,ft);function Rt(u){let d=Zu();At(d,new ib(d,u))}Ui.Ma="timingevent";function sb(u,d){ft.call(this,Ui.Ma,u),this.size=d}C(sb,ft);function Va(u,d){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},d)}function Ua(){this.g=!0}Ua.prototype.xa=function(){this.g=!1};function Wx(u,d,f,m,D,R){u.info(function(){if(u.g)if(R)for(var j="",Me=R.split("&"),ct=0;ct<Me.length;ct++){var Ee=Me[ct].split("=");if(1<Ee.length){var mt=Ee[0];Ee=Ee[1];var gt=mt.split("_");j=2<=gt.length&&gt[1]=="type"?j+(mt+"="+Ee+"&"):j+(mt+"=redacted&")}}else j=null;else j=R;return"XMLHTTP REQ ("+m+") [attempt "+D+"]: "+d+`
`+f+`
`+j})}function Kx(u,d,f,m,D,R,j){u.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+D+"]: "+d+`
`+f+`
`+R+" "+j})}function Bs(u,d,f,m){u.info(function(){return"XMLHTTP TEXT ("+d+"): "+Yx(u,f)+(m?" "+m:"")})}function Qx(u,d){u.info(function(){return"TIMEOUT: "+d})}Ua.prototype.info=function(){};function Yx(u,d){if(!u.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(u=0;u<f.length;u++)if(Array.isArray(f[u])){var m=f[u];if(!(2>m.length)){var D=m[1];if(Array.isArray(D)&&!(1>D.length)){var R=D[0];if(R!="noop"&&R!="stop"&&R!="close")for(var j=1;j<D.length;j++)D[j]=""}}}}return Op(f)}catch{return d}}var Xu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ob={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Up;function el(){}C(el,Lp),el.prototype.g=function(){return new XMLHttpRequest},el.prototype.i=function(){return{}},Up=new el;function Br(u,d,f,m){this.j=u,this.i=d,this.l=f,this.R=m||1,this.U=new Oa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ab}function ab(){this.i=null,this.g="",this.h=!1}var cb={},jp={};function Bp(u,d,f){u.L=1,u.v=il(rr(d)),u.m=f,u.P=!0,ub(u,null)}function ub(u,d){u.F=Date.now(),tl(u),u.A=rr(u.v);var f=u.A,m=u.R;Array.isArray(m)||(m=[String(m)]),bb(f.i,"t",m),u.C=0,f=u.j.J,u.h=new ab,u.g=Bb(u.j,f?d:null,!u.m),0<u.O&&(u.M=new zx(y(u.Y,u,u.g),u.O)),d=u.U,f=u.g,m=u.ca;var D="readystatechange";Array.isArray(D)||(D&&(ZE[0]=D.toString()),D=ZE);for(var R=0;R<D.length;R++){var j=qE(f,D[R],m||d.handleEvent,!1,d.h||d);if(!j)break;d.g[j.key]=j}d=u.H?_(u.H):{},u.m?(u.u||(u.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,d)):(u.u="GET",u.g.ea(u.A,u.u,null,d)),Fa(),Wx(u.i,u.u,u.A,u.l,u.R,u.m)}Br.prototype.ca=function(u){u=u.target;let d=this.M;d&&ir(u)==3?d.j():this.Y(u)},Br.prototype.Y=function(u){try{if(u==this.g)e:{let gt=ir(this.g);var d=this.g.Ba();let zs=this.g.Z();if(!(3>gt)&&(gt!=3||this.g&&(this.h.h||this.g.oa()||Mb(this.g)))){this.J||gt!=4||d==7||(d==8||0>=zs?Fa(3):Fa(2)),$p(this);var f=this.g.Z();this.X=f;t:if(lb(this)){var m=Mb(this.g);u="";var D=m.length,R=ir(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ji(this),ja(this);var j="";break t}this.h.i=new a.TextDecoder}for(d=0;d<D;d++)this.h.h=!0,u+=this.h.i.decode(m[d],{stream:!(R&&d==D-1)});m.length=0,this.h.g+=u,this.C=0,j=this.h.g}else j=this.g.oa();if(this.o=f==200,Kx(this.i,this.u,this.A,this.l,this.R,gt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Me,ct=this.g;if((Me=ct.g?ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(Me)){var Ee=Me;break t}}Ee=null}if(f=Ee)Bs(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Hp(this,f);else{this.o=!1,this.s=3,Rt(12),ji(this),ja(this);break e}}if(this.P){f=!0;let hn;for(;!this.J&&this.C<j.length;)if(hn=Jx(this,j),hn==jp){gt==4&&(this.s=4,Rt(14),f=!1),Bs(this.i,this.l,null,"[Incomplete Response]");break}else if(hn==cb){this.s=4,Rt(15),Bs(this.i,this.l,j,"[Invalid Chunk]"),f=!1;break}else Bs(this.i,this.l,hn,null),Hp(this,hn);if(lb(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),gt!=4||j.length!=0||this.h.h||(this.s=1,Rt(16),f=!1),this.o=this.o&&f,!f)Bs(this.i,this.l,j,"[Invalid Chunked Response]"),ji(this),ja(this);else if(0<j.length&&!this.W){this.W=!0;var mt=this.j;mt.g==this&&mt.ba&&!mt.M&&(mt.j.info("Great, no buffering proxy detected. Bytes received: "+j.length),Qp(mt),mt.M=!0,Rt(11))}}else Bs(this.i,this.l,j,null),Hp(this,j);gt==4&&ji(this),this.o&&!this.J&&(gt==4?Fb(this.j,this):(this.o=!1,tl(this)))}else pk(this.g),f==400&&0<j.indexOf("Unknown SID")?(this.s=3,Rt(12)):(this.s=0,Rt(13)),ji(this),ja(this)}}}catch{}finally{}};function lb(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Jx(u,d){var f=u.C,m=d.indexOf(`
`,f);return m==-1?jp:(f=Number(d.substring(f,m)),isNaN(f)?cb:(m+=1,m+f>d.length?jp:(d=d.slice(m,m+f),u.C=m+f,d)))}Br.prototype.cancel=function(){this.J=!0,ji(this)};function tl(u){u.S=Date.now()+u.I,db(u,u.I)}function db(u,d){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Va(y(u.ba,u),d)}function $p(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Br.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(Qx(this.i,this.A),this.L!=2&&(Fa(),Rt(17)),ji(this),this.s=2,ja(this)):db(this,this.S-u)};function ja(u){u.j.G==0||u.J||Fb(u.j,u)}function ji(u){$p(u);var d=u.M;d&&typeof d.ma=="function"&&d.ma(),u.M=null,XE(u.U),u.g&&(d=u.g,u.g=null,d.abort(),d.ma())}function Hp(u,d){try{var f=u.j;if(f.G!=0&&(f.g==u||zp(f.h,u))){if(!u.K&&zp(f.h,u)&&f.G==3){try{var m=f.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var D=m;if(D[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<u.F)ul(f),al(f);else break e;Kp(f),Rt(18)}}else f.za=D[1],0<f.za-f.T&&37500>D[2]&&f.F&&f.v==0&&!f.C&&(f.C=Va(y(f.Za,f),6e3));if(1>=pb(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else $i(f,11)}else if((u.K||f.g==u)&&ul(f),!H(d))for(D=f.Da.g.parse(d),d=0;d<D.length;d++){let Ee=D[d];if(f.T=Ee[0],Ee=Ee[1],f.G==2)if(Ee[0]=="c"){f.K=Ee[1],f.ia=Ee[2];let mt=Ee[3];mt!=null&&(f.la=mt,f.j.info("VER="+f.la));let gt=Ee[4];gt!=null&&(f.Aa=gt,f.j.info("SVER="+f.Aa));let zs=Ee[5];zs!=null&&typeof zs=="number"&&0<zs&&(m=1.5*zs,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;let hn=u.g;if(hn){let dl=hn.g?hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(dl){var R=m.h;R.g||dl.indexOf("spdy")==-1&&dl.indexOf("quic")==-1&&dl.indexOf("h2")==-1||(R.j=R.l,R.g=new Set,R.h&&(qp(R,R.h),R.h=null))}if(m.D){let Yp=hn.g?hn.g.getResponseHeader("X-HTTP-Session-Id"):null;Yp&&(m.ya=Yp,Oe(m.I,m.D,Yp))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-u.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var j=u;if(m.qa=jb(m,m.J?m.ia:null,m.W),j.K){mb(m.h,j);var Me=j,ct=m.L;ct&&(Me.I=ct),Me.B&&($p(Me),tl(Me)),m.g=j}else Ob(m);0<f.i.length&&cl(f)}else Ee[0]!="stop"&&Ee[0]!="close"||$i(f,7);else f.G==3&&(Ee[0]=="stop"||Ee[0]=="close"?Ee[0]=="stop"?$i(f,7):Wp(f):Ee[0]!="noop"&&f.l&&f.l.ta(Ee),f.v=0)}}Fa(4)}catch{}}var Zx=class{constructor(u,d){this.g=u,this.map=d}};function hb(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function fb(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function pb(u){return u.h?1:u.g?u.g.size:0}function zp(u,d){return u.h?u.h==d:u.g?u.g.has(d):!1}function qp(u,d){u.g?u.g.add(d):u.h=d}function mb(u,d){u.h&&u.h==d?u.h=null:u.g&&u.g.has(d)&&u.g.delete(d)}hb.prototype.cancel=function(){if(this.i=gb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function gb(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let d=u.i;for(let f of u.g.values())d=d.concat(f.D);return d}return M(u.i)}function Xx(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var d=[],f=u.length,m=0;m<f;m++)d.push(u[m]);return d}d=[],f=0;for(m in u)d[f++]=u[m];return d}function ek(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var d=[];u=u.length;for(var f=0;f<u;f++)d.push(f);return d}d=[],f=0;for(let m in u)d[f++]=m;return d}}}function yb(u,d){if(u.forEach&&typeof u.forEach=="function")u.forEach(d,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,d,void 0);else for(var f=ek(u),m=Xx(u),D=m.length,R=0;R<D;R++)d.call(void 0,m[R],f&&f[R],u)}var vb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function tk(u,d){if(u){u=u.split("&");for(var f=0;f<u.length;f++){var m=u[f].indexOf("="),D=null;if(0<=m){var R=u[f].substring(0,m);D=u[f].substring(m+1)}else R=u[f];d(R,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function Bi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Bi){this.h=u.h,nl(this,u.j),this.o=u.o,this.g=u.g,rl(this,u.s),this.l=u.l;var d=u.i,f=new Ha;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),_b(this,f),this.m=u.m}else u&&(d=String(u).match(vb))?(this.h=!1,nl(this,d[1]||"",!0),this.o=Ba(d[2]||""),this.g=Ba(d[3]||"",!0),rl(this,d[4]),this.l=Ba(d[5]||"",!0),_b(this,d[6]||"",!0),this.m=Ba(d[7]||"")):(this.h=!1,this.i=new Ha(null,this.h))}Bi.prototype.toString=function(){var u=[],d=this.j;d&&u.push($a(d,Ib,!0),":");var f=this.g;return(f||d=="file")&&(u.push("//"),(d=this.o)&&u.push($a(d,Ib,!0),"@"),u.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&u.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&u.push("/"),u.push($a(f,f.charAt(0)=="/"?ik:rk,!0))),(f=this.i.toString())&&u.push("?",f),(f=this.m)&&u.push("#",$a(f,ok)),u.join("")};function rr(u){return new Bi(u)}function nl(u,d,f){u.j=f?Ba(d,!0):d,u.j&&(u.j=u.j.replace(/:$/,""))}function rl(u,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);u.s=d}else u.s=null}function _b(u,d,f){d instanceof Ha?(u.i=d,ak(u.i,u.h)):(f||(d=$a(d,sk)),u.i=new Ha(d,u.h))}function Oe(u,d,f){u.i.set(d,f)}function il(u){return Oe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ba(u,d){return u?d?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function $a(u,d,f){return typeof u=="string"?(u=encodeURI(u).replace(d,nk),f&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function nk(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ib=/[#\/\?@]/g,rk=/[#\?:]/g,ik=/[#\?]/g,sk=/[#\?@]/g,ok=/#/g;function Ha(u,d){this.h=this.g=null,this.i=u||null,this.j=!!d}function $r(u){u.g||(u.g=new Map,u.h=0,u.i&&tk(u.i,function(d,f){u.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=Ha.prototype,n.add=function(u,d){$r(this),this.i=null,u=$s(this,u);var f=this.g.get(u);return f||this.g.set(u,f=[]),f.push(d),this.h+=1,this};function wb(u,d){$r(u),d=$s(u,d),u.g.has(d)&&(u.i=null,u.h-=u.g.get(d).length,u.g.delete(d))}function Eb(u,d){return $r(u),d=$s(u,d),u.g.has(d)}n.forEach=function(u,d){$r(this),this.g.forEach(function(f,m){f.forEach(function(D){u.call(d,D,m,this)},this)},this)},n.na=function(){$r(this);let u=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let m=0;m<d.length;m++){let D=u[m];for(let R=0;R<D.length;R++)f.push(d[m])}return f},n.V=function(u){$r(this);let d=[];if(typeof u=="string")Eb(this,u)&&(d=d.concat(this.g.get($s(this,u))));else{u=Array.from(this.g.values());for(let f=0;f<u.length;f++)d=d.concat(u[f])}return d},n.set=function(u,d){return $r(this),this.i=null,u=$s(this,u),Eb(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[d]),this.h+=1,this},n.get=function(u,d){return u?(u=this.V(u),0<u.length?String(u[0]):d):d};function bb(u,d,f){wb(u,d),0<f.length&&(u.i=null,u.g.set($s(u,d),M(f)),u.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var m=d[f];let R=encodeURIComponent(String(m)),j=this.V(m);for(m=0;m<j.length;m++){var D=R;j[m]!==""&&(D+="="+encodeURIComponent(String(j[m]))),u.push(D)}}return this.i=u.join("&")};function $s(u,d){return d=String(d),u.j&&(d=d.toLowerCase()),d}function ak(u,d){d&&!u.j&&($r(u),u.i=null,u.g.forEach(function(f,m){var D=m.toLowerCase();m!=D&&(wb(this,m),bb(this,D,f))},u)),u.j=d}function ck(u,d){let f=new Ua;if(a.Image){let m=new Image;m.onload=v(Hr,f,"TestLoadImage: loaded",!0,d,m),m.onerror=v(Hr,f,"TestLoadImage: error",!1,d,m),m.onabort=v(Hr,f,"TestLoadImage: abort",!1,d,m),m.ontimeout=v(Hr,f,"TestLoadImage: timeout",!1,d,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=u}else d(!1)}function uk(u,d){let f=new Ua,m=new AbortController,D=setTimeout(()=>{m.abort(),Hr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(u,{signal:m.signal}).then(R=>{clearTimeout(D),R.ok?Hr(f,"TestPingServer: ok",!0,d):Hr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(D),Hr(f,"TestPingServer: error",!1,d)})}function Hr(u,d,f,m,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),m(f)}catch{}}function lk(){this.g=new Gx}function dk(u,d,f){let m=f||"";try{yb(u,function(D,R){let j=D;l(D)&&(j=Op(D)),d.push(m+R+"="+encodeURIComponent(j))})}catch(D){throw d.push(m+"type="+encodeURIComponent("_badmap")),D}}function za(u){this.l=u.Ub||null,this.j=u.eb||!1}C(za,Lp),za.prototype.g=function(){return new sl(this.l,this.j)},za.prototype.i=function(u){return function(){return u}}({});function sl(u,d){pt.call(this),this.D=u,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(sl,pt),n=sl.prototype,n.open=function(u,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=d,this.readyState=1,Ga(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(d.body=u),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,qa(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ga(this)),this.g&&(this.readyState=3,Ga(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Tb(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Tb(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var d=u.value?u.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!u.done}))&&(this.response=this.responseText+=d)}u.done?qa(this):Ga(this),this.readyState==3&&Tb(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,qa(this))},n.Qa=function(u){this.g&&(this.response=u,qa(this))},n.ga=function(){this.g&&qa(this)};function qa(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Ga(u)}n.setRequestHeader=function(u,d){this.u.append(u,d)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,u.push(f[0]+": "+f[1]),f=d.next();return u.join(`\r
`)};function Ga(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(sl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Cb(u){let d="";return Y(u,function(f,m){d+=m,d+=":",d+=f,d+=`\r
`}),d}function Gp(u,d,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=Cb(f),typeof u=="string"?f!=null&&encodeURIComponent(String(f)):Oe(u,d,f))}function je(u){pt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(je,pt);var hk=/^https?$/i,fk=["POST","PUT"];n=je.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,d,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);d=d?d.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Up.g(),this.v=this.o?eb(this.o):eb(Up),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(d,String(u),!0),this.B=!1}catch(R){Db(this,R);return}if(u=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var D in m)f.set(D,m[D]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let R of m.keys())f.set(R,m.get(R));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(R=>R.toLowerCase()=="content-type"),D=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(fk,d,void 0))||m||D||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[R,j]of f)this.g.setRequestHeader(R,j);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Rb(this),this.u=!0,this.g.send(u),this.u=!1}catch(R){Db(this,R)}};function Db(u,d){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=d,u.m=5,Sb(u),ol(u)}function Sb(u){u.A||(u.A=!0,At(u,"complete"),At(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,At(this,"complete"),At(this,"abort"),ol(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ol(this,!0)),je.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ab(this):this.bb())},n.bb=function(){Ab(this)};function Ab(u){if(u.h&&typeof o<"u"&&(!u.v[1]||ir(u)!=4||u.Z()!=2)){if(u.u&&ir(u)==4)YE(u.Ea,0,u);else if(At(u,"readystatechange"),ir(u)==4){u.h=!1;try{let j=u.Z();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var m;if(m=j===0){var D=String(u.D).match(vb)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),m=!hk.test(D?D.toLowerCase():"")}f=m}if(f)At(u,"complete"),At(u,"success");else{u.m=6;try{var R=2<ir(u)?u.g.statusText:""}catch{R=""}u.l=R+" ["+u.Z()+"]",Sb(u)}}finally{ol(u)}}}}function ol(u,d){if(u.g){Rb(u);let f=u.g,m=u.v[0]?()=>{}:null;u.g=null,u.v=null,d||At(u,"ready");try{f.onreadystatechange=m}catch{}}}function Rb(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function ir(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<ir(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var d=this.g.responseText;return u&&d.indexOf(u)==0&&(d=d.substring(u.length)),qx(d)}};function Mb(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function pk(u){let d={};u=(u.g&&2<=ir(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<u.length;m++){if(H(u[m]))continue;var f=T(u[m]);let D=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let R=d[D]||[];d[D]=R,R.push(f)}E(d,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wa(u,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[u]||d}function Nb(u){this.Aa=0,this.i=[],this.j=new Ua,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wa("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wa("baseRetryDelayMs",5e3,u),this.cb=Wa("retryDelaySeedMs",1e4,u),this.Wa=Wa("forwardChannelMaxRetries",2,u),this.wa=Wa("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new hb(u&&u.concurrentRequestLimit),this.Da=new lk,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Nb.prototype,n.la=8,n.G=1,n.connect=function(u,d,f,m){Rt(0),this.W=u,this.H=d||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=jb(this,null,this.W),cl(this)};function Wp(u){if(Pb(u),u.G==3){var d=u.U++,f=rr(u.I);if(Oe(f,"SID",u.K),Oe(f,"RID",d),Oe(f,"TYPE","terminate"),Ka(u,f),d=new Br(u,u.j,d),d.L=2,d.v=il(rr(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=Bb(d.j,null),d.g.ea(d.v)),d.F=Date.now(),tl(d)}Ub(u)}function al(u){u.g&&(Qp(u),u.g.cancel(),u.g=null)}function Pb(u){al(u),u.u&&(a.clearTimeout(u.u),u.u=null),ul(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function cl(u){if(!fb(u.h)&&!u.s){u.s=!0;var d=u.Ga;Na||zE(),Pa||(Na(),Pa=!0),Dp.add(d,u),u.B=0}}function mk(u,d){return pb(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=d.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Va(y(u.Ga,u,d),Vb(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let D=new Br(this,this.j,u),R=this.o;if(this.S&&(R?(R=_(R),b(R,this.S)):R=this.S),this.m!==null||this.O||(D.H=R,R=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=kb(this,D,d),f=rr(this.I),Oe(f,"RID",u),Oe(f,"CVER",22),this.D&&Oe(f,"X-HTTP-Session-Id",this.D),Ka(this,f),R&&(this.O?d="headers="+encodeURIComponent(String(Cb(R)))+"&"+d:this.m&&Gp(f,this.m,R)),qp(this.h,D),this.Ua&&Oe(f,"TYPE","init"),this.P?(Oe(f,"$req",d),Oe(f,"SID","null"),D.T=!0,Bp(D,f,null)):Bp(D,f,d),this.G=2}}else this.G==3&&(u?xb(this,u):this.i.length==0||fb(this.h)||xb(this))};function xb(u,d){var f;d?f=d.l:f=u.U++;let m=rr(u.I);Oe(m,"SID",u.K),Oe(m,"RID",f),Oe(m,"AID",u.T),Ka(u,m),u.m&&u.o&&Gp(m,u.m,u.o),f=new Br(u,u.j,f,u.B+1),u.m===null&&(f.H=u.o),d&&(u.i=d.D.concat(u.i)),d=kb(u,f,1e3),f.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),qp(u.h,f),Bp(f,m,d)}function Ka(u,d){u.H&&Y(u.H,function(f,m){Oe(d,m,f)}),u.l&&yb({},function(f,m){Oe(d,m,f)})}function kb(u,d,f){f=Math.min(u.i.length,f);var m=u.l?y(u.l.Na,u.l,u):null;e:{var D=u.i;let R=-1;for(;;){let j=["count="+f];R==-1?0<f?(R=D[0].g,j.push("ofs="+R)):R=0:j.push("ofs="+R);let Me=!0;for(let ct=0;ct<f;ct++){let Ee=D[ct].g,mt=D[ct].map;if(Ee-=R,0>Ee)R=Math.max(0,D[ct].g-100),Me=!1;else try{dk(mt,j,"req"+Ee+"_")}catch{m&&m(mt)}}if(Me){m=j.join("&");break e}}}return u=u.i.splice(0,f),d.D=u,m}function Ob(u){if(!u.g&&!u.u){u.Y=1;var d=u.Fa;Na||zE(),Pa||(Na(),Pa=!0),Dp.add(d,u),u.v=0}}function Kp(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Va(y(u.Fa,u),Vb(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,Lb(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Va(y(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Rt(10),al(this),Lb(this))};function Qp(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Lb(u){u.g=new Br(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var d=rr(u.qa);Oe(d,"RID","rpc"),Oe(d,"SID",u.K),Oe(d,"AID",u.T),Oe(d,"CI",u.F?"0":"1"),!u.F&&u.ja&&Oe(d,"TO",u.ja),Oe(d,"TYPE","xmlhttp"),Ka(u,d),u.m&&u.o&&Gp(d,u.m,u.o),u.L&&(u.g.I=u.L);var f=u.g;u=u.ia,f.L=1,f.v=il(rr(d)),f.m=null,f.P=!0,ub(f,u)}n.Za=function(){this.C!=null&&(this.C=null,al(this),Kp(this),Rt(19))};function ul(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Fb(u,d){var f=null;if(u.g==d){ul(u),Qp(u),u.g=null;var m=2}else if(zp(u.h,d))f=d.D,mb(u.h,d),m=1;else return;if(u.G!=0){if(d.o)if(m==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var D=u.B;m=Zu(),At(m,new sb(m,f)),cl(u)}else Ob(u);else if(D=d.s,D==3||D==0&&0<d.X||!(m==1&&mk(u,d)||m==2&&Kp(u)))switch(f&&0<f.length&&(d=u.h,d.i=d.i.concat(f)),D){case 1:$i(u,5);break;case 4:$i(u,10);break;case 3:$i(u,6);break;default:$i(u,2)}}}function Vb(u,d){let f=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(f*=2),f*d}function $i(u,d){if(u.j.info("Error code "+d),d==2){var f=y(u.fb,u),m=u.Xa;let D=!m;m=new Bi(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||nl(m,"https"),il(m),D?ck(m.toString(),f):uk(m.toString(),f)}else Rt(2);u.G=0,u.l&&u.l.sa(d),Ub(u),Pb(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function Ub(u){if(u.G=0,u.ka=[],u.l){let d=gb(u.h);(d.length!=0||u.i.length!=0)&&(A(u.ka,d),A(u.ka,u.i),u.h.i.length=0,M(u.i),u.i.length=0),u.l.ra()}}function jb(u,d,f){var m=f instanceof Bi?rr(f):new Bi(f);if(m.g!="")d&&(m.g=d+"."+m.g),rl(m,m.s);else{var D=a.location;m=D.protocol,d=d?d+"."+D.hostname:D.hostname,D=+D.port;var R=new Bi(null);m&&nl(R,m),d&&(R.g=d),D&&rl(R,D),f&&(R.l=f),m=R}return f=u.D,d=u.ya,f&&d&&Oe(m,f,d),Oe(m,"VER",u.la),Ka(u,m),m}function Bb(u,d,f){if(d&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=u.Ca&&!u.pa?new je(new za({eb:f})):new je(u.pa),d.Ha(u.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function $b(){}n=$b.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ll(){}ll.prototype.g=function(u,d){return new Ht(u,d)};function Ht(u,d){pt.call(this),this.g=new Nb(d),this.l=u,this.h=d&&d.messageUrlParams||null,u=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(u?u["X-WebChannel-Content-Type"]=d.messageContentType:u={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(u?u["X-WebChannel-Client-Profile"]=d.va:u={"X-WebChannel-Client-Profile":d.va}),this.g.S=u,(u=d&&d.Sb)&&!H(u)&&(this.g.m=u),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!H(d)&&(this.g.D=d,u=this.h,u!==null&&d in u&&(u=this.h,d in u&&delete u[d])),this.j=new Hs(this)}C(Ht,pt),Ht.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ht.prototype.close=function(){Wp(this.g)},Ht.prototype.o=function(u){var d=this.g;if(typeof u=="string"){var f={};f.__data__=u,u=f}else this.u&&(f={},f.__data__=Op(u),u=f);d.i.push(new Zx(d.Ya++,u)),d.G==3&&cl(d)},Ht.prototype.N=function(){this.g.l=null,delete this.j,Wp(this.g),delete this.g,Ht.aa.N.call(this)};function Hb(u){Fp.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var d=u.__sm__;if(d){e:{for(let f in d){u=f;break e}u=void 0}(this.i=u)&&(u=this.i,d=d!==null&&u in d?d[u]:void 0),this.data=d}else this.data=u}C(Hb,Fp);function zb(){Vp.call(this),this.status=1}C(zb,Vp);function Hs(u){this.g=u}C(Hs,$b),Hs.prototype.ua=function(){At(this.g,"a")},Hs.prototype.ta=function(u){At(this.g,new Hb(u))},Hs.prototype.sa=function(u){At(this.g,new zb)},Hs.prototype.ra=function(){At(this.g,"b")},ll.prototype.createWebChannel=ll.prototype.g,Ht.prototype.send=Ht.prototype.o,Ht.prototype.open=Ht.prototype.m,Ht.prototype.close=Ht.prototype.close,dI=Lr.createWebChannelTransport=function(){return new ll},lI=Lr.getStatEventTarget=function(){return Zu()},uI=Lr.Event=Ui,lf=Lr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Xu.NO_ERROR=0,Xu.TIMEOUT=8,Xu.HTTP_ERROR=6,uu=Lr.ErrorCode=Xu,ob.COMPLETE="complete",cI=Lr.EventType=ob,tb.EventType=La,La.OPEN="a",La.CLOSE="b",La.ERROR="c",La.MESSAGE="d",pt.prototype.listen=pt.prototype.K,Xo=Lr.WebChannel=tb,Hq=Lr.FetchXmlHttpFactory=za,je.prototype.listenOnce=je.prototype.L,je.prototype.getLastError=je.prototype.Ka,je.prototype.getLastErrorCode=je.prototype.Ba,je.prototype.getStatus=je.prototype.Z,je.prototype.getResponseJson=je.prototype.Oa,je.prototype.getResponseText=je.prototype.oa,je.prototype.send=je.prototype.ea,je.prototype.setWithCredentials=je.prototype.Ha,aI=Lr.XhrIo=je}).apply(typeof uf<"u"?uf:typeof self<"u"?self:typeof window<"u"?window:{});var SM="@firebase/firestore";var Ct=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ct.UNAUTHENTICATED=new Ct(null),Ct.GOOGLE_CREDENTIALS=new Ct("google-credentials-uid"),Ct.FIRST_PARTY=new Ct("first-party-uid"),Ct.MOCK_USER=new Ct("mock-user");var ya="10.14.0";var Rs=new un("@firebase/firestore");function lu(){return Rs.logLevel}function G(n,...e){if(Rs.logLevel<=pe.DEBUG){let t=e.map(Zw);Rs.debug(`Firestore (${ya}): ${n}`,...t)}}function Fr(n,...e){if(Rs.logLevel<=pe.ERROR){let t=e.map(Zw);Rs.error(`Firestore (${ya}): ${n}`,...t)}}function gu(n,...e){if(Rs.logLevel<=pe.WARN){let t=e.map(Zw);Rs.warn(`Firestore (${ya}): ${n}`,...t)}}function Zw(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function re(n="Unexpected state"){let e=`FIRESTORE (${ya}) INTERNAL ASSERTION FAILED: `+n;throw Fr(e),new Error(e)}function Re(n,e){n||re()}function se(n,e){return n}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},$=class extends Ot{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Kn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var gI=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},yI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ct.UNAUTHENTICATED))}shutdown(){}};var vI=class{constructor(e){this.t=e,this.currentUser=Ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Re(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new Kn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Kn,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>g(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Kn)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Re(typeof r.accessToken=="string"),new gI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Re(e===null||typeof e=="string"),new Ct(e)}},_I=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Ct.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},II=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new _I(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}},wI=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},EI=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Re(this.o===void 0);let r=s=>{s.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,G("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Re(typeof t.token=="string"),this.R=t.token,new wI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function zq(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var mf=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=zq(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function Te(n,e){return n<e?-1:n>e?1:0}function aa(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var dt=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new $(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new $(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new $(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Te(this.nanoseconds,e.nanoseconds):Te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ue=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new dt(0,0))}static max(){return new n(new dt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var gf=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&re(),r===void 0?r=e.length-t:r>e.length-t&&re(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Ue=class n extends gf{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new $(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},qq=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Xt=class n extends gf{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return qq.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new $(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new $(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new $(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new $(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var ee=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ue.fromString(e))}static fromName(e){return new n(Ue.fromString(e).popFirst(5))}static empty(){return new n(Ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ue.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ue(e.slice()))}};var bI=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};bI.UNKNOWN_ID=-1;function Gq(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ue.fromTimestamp(r===1e9?new dt(t+1,0):new dt(t,r));return new Ms(i,ee.empty(),e)}function Wq(n){return new Ms(n.readTime,n.key,-1)}var Ms=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ue.min(),ee.empty(),-1)}static max(){return new n(ue.max(),ee.empty(),-1)}};function Kq(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ee.comparator(n.documentKey,e.documentKey),t!==0?t:Te(n.largestBatchId,e.largestBatchId))}var Qq="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",TI=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Nu(n){return g(this,null,function*(){if(n.code!==N.FAILED_PRECONDITION||n.message!==Qq)throw n;G("LocalStore","Unexpectedly lost primary lease")})}var L=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;t(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function Yq(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Pu(n){return n.name==="IndexedDbTransactionError"}var aN=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function zf(n){return n==null}function yu(n){return n===0&&1/n==-1/0}function Jq(n){return typeof n=="number"&&Number.isInteger(n)&&!yu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var Zq=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],hne=[...Zq,"documentOverlays"],Xq=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],e3=Xq,t3=[...e3,"indexConfiguration","indexState","indexEntries"];var fne=[...t3,"globals"];function AM(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Fs(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function cN(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var ze=class n{constructor(e,t){this.comparator=e,this.root=t||Qn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ra(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ra(this.root,e,this.comparator,!1)}getReverseIterator(){return new ra(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ra(this.root,e,this.comparator,!0)}},ra=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Qn=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw re();let e=this.left.check();if(e!==this.right.check())throw re();return e+(this.isRed()?0:1)}};Qn.EMPTY=null,Qn.RED=!0,Qn.BLACK=!1;Qn.EMPTY=new class{constructor(){this.size=0}get key(){throw re()}get value(){throw re()}get color(){throw re()}get left(){throw re()}get right(){throw re()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Qn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Dt=class n{constructor(e){this.comparator=e,this.data=new ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new yf(this.data.getIterator())}getIteratorFrom(e){return new yf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},yf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var dn=class n{constructor(e){this.fields=e,e.sort(Xt.comparator)}static empty(){return new n([])}unionWith(e){let t=new Dt(Xt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return aa(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var vf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var St=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new vf("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};St.EMPTY_BYTE_STRING=new St("");var n3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vr(n){if(Re(!!n),typeof n=="string"){let e=0,t=n3.exec(n);if(Re(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ve(n.seconds),nanos:Ve(n.nanos)}}function Ve(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Pi(n){return typeof n=="string"?St.fromBase64String(n):St.fromUint8Array(n)}function Xw(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function eE(n){let e=n.mapValue.fields.__previous_value__;return Xw(e)?eE(e):e}function vu(n){let e=Vr(n.mapValue.fields.__local_write_time__.timestampValue);return new dt(e.seconds,e.nanos)}var CI=class{constructor(e,t,r,i,s,o,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},_f=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var df={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ns(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Xw(n)?4:lN(n)?9007199254740991:uN(n)?10:11:re()}function Xn(n,e){if(n===e)return!0;let t=Ns(n);if(t!==Ns(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return vu(n).isEqual(vu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Vr(i.timestampValue),a=Vr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return Pi(i.bytesValue).isEqual(Pi(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Ve(i.geoPointValue.latitude)===Ve(s.geoPointValue.latitude)&&Ve(i.geoPointValue.longitude)===Ve(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ve(i.integerValue)===Ve(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Ve(i.doubleValue),a=Ve(s.doubleValue);return o===a?yu(o)===yu(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return aa(n.arrayValue.values||[],e.arrayValue.values||[],Xn);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(AM(o)!==AM(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Xn(o[c],a[c])))return!1;return!0}(n,e);default:return re()}}function _u(n,e){return(n.values||[]).find(t=>Xn(t,e))!==void 0}function ca(n,e){if(n===e)return 0;let t=Ns(n),r=Ns(e);if(t!==r)return Te(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Te(n.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Ve(s.integerValue||s.doubleValue),c=Ve(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return RM(n.timestampValue,e.timestampValue);case 4:return RM(vu(n),vu(e));case 5:return Te(n.stringValue,e.stringValue);case 6:return function(s,o){let a=Pi(s),c=Pi(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let h=Te(a[l],c[l]);if(h!==0)return h}return Te(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let a=Te(Ve(s.latitude),Ve(o.latitude));return a!==0?a:Te(Ve(s.longitude),Ve(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return MM(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,c,l,h;let p=s.fields||{},y=o.fields||{},v=(a=p.value)===null||a===void 0?void 0:a.arrayValue,C=(c=y.value)===null||c===void 0?void 0:c.arrayValue,M=Te(((l=v?.values)===null||l===void 0?void 0:l.length)||0,((h=C?.values)===null||h===void 0?void 0:h.length)||0);return M!==0?M:MM(v,C)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===df.mapValue&&o===df.mapValue)return 0;if(s===df.mapValue)return 1;if(o===df.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},h=Object.keys(l);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){let y=Te(c[p],h[p]);if(y!==0)return y;let v=ca(a[c[p]],l[h[p]]);if(v!==0)return v}return Te(c.length,h.length)}(n.mapValue,e.mapValue);default:throw re()}}function RM(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Te(n,e);let t=Vr(n),r=Vr(e),i=Te(t.seconds,r.seconds);return i!==0?i:Te(t.nanos,r.nanos)}function MM(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=ca(t[i],r[i]);if(s)return s}return Te(t.length,r.length)}function ua(n){return DI(n)}function DI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Vr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Pi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ee.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=DI(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${DI(t.fields[o])}`;return i+"}"}(n.mapValue):re()}function NM(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function SI(n){return!!n&&"integerValue"in n}function tE(n){return!!n&&"arrayValue"in n}function PM(n){return!!n&&"nullValue"in n}function xM(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ff(n){return!!n&&"mapValue"in n}function uN(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function hu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Fs(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=hu(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=hu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function lN(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Zt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ff(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=hu(t)}setAll(e){let t=Xt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=hu(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());ff(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Xn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];ff(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Fs(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(hu(this.value))}};function dN(n){let e=[];return Fs(n.fields,(t,r)=>{let i=new Xt([t]);if(ff(r)){let s=dN(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new dn(e)}var Sn=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ue.min(),ue.min(),ue.min(),Zt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ue.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ue.min(),ue.min(),Zt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ue.min(),ue.min(),Zt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var la=class{constructor(e,t){this.position=e,this.inclusive=t}};function kM(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=ee.comparator(ee.fromName(o.referenceValue),t.key):r=ca(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function OM(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Xn(n.position[t],e.position[t]))return!1;return!0}var Ps=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function r3(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var If=class{},nt=class n extends If{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new RI(e,t,r):t==="array-contains"?new PI(e,r):t==="in"?new xI(e,r):t==="not-in"?new kI(e,r):t==="array-contains-any"?new OI(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new MI(e,r):new NI(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(ca(t,this.value)):t!==null&&Ns(this.value)===Ns(t)&&this.matchesComparison(ca(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return re()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},An=class n extends If{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return hN(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function hN(n){return n.op==="and"}function fN(n){return i3(n)&&hN(n)}function i3(n){for(let e of n.filters)if(e instanceof An)return!1;return!0}function AI(n){if(n instanceof nt)return n.field.canonicalString()+n.op.toString()+ua(n.value);if(fN(n))return n.filters.map(e=>AI(e)).join(",");{let e=n.filters.map(t=>AI(t)).join(",");return`${n.op}(${e})`}}function pN(n,e){return n instanceof nt?function(r,i){return i instanceof nt&&r.op===i.op&&r.field.isEqual(i.field)&&Xn(r.value,i.value)}(n,e):n instanceof An?function(r,i){return i instanceof An&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&pN(o,i.filters[a]),!0):!1}(n,e):void re()}function mN(n){return n instanceof nt?function(t){return`${t.field.canonicalString()} ${t.op} ${ua(t.value)}`}(n):n instanceof An?function(t){return t.op.toString()+" {"+t.getFilters().map(mN).join(" ,")+"}"}(n):"Filter"}var RI=class extends nt{constructor(e,t,r){super(e,t,r),this.key=ee.fromName(r.referenceValue)}matches(e){let t=ee.comparator(e.key,this.key);return this.matchesComparison(t)}},MI=class extends nt{constructor(e,t){super(e,"in",t),this.keys=gN("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},NI=class extends nt{constructor(e,t){super(e,"not-in",t),this.keys=gN("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function gN(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ee.fromName(r.referenceValue))}var PI=class extends nt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return tE(t)&&_u(t.arrayValue,this.value)}},xI=class extends nt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&_u(this.value.arrayValue,t)}},kI=class extends nt{constructor(e,t){super(e,"not-in",t)}matches(e){if(_u(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!_u(this.value.arrayValue,t)}},OI=class extends nt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!tE(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>_u(this.value.arrayValue,r))}};var LI=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function LM(n,e=null,t=[],r=[],i=null,s=null,o=null){return new LI(n,e,t,r,i,s,o)}function nE(n){let e=se(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>AI(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),zf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ua(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ua(r)).join(",")),e.ue=t}return e.ue}function rE(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!r3(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!pN(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!OM(n.startAt,e.startAt)&&OM(n.endAt,e.endAt)}function FI(n){return ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var xi=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function s3(n,e,t,r,i,s,o,a){return new xi(n,e,t,r,i,s,o,a)}function yN(n){return new xi(n)}function FM(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function vN(n){return n.collectionGroup!==null}function fu(n){let e=se(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Dt(Xt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Ps(s,r))}),t.has(Xt.keyField().canonicalString())||e.ce.push(new Ps(Xt.keyField(),r))}return e.ce}function Yn(n){let e=se(n);return e.le||(e.le=o3(e,fu(n))),e.le}function o3(n,e){if(n.limitType==="F")return LM(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Ps(i.field,s)});let t=n.endAt?new la(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new la(n.startAt.position,n.startAt.inclusive):null;return LM(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function VI(n,e){let t=n.filters.concat([e]);return new xi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function UI(n,e,t){return new xi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function qf(n,e){return rE(Yn(n),Yn(e))&&n.limitType===e.limitType}function _N(n){return`${nE(Yn(n))}|lt:${n.limitType}`}function ea(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>mN(i)).join(", ")}]`),zf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ua(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ua(i)).join(",")),`Target(${r})`}(Yn(n))}; limitType=${n.limitType})`}function Gf(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ee.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of fu(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let l=kM(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,fu(r),i)||r.endAt&&!function(o,a,c){let l=kM(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,fu(r),i))}(n,e)}function a3(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function IN(n){return(e,t)=>{let r=!1;for(let i of fu(n)){let s=c3(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function c3(n,e,t){let r=n.field.isKeyField()?ee.comparator(e.key,t.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?ca(c,l):re()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return re()}}var ki=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Fs(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return cN(this.inner)}size(){return this.innerSize}};var u3=new ze(ee.comparator);function Ur(){return u3}var wN=new ze(ee.comparator);function du(...n){let e=wN;for(let t of n)e=e.insert(t.key,t);return e}function EN(n){let e=wN;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ss(){return pu()}function bN(){return pu()}function pu(){return new ki(n=>n.toString(),(n,e)=>n.isEqual(e))}var l3=new ze(ee.comparator),d3=new Dt(ee.comparator);function ve(...n){let e=d3;for(let t of n)e=e.add(t);return e}var h3=new Dt(Te);function f3(){return h3}function iE(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yu(e)?"-0":e}}function TN(n){return{integerValue:""+n}}function p3(n,e){return Jq(e)?TN(e):iE(n,e)}var da=class{constructor(){this._=void 0}};function m3(n,e,t){return n instanceof ha?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Xw(s)&&(s=eE(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof xs?DN(n,e):n instanceof ks?SN(n,e):function(i,s){let o=CN(i,s),a=VM(o)+VM(i.Pe);return SI(o)&&SI(i.Pe)?TN(a):iE(i.serializer,a)}(n,e)}function g3(n,e,t){return n instanceof xs?DN(n,e):n instanceof ks?SN(n,e):t}function CN(n,e){return n instanceof fa?function(r){return SI(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var ha=class extends da{},xs=class extends da{constructor(e){super(),this.elements=e}};function DN(n,e){let t=AN(e);for(let r of n.elements)t.some(i=>Xn(i,r))||t.push(r);return{arrayValue:{values:t}}}var ks=class extends da{constructor(e){super(),this.elements=e}};function SN(n,e){let t=AN(e);for(let r of n.elements)t=t.filter(i=>!Xn(i,r));return{arrayValue:{values:t}}}var fa=class extends da{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function VM(n){return Ve(n.integerValue||n.doubleValue)}function AN(n){return tE(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function y3(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof xs&&i instanceof xs||r instanceof ks&&i instanceof ks?aa(r.elements,i.elements,Xn):r instanceof fa&&i instanceof fa?Xn(r.Pe,i.Pe):r instanceof ha&&i instanceof ha}(n.transform,e.transform)}var jI=class{constructor(e,t){this.version=e,this.transformResults=t}},Jn=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function pf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var pa=class{};function RN(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Iu(n.key,Jn.none()):new Os(n.key,n.data,Jn.none());{let t=n.data,r=Zt.empty(),i=new Dt(Xt.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new er(n.key,r,new dn(i.toArray()),Jn.none())}}function v3(n,e,t){n instanceof Os?function(i,s,o){let a=i.value.clone(),c=jM(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof er?function(i,s,o){if(!pf(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=jM(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(MN(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function mu(n,e,t,r){return n instanceof Os?function(s,o,a,c){if(!pf(s.precondition,o))return a;let l=s.value.clone(),h=BM(s.fieldTransforms,c,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof er?function(s,o,a,c){if(!pf(s.precondition,o))return a;let l=BM(s.fieldTransforms,c,o),h=o.data;return h.setAll(MN(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(s,o,a){return pf(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function _3(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=CN(r.transform,i||null);s!=null&&(t===null&&(t=Zt.empty()),t.set(r.field,s))}return t||null}function UM(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&aa(r,i,(s,o)=>y3(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Os=class extends pa{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},er=class extends pa{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function MN(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function jM(n,e,t){let r=new Map;Re(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,g3(o,a,t[i]))}return r}function BM(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,m3(s,o,e))}return r}var Iu=class extends pa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},BI=class extends pa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var $I=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&v3(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=mu(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=mu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=bN();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=RN(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(ue.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ve())}isEqual(e){return this.batchId===e.batchId&&aa(this.mutations,e.mutations,(t,r)=>UM(t,r))&&aa(this.baseMutations,e.baseMutations,(t,r)=>UM(t,r))}},HI=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Re(e.mutations.length===r.length);let i=function(){return l3}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var zI=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var qI=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var et,Ie;function I3(n){switch(n){default:return re();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0}}function NN(n){if(n===void 0)return Fr("GRPC error has no .code"),N.UNKNOWN;switch(n){case et.OK:return N.OK;case et.CANCELLED:return N.CANCELLED;case et.UNKNOWN:return N.UNKNOWN;case et.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case et.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case et.INTERNAL:return N.INTERNAL;case et.UNAVAILABLE:return N.UNAVAILABLE;case et.UNAUTHENTICATED:return N.UNAUTHENTICATED;case et.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case et.NOT_FOUND:return N.NOT_FOUND;case et.ALREADY_EXISTS:return N.ALREADY_EXISTS;case et.PERMISSION_DENIED:return N.PERMISSION_DENIED;case et.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case et.ABORTED:return N.ABORTED;case et.OUT_OF_RANGE:return N.OUT_OF_RANGE;case et.UNIMPLEMENTED:return N.UNIMPLEMENTED;case et.DATA_LOSS:return N.DATA_LOSS;default:return re()}}(Ie=et||(et={}))[Ie.OK=0]="OK",Ie[Ie.CANCELLED=1]="CANCELLED",Ie[Ie.UNKNOWN=2]="UNKNOWN",Ie[Ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ie[Ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ie[Ie.NOT_FOUND=5]="NOT_FOUND",Ie[Ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ie[Ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ie[Ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ie[Ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ie[Ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ie[Ie.ABORTED=10]="ABORTED",Ie[Ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ie[Ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ie[Ie.INTERNAL=13]="INTERNAL",Ie[Ie.UNAVAILABLE=14]="UNAVAILABLE",Ie[Ie.DATA_LOSS=15]="DATA_LOSS";var $M=null;function w3(){return new TextEncoder}var E3=new Mi([4294967295,4294967295],0);function HM(n){let e=w3().encode(n),t=new oI;return t.update(e),new Uint8Array(t.digest())}function zM(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Mi([t,r],0),new Mi([i,s],0)]}var GI=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new As(`Invalid padding: ${t}`);if(r<0)throw new As(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new As(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new As(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Mi.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Mi.fromNumber(r)));return i.compare(E3)===1&&(i=new Mi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=HM(e),[r,i]=zM(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let t=HM(e),[r,i]=zM(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},As=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var wf=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,wu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ue.min(),i,new ze(Te),Ur(),ve())}},wu=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ve(),ve(),ve())}};var sa=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Ef=class{constructor(e,t){this.targetId=e,this.me=t}},bf=class{constructor(e,t,r=St.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Tf=class{constructor(){this.fe=0,this.ge=GM(),this.pe=St.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ve(),t=ve(),r=ve();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:re()}}),new wu(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=GM()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Re(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},WI=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ur(),this.qe=qM(),this.Qe=new ze(Te)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:re()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(FI(s))if(r===0){let o=new ee(s.path);this.Ue(t,o,Sn.newNoDocument(o,ue.min()))}else Re(r===1);else{let o=this.Ye(t);if(o!==r){let a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}$M?.et(function(h,p,y,v,C){var M,A,F,H,U,W;let me={localCacheCount:h,existenceFilterCount:p.count,databaseId:y.database,projectId:y.projectId},Y=p.unchangedNames;return Y&&(me.bloomFilter={applied:C===0,hashCount:(M=Y?.hashCount)!==null&&M!==void 0?M:0,bitmapLength:(H=(F=(A=Y?.bits)===null||A===void 0?void 0:A.bitmap)===null||F===void 0?void 0:F.length)!==null&&H!==void 0?H:0,padding:(W=(U=Y?.bits)===null||U===void 0?void 0:U.padding)!==null&&W!==void 0?W:0,mightContain:E=>{var _;return(_=v?.mightContain(E))!==null&&_!==void 0&&_}}),me}(o,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=Pi(r).toUint8Array()}catch(c){if(c instanceof vf)return gu("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new GI(o,i,s)}catch(c){return gu(c instanceof As?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&FI(a.target)){let c=new ee(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,Sn.newNoDocument(c,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=ve();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new wf(e,t,this.Qe,this.ke,r);return this.ke=Ur(),this.qe=qM(),this.Qe=new ze(Te),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Tf,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Dt(Te),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||G("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Tf),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function qM(){return new ze(ee.comparator)}function GM(){return new ze(ee.comparator)}var b3={asc:"ASCENDING",desc:"DESCENDING"},T3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},C3={and:"AND",or:"OR"},KI=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function QI(n,e){return n.useProto3Json||zf(e)?e:{value:e}}function Cf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function PN(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function D3(n,e){return Cf(n,e.toTimestamp())}function Zn(n){return Re(!!n),ue.fromTimestamp(function(t){let r=Vr(t);return new dt(r.seconds,r.nanos)}(n))}function sE(n,e){return YI(n,e).canonicalString()}function YI(n,e){let t=function(i){return new Ue(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function xN(n){let e=Ue.fromString(n);return Re(VN(e)),e}function JI(n,e){return sE(n.databaseId,e.path)}function hI(n,e){let t=xN(e);if(t.get(1)!==n.databaseId.projectId)throw new $(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new $(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ee(ON(t))}function kN(n,e){return sE(n.databaseId,e)}function S3(n){let e=xN(n);return e.length===4?Ue.emptyPath():ON(e)}function ZI(n){return new Ue(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ON(n){return Re(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function WM(n,e,t){return{name:JI(n,e),fields:t.value.mapValue.fields}}function A3(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:re()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(Re(h===void 0||typeof h=="string"),St.fromBase64String(h||"")):(Re(h===void 0||h instanceof Buffer||h instanceof Uint8Array),St.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let h=l.code===void 0?N.UNKNOWN:NN(l.code);return new $(h,l.message||"")}(o);t=new bf(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=hI(n,r.document.name),s=Zn(r.document.updateTime),o=r.document.createTime?Zn(r.document.createTime):ue.min(),a=new Zt({mapValue:{fields:r.document.fields}}),c=Sn.newFoundDocument(i,s,o,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new sa(l,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=hI(n,r.document),s=r.readTime?Zn(r.readTime):ue.min(),o=Sn.newNoDocument(i,s),a=r.removedTargetIds||[];t=new sa([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=hI(n,r.document),s=r.removedTargetIds||[];t=new sa([],s,i,null)}else{if(!("filter"in e))return re();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new qI(i,s),a=r.targetId;t=new Ef(a,o)}}return t}function R3(n,e){let t;if(e instanceof Os)t={update:WM(n,e.key,e.value)};else if(e instanceof Iu)t={delete:JI(n,e.key)};else if(e instanceof er)t={update:WM(n,e.key,e.data),updateMask:V3(e.fieldMask)};else{if(!(e instanceof BI))return re();t={verify:JI(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof ha)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof xs)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ks)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof fa)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw re()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:D3(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:re()}(n,e.precondition)),t}function M3(n,e){return n&&n.length>0?(Re(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?Zn(i.updateTime):Zn(s);return o.isEqual(ue.min())&&(o=Zn(s)),new jI(o,i.transformResults||[])}(t,e))):[]}function N3(n,e){return{documents:[kN(n,e.path)]}}function P3(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=kN(n,i);let s=function(l){if(l.length!==0)return FN(An.create(l,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(h=>function(y){return{field:ta(y.field),direction:O3(y.dir)}}(h))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=QI(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function x3(n){let e=S3(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Re(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(p){let y=LN(p);return y instanceof An&&fN(y)?y.getFilters():[y]}(t.where));let o=[];t.orderBy&&(o=function(p){return p.map(y=>function(C){return new Ps(na(C.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(y))}(t.orderBy));let a=null;t.limit&&(a=function(p){let y;return y=typeof p=="object"?p.value:p,zf(y)?null:y}(t.limit));let c=null;t.startAt&&(c=function(p){let y=!!p.before,v=p.values||[];return new la(v,y)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let y=!p.before,v=p.values||[];return new la(v,y)}(t.endAt)),s3(e,i,o,s,a,"F",c,l)}function k3(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return re()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function LN(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=na(t.unaryFilter.field);return nt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=na(t.unaryFilter.field);return nt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=na(t.unaryFilter.field);return nt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=na(t.unaryFilter.field);return nt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return re()}}(n):n.fieldFilter!==void 0?function(t){return nt.create(na(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return re()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return An.create(t.compositeFilter.filters.map(r=>LN(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return re()}}(t.compositeFilter.op))}(n):re()}function O3(n){return b3[n]}function L3(n){return T3[n]}function F3(n){return C3[n]}function ta(n){return{fieldPath:n.canonicalString()}}function na(n){return Xt.fromServerFormat(n.fieldPath)}function FN(n){return n instanceof nt?function(t){if(t.op==="=="){if(xM(t.value))return{unaryFilter:{field:ta(t.field),op:"IS_NAN"}};if(PM(t.value))return{unaryFilter:{field:ta(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(xM(t.value))return{unaryFilter:{field:ta(t.field),op:"IS_NOT_NAN"}};if(PM(t.value))return{unaryFilter:{field:ta(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ta(t.field),op:L3(t.op),value:t.value}}}(n):n instanceof An?function(t){let r=t.getFilters().map(i=>FN(i));return r.length===1?r[0]:{compositeFilter:{op:F3(t.op),filters:r}}}(n):re()}function V3(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function VN(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Eu=class n{constructor(e,t,r,i,s=ue.min(),o=ue.min(),a=St.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var XI=class{constructor(e){this.ct=e}};function U3(n){let e=x3({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?UI(e,e.limit,"L"):e}var Df=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Ve(e.integerValue));else if("doubleValue"in e){let r=Ve(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),yu(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Vr(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Pi(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?lN(e)?this.dt(t,Number.MAX_SAFE_INTEGER):uN(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):re()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let s=e.fields||{};this.dt(t,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Ve(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),ee.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Df.vt=new Df;var ew=class{constructor(){this.un=new tw}addToCollectionParentIndex(e,t){return this.un.add(t),L.resolve()}getCollectionParents(e,t){return L.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return L.resolve()}deleteFieldIndex(e,t){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,t){return L.resolve()}getDocumentsMatchingTarget(e,t){return L.resolve(null)}getIndexType(e,t){return L.resolve(0)}getFieldIndexes(e,t){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,t){return L.resolve(Ms.min())}getMinOffsetFromCollectionGroup(e,t){return L.resolve(Ms.min())}updateCollectionGroup(e,t,r){return L.resolve()}updateIndexEntries(e,t){return L.resolve()}},tw=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Dt(Ue.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Dt(Ue.comparator)).toArray()}};var mne=new Uint8Array(0);var Wn=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Wn.DEFAULT_COLLECTION_PERCENTILE=10,Wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wn.DEFAULT=new Wn(41943040,Wn.DEFAULT_COLLECTION_PERCENTILE,Wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wn.DISABLED=new Wn(-1,0,0);var bu=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var nw=class{constructor(){this.changes=new ki(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Sn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?L.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var rw=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var iw=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&mu(r.mutation,i,dn.empty(),dt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ve()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ve()){let i=Ss();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=du();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=Ss();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ve()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Ur(),o=pu(),a=function(){return pu()}();return t.forEach((c,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof er)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),mu(h.mutation,l,h.mutation.getFieldMask(),dt.now())):o.set(l.key,dn.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,h)=>o.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new rw(h,(p=o.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=pu(),i=new ze((o,a)=>o-a),s=ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let h=r.get(c)||dn.empty();h=a.applyToLocalView(l,h),r.set(c,h);let p=(i.get(a.batchId)||ve()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,h=c.value,p=bN();h.forEach(y=>{if(!s.has(y)){let v=RN(t.get(y),r.get(y));v!==null&&p.set(y,v),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return ee.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):vN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):L.resolve(Ss()),a=-1,c=s;return o.next(l=>L.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?L.resolve():this.remoteDocumentCache.getEntry(e,h).next(y=>{c=c.insert(h,y)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,ve())).next(h=>({batchId:a,changes:EN(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ee(t)).next(r=>{let i=du();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=du();return this.indexManager.getCollectionParents(e,s).next(a=>L.forEach(a,c=>{let l=function(p,y){return new xi(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,y)=>{o=o.insert(p,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,l)=>{let h=l.getKey();o.get(h)===null&&(o=o.insert(h,Sn.newInvalidDocument(h)))});let a=du();return o.forEach((c,l)=>{let h=s.get(c);h!==void 0&&mu(h.mutation,l,dn.empty(),dt.now()),Gf(t,l)&&(a=a.insert(c,l))}),a})}};var sw=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return L.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Zn(i.createTime)}}(t)),L.resolve()}getNamedQuery(e,t){return L.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:U3(i.bundledQuery),readTime:Zn(i.readTime)}}(t)),L.resolve()}};var ow=class{constructor(){this.overlays=new ze(ee.comparator),this.Ir=new Map}getOverlay(e,t){return L.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Ss();return L.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),L.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),L.resolve()}getOverlaysForCollection(e,t,r){let i=Ss(),s=t.length+1,o=new ee(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return L.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new ze((l,h)=>l-h),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=s.get(l.largestBatchId);h===null&&(h=Ss(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Ss(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return L.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new zI(t,r));let s=this.Ir.get(t);s===void 0&&(s=ve(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}};var aw=class{constructor(){this.sessionToken=St.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,L.resolve()}};var Tu=class{constructor(){this.Tr=new Dt(tt.Er),this.dr=new Dt(tt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new tt(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new tt(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new ee(new Ue([])),r=new tt(t,e),i=new tt(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new ee(new Ue([])),r=new tt(t,e),i=new tt(t,e+1),s=ve();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new tt(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},tt=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return ee.comparator(e.key,t.key)||Te(e.wr,t.wr)}static Ar(e,t){return Te(e.wr,t.wr)||ee.comparator(e.key,t.key)}};var cw=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Dt(tt.Er)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new $I(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new tt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,t){return L.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),s=i<0?0:i;return L.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new tt(t,0),i=new tt(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),L.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Dt(Te);return t.forEach(i=>{let s=new tt(i,0),o=new tt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),L.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;ee.isDocumentKey(s)||(s=s.child(""));let o=new tt(new ee(s),0),a=new Dt(Te);return this.br.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},o),L.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Re(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return L.forEach(t.mutations,i=>{let s=new tt(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new tt(t,0),i=this.br.firstAfterOrEqual(r);return L.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var uw=class{constructor(e){this.Mr=e,this.docs=function(){return new ze(ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return L.resolve(r?r.document.mutableCopy():Sn.newInvalidDocument(t))}getEntries(e,t){let r=Ur();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Sn.newInvalidDocument(i))}),L.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Ur(),o=t.path,a=new ee(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:h}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||Kq(Wq(h),r)<=0||(i.has(h.key)||Gf(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return L.resolve(s)}getAllFromCollectionGroup(e,t,r,i){re()}Or(e,t){return L.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new lw(this)}getSize(e){return L.resolve(this.size)}},lw=class extends nw{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),L.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var dw=class{constructor(e){this.persistence=e,this.Nr=new ki(t=>nE(t),rE),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Tu,this.targetCount=0,this.kr=bu.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),L.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new bu(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,L.resolve()}updateTargetData(e,t){return this.Kn(t),L.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),L.waitFor(s).next(()=>i)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return L.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),L.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),L.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),L.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return L.resolve(r)}containsKey(e,t){return L.resolve(this.Br.containsKey(t))}};var hw=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new aN(0),this.Kr=!1,this.Kr=!0,this.$r=new aw,this.referenceDelegate=e(this),this.Ur=new dw(this),this.indexManager=new ew,this.remoteDocumentCache=function(i){return new uw(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new XI(t),this.Gr=new sw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ow,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new cw(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){G("MemoryPersistence","Starting transaction:",e);let i=new fw(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return L.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},fw=class extends TI{constructor(e){super(),this.currentSequenceNumber=e}},pw=class n{constructor(e){this.persistence=e,this.Jr=new Tu,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw re()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),L.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),L.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.Xr,r=>{let i=ee.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,ue.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return L.or([()=>L.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var mw=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ve(),i=ve();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var gw=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var yw=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return IA()?8:Yq(at())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new gw;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(lu()<=pe.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",ea(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),L.resolve()):(lu()<=pe.DEBUG&&G("QueryEngine","Query:",ea(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(lu()<=pe.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",ea(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yn(t))):L.resolve())}Yi(e,t){if(FM(t))return L.resolve(null);let r=Yn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=UI(t,null,"F"),r=Yn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=ve(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ts(t,a);return this.ns(t,l,o,c.readTime)?this.Yi(e,UI(t,null,"F")):this.rs(e,l,t,c)}))})))}Zi(e,t,r,i){return FM(t)||i.isEqual(ue.min())?L.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(t,s);return this.ns(t,o,r,i)?L.resolve(null):(lu()<=pe.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ea(t)),this.rs(e,o,t,Gq(i,-1)).next(a=>a))})}ts(e,t){let r=new Dt(IN(e));return t.forEach((i,s)=>{Gf(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return lu()<=pe.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",ea(t)),this.Ji.getDocumentsMatchingQuery(e,t,Ms.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var vw=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new ze(Te),this._s=new ki(s=>nE(s),rE),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iw(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function j3(n,e,t,r){return new vw(n,e,t,r)}function UN(n,e){return g(this,null,function*(){let t=se(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=ve();for(let l of i){o.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}for(let l of s){a.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function B3(n,e){let t=se(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,h){let p=l.batch,y=p.keys(),v=L.resolve();return y.forEach(C=>{v=v.next(()=>h.getEntry(c,C)).next(M=>{let A=l.docVersions.get(C);Re(A!==null),M.version.compareTo(A)<0&&(p.applyToRemoteDocument(M,l),M.isValidDocument()&&(M.setReadTime(l.commitVersion),h.addEntry(M)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(c,p))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=ve();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function jN(n){let e=se(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function $3(n,e){let t=se(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,p)=>{let y=i.get(p);if(!y)return;a.push(t.Ur.removeMatchingKeys(s,h.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(s,h.addedDocuments,p)));let v=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(St.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(p,v),function(M,A,F){return M.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(y,v,h)&&a.push(t.Ur.updateTargetData(s,v))});let c=Ur(),l=ve();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(H3(s,o,e.documentUpdates).next(h=>{c=h.Ps,l=h.Is})),!r.isEqual(ue.min())){let h=t.Ur.getLastRemoteSnapshotVersion(s).next(p=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return L.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(t.os=i,s))}function H3(n,e,t){let r=ve(),i=ve();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Ur();return t.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ue.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):G("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:o,Is:i}})}function z3(n,e){let t=se(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function q3(n,e){let t=se(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,L.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new Eu(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function _w(n,e,t){return g(this,null,function*(){let r=se(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Pu(o))throw o;G("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function KM(n,e,t){let r=se(n),i=ue.min(),s=ve();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,h){let p=se(c),y=p._s.get(h);return y!==void 0?L.resolve(p.os.get(y)):p.Ur.getTargetData(l,h)}(r,o,Yn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:ue.min(),t?s:ve())).next(a=>(G3(r,a3(e),a),{documents:a,Ts:s})))}function G3(n,e,t){let r=n.us.get(e)||ue.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}var Sf=class{constructor(){this.activeTargetIds=f3()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Iw=class{constructor(){this.so=new Sf,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Sf,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var ww=class{_o(e){}shutdown(){}};var Af=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){G("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){G("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var hf=null;function fI(){return hf===null?hf=function(){return 268435456+Math.round(2147483648*Math.random())}():hf++,"0x"+hf.toString(16)}var W3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Ew=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Tt="WebChannelConnection",bw=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){let a=fI(),c=this.xo(t,r.toUriEncodedString());G("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(t,c,l,i).then(h=>(G("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw gu("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",c,"request:",i),h})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ya}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){let i=W3[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let s=fI();return new Promise((o,a)=>{let c=new aI;c.setWithCredentials(!0),c.listenOnce(cI.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case uu.NO_ERROR:let h=c.getResponseJson();G(Tt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case uu.TIMEOUT:G(Tt,`RPC '${e}' ${s} timed out`),a(new $(N.DEADLINE_EXCEEDED,"Request time out"));break;case uu.HTTP_ERROR:let p=c.getStatus();if(G(Tt,`RPC '${e}' ${s} failed with status:`,p,"response text:",c.getResponseText()),p>0){let y=c.getResponseJson();Array.isArray(y)&&(y=y[0]);let v=y?.error;if(v&&v.status&&v.message){let C=function(A){let F=A.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(F)>=0?F:N.UNKNOWN}(v.status);a(new $(C,v.message))}else a(new $(N.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new $(N.UNAVAILABLE,"Connection failed."));break;default:re()}}finally{G(Tt,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);G(Tt,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=fI(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=dI(),a=lI(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=s.join("");G(Tt,`Creating RPC '${e}' stream ${i}: ${h}`,c);let p=o.createWebChannel(h,c),y=!1,v=!1,C=new Ew({Io:A=>{v?G(Tt,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(y||(G(Tt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),y=!0),G(Tt,`RPC '${e}' stream ${i} sending:`,A),p.send(A))},To:()=>p.close()}),M=(A,F,H)=>{A.listen(F,U=>{try{H(U)}catch(W){setTimeout(()=>{throw W},0)}})};return M(p,Xo.EventType.OPEN,()=>{v||(G(Tt,`RPC '${e}' stream ${i} transport opened.`),C.yo())}),M(p,Xo.EventType.CLOSE,()=>{v||(v=!0,G(Tt,`RPC '${e}' stream ${i} transport closed`),C.So())}),M(p,Xo.EventType.ERROR,A=>{v||(v=!0,gu(Tt,`RPC '${e}' stream ${i} transport errored:`,A),C.So(new $(N.UNAVAILABLE,"The operation could not be completed")))}),M(p,Xo.EventType.MESSAGE,A=>{var F;if(!v){let H=A.data[0];Re(!!H);let U=H,W=U.error||((F=U[0])===null||F===void 0?void 0:F.error);if(W){G(Tt,`RPC '${e}' stream ${i} received error:`,W);let me=W.status,Y=function(I){let b=et[I];if(b!==void 0)return NN(b)}(me),E=W.message;Y===void 0&&(Y=N.INTERNAL,E="Unknown error status: "+me+" with message "+W.message),v=!0,C.So(new $(Y,E)),p.close()}else G(Tt,`RPC '${e}' stream ${i} received:`,H),C.bo(H)}}),M(a,uI.STAT_EVENT,A=>{A.stat===lf.PROXY?G(Tt,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===lf.NOPROXY&&G(Tt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.wo()},0),C}};function pI(){return typeof document<"u"?document:null}function Wf(n){return new KI(n,!0)}var Rf=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&G("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Mf=class{constructor(e,t,r,i,s,o,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Rf(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return g(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return g(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return g(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===N.RESOURCE_EXHAUSTED?(Fr(t.toString()),Fr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new $(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>g(this,null,function*(){this.state=0,this.start()}))}I_(e){return G("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(G("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Tw=class extends Mf{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=A3(this.serializer,e),r=function(s){if(!("targetChange"in s))return ue.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?ue.min():o.readTime?Zn(o.readTime):ue.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=ZI(this.serializer),t.addTarget=function(s,o){let a,c=o.target;if(a=FI(c)?{documents:N3(s,c)}:{query:P3(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=PN(s,o.resumeToken);let l=QI(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(ue.min())>0){a.readTime=Cf(s,o.snapshotVersion.toTimestamp());let l=QI(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=k3(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=ZI(this.serializer),t.removeTarget=e,this.a_(t)}},Cw=class extends Mf{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Re(!!e.streamToken),this.lastStreamToken=e.streamToken,Re(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Re(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=M3(e.writeResults,e.commitTime),r=Zn(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=ZI(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>R3(this.serializer,r))};this.a_(t)}};var Dw=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new $(N.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,YI(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new $(N.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,YI(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(N.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Sw=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Fr(t),this.D_=!1):G("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Aw=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>g(this,null,function*(){Vs(this)&&(G("RemoteStore","Restarting streams for network reachability change."),yield function(c){return g(this,null,function*(){let l=se(c);l.L_.add(4),yield xu(l),l.q_.set("Unknown"),l.L_.delete(4),yield Kf(l)})}(this))}))}),this.q_=new Sw(r,i)}};function Kf(n){return g(this,null,function*(){if(Vs(n))for(let e of n.B_)yield e(!0)})}function xu(n){return g(this,null,function*(){for(let e of n.B_)yield e(!1)})}function BN(n,e){let t=se(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),uE(t)?cE(t):va(t).r_()&&aE(t,e))}function oE(n,e){let t=se(n),r=va(t);t.N_.delete(e),r.r_()&&$N(t,e),t.N_.size===0&&(r.r_()?r.o_():Vs(t)&&t.q_.set("Unknown"))}function aE(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ue.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}va(n).A_(e)}function $N(n,e){n.Q_.xe(e),va(n).R_(e)}function cE(n){n.Q_=new WI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),va(n).start(),n.q_.v_()}function uE(n){return Vs(n)&&!va(n).n_()&&n.N_.size>0}function Vs(n){return se(n).L_.size===0}function HN(n){n.Q_=void 0}function K3(n){return g(this,null,function*(){n.q_.set("Online")})}function Q3(n){return g(this,null,function*(){n.N_.forEach((e,t)=>{aE(n,e)})})}function Y3(n,e){return g(this,null,function*(){HN(n),uE(n)?(n.q_.M_(e),cE(n)):n.q_.set("Unknown")})}function J3(n,e,t){return g(this,null,function*(){if(n.q_.set("Online"),e instanceof bf&&e.state===2&&e.cause)try{yield function(i,s){return g(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){G("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Nf(n,r)}else if(e instanceof sa?n.Q_.Ke(e):e instanceof Ef?n.Q_.He(e):n.Q_.We(e),!t.isEqual(ue.min()))try{let r=yield jN(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let h=s.N_.get(l);h&&s.N_.set(l,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let h=s.N_.get(c);if(!h)return;s.N_.set(c,h.withResumeToken(St.EMPTY_BYTE_STRING,h.snapshotVersion)),$N(s,c);let p=new Eu(h.target,c,l,h.sequenceNumber);aE(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){G("RemoteStore","Failed to raise snapshot:",r),yield Nf(n,r)}})}function Nf(n,e,t){return g(this,null,function*(){if(!Pu(e))throw e;n.L_.add(1),yield xu(n),n.q_.set("Offline"),t||(t=()=>jN(n.localStore)),n.asyncQueue.enqueueRetryable(()=>g(this,null,function*(){G("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Kf(n)}))})}function zN(n,e){return e().catch(t=>Nf(n,t,e))}function Qf(n){return g(this,null,function*(){let e=se(n),t=Oi(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Z3(e);)try{let i=yield z3(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,X3(e,i)}catch(i){yield Nf(e,i)}qN(e)&&GN(e)})}function Z3(n){return Vs(n)&&n.O_.length<10}function X3(n,e){n.O_.push(e);let t=Oi(n);t.r_()&&t.V_&&t.m_(e.mutations)}function qN(n){return Vs(n)&&!Oi(n).n_()&&n.O_.length>0}function GN(n){Oi(n).start()}function eG(n){return g(this,null,function*(){Oi(n).p_()})}function tG(n){return g(this,null,function*(){let e=Oi(n);for(let t of n.O_)e.m_(t.mutations)})}function nG(n,e,t){return g(this,null,function*(){let r=n.O_.shift(),i=HI.from(r,e,t);yield zN(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Qf(n)})}function rG(n,e){return g(this,null,function*(){e&&Oi(n).V_&&(yield function(r,i){return g(this,null,function*(){if(function(o){return I3(o)&&o!==N.ABORTED}(i.code)){let s=r.O_.shift();Oi(r).s_(),yield zN(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Qf(r)}})}(n,e)),qN(n)&&GN(n)})}function QM(n,e){return g(this,null,function*(){let t=se(n);t.asyncQueue.verifyOperationInProgress(),G("RemoteStore","RemoteStore received new credentials");let r=Vs(t);t.L_.add(3),yield xu(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Kf(t)})}function iG(n,e){return g(this,null,function*(){let t=se(n);e?(t.L_.delete(2),yield Kf(t)):e||(t.L_.add(2),yield xu(t),t.q_.set("Unknown"))})}function va(n){return n.K_||(n.K_=function(t,r,i){let s=se(t);return s.w_(),new Tw(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:K3.bind(null,n),Ro:Q3.bind(null,n),mo:Y3.bind(null,n),d_:J3.bind(null,n)}),n.B_.push(e=>g(this,null,function*(){e?(n.K_.s_(),uE(n)?cE(n):n.q_.set("Unknown")):(yield n.K_.stop(),HN(n))}))),n.K_}function Oi(n){return n.U_||(n.U_=function(t,r,i){let s=se(t);return s.w_(),new Cw(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:eG.bind(null,n),mo:rG.bind(null,n),f_:tG.bind(null,n),g_:nG.bind(null,n)}),n.B_.push(e=>g(this,null,function*(){e?(n.U_.s_(),yield Qf(n)):(yield n.U_.stop(),n.O_.length>0&&(G("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var Rw=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Kn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function lE(n,e){if(Fr("AsyncQueue",`${e}: ${n}`),Pu(n))return new $(N.UNAVAILABLE,`${e}: ${n}`);throw n}var Pf=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ee.comparator(t.key,r.key):(t,r)=>ee.comparator(t.key,r.key),this.keyedMap=du(),this.sortedSet=new ze(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var xf=class{constructor(){this.W_=new ze(ee.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):re():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},ma=class n{constructor(e,t,r,i,s,o,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,Pf.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Mw=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},Nw=class{constructor(){this.queries=YM(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=se(t),s=i.queries;i.queries=YM(),s.forEach((o,a)=>{for(let c of a.j_)c.onError(r)})})(this,new $(N.ABORTED,"Firestore shutting down"))}};function YM(){return new ki(n=>_N(n),qf)}function sG(n,e){return g(this,null,function*(){let t=se(n),r=3,i=e.query,s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new Mw,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let a=lE(o,`Initialization of query '${ea(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&dE(t)})}function oG(n,e){return g(this,null,function*(){let t=se(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function aG(n,e){let t=se(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&dE(t)}function cG(n,e,t){let r=se(n),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(t);r.queries.delete(e)}function dE(n){n.Y_.forEach(e=>{e.next()})}var Pw,JM;(JM=Pw||(Pw={})).ea="default",JM.Cache="cache";var xw=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ma(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=ma.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Pw.Cache}};var kf=class{constructor(e){this.key=e}},Of=class{constructor(e){this.key=e}},kw=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ve(),this.mutatedKeys=ve(),this.Aa=IN(e),this.Ra=new Pf(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new xf,i=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let y=i.get(h),v=Gf(this.query,p)?p:null,C=!!y&&this.mutatedKeys.has(y.key),M=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations),A=!1;y&&v?y.data.isEqual(v.data)?C!==M&&(r.track({type:3,doc:v}),A=!0):this.ga(y,v)||(r.track({type:2,doc:v}),A=!0,(c&&this.Aa(v,c)>0||l&&this.Aa(v,l)<0)&&(a=!0)):!y&&v?(r.track({type:0,doc:v}),A=!0):y&&!v&&(r.track({type:1,doc:y}),A=!0,(c||l)&&(a=!0)),A&&(v?(o=o.add(v),s=M?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((h,p)=>function(v,C){let M=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return re()}};return M(v)-M(C)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,o.length!==0||l?{snapshot:new ma(this.query,e.Ra,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new xf,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ve(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Of(r))}),this.da.forEach(r=>{e.has(r)||t.push(new kf(r))}),t}ba(e){this.Ta=e.Ts,this.da=ve();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return ma.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},Ow=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Lw=class{constructor(e){this.key=e,this.va=!1}},Fw=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new ki(a=>_N(a),qf),this.Ma=new Map,this.xa=new Set,this.Oa=new ze(ee.comparator),this.Na=new Map,this.La=new Tu,this.Ba={},this.ka=new Map,this.qa=bu.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function uG(n,e,t=!0){return g(this,null,function*(){let r=ZN(n),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield WN(r,e,t,!0),i})}function lG(n,e){return g(this,null,function*(){let t=ZN(n);yield WN(t,e,!0,!1)})}function WN(n,e,t,r){return g(this,null,function*(){let i=yield q3(n.localStore,Yn(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=yield dG(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&BN(n.remoteStore,i),a})}function dG(n,e,t,r,i){return g(this,null,function*(){n.Ka=(p,y,v)=>function(M,A,F,H){return g(this,null,function*(){let U=A.view.ma(F);U.ns&&(U=yield KM(M.localStore,A.query,!1).then(({documents:E})=>A.view.ma(E,U)));let W=H&&H.targetChanges.get(A.targetId),me=H&&H.targetMismatches.get(A.targetId)!=null,Y=A.view.applyChanges(U,M.isPrimaryClient,W,me);return XM(M,A.targetId,Y.wa),Y.snapshot})}(n,p,y,v);let s=yield KM(n.localStore,e,!0),o=new kw(e,s.Ts),a=o.ma(s.documents),c=wu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=o.applyChanges(a,n.isPrimaryClient,c);XM(n,t,l.wa);let h=new Ow(e,t,o);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function hG(n,e,t){return g(this,null,function*(){let r=se(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!qf(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield _w(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&oE(r.remoteStore,i.targetId),Vw(r,i.targetId)}).catch(Nu))):(Vw(r,i.targetId),yield _w(r.localStore,i.targetId,!0))})}function fG(n,e){return g(this,null,function*(){let t=se(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),oE(t.remoteStore,r.targetId))})}function pG(n,e,t){return g(this,null,function*(){let r=wG(n);try{let i=yield function(o,a){let c=se(o),l=dt.now(),h=a.reduce((v,C)=>v.add(C.key),ve()),p,y;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let C=Ur(),M=ve();return c.cs.getEntries(v,h).next(A=>{C=A,C.forEach((F,H)=>{H.isValidDocument()||(M=M.add(F))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,C)).next(A=>{p=A;let F=[];for(let H of a){let U=_3(H,p.get(H.key).overlayedDocument);U!=null&&F.push(new er(H.key,U,dN(U.value.mapValue),Jn.exists(!0)))}return c.mutationQueue.addMutationBatch(v,l,F,a)}).next(A=>{y=A;let F=A.applyToLocalDocumentSet(p,M);return c.documentOverlayCache.saveOverlays(v,A.batchId,F)})}).then(()=>({batchId:y.batchId,changes:EN(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.Ba[o.currentUser.toKey()];l||(l=new ze(Te)),l=l.insert(a,c),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,t),yield ku(r,i.changes),yield Qf(r.remoteStore)}catch(i){let s=lE(i,"Failed to persist write");t.reject(s)}})}function KN(n,e){return g(this,null,function*(){let t=se(n);try{let r=yield $3(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Na.get(s);o&&(Re(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Re(o.va):i.removedDocuments.size>0&&(Re(o.va),o.va=!1))}),yield ku(t,r,e)}catch(r){yield Nu(r)}})}function ZM(n,e,t){let r=se(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=se(o);c.onlineState=a;let l=!1;c.queries.forEach((h,p)=>{for(let y of p.j_)y.Z_(a)&&(l=!0)}),l&&dE(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function mG(n,e,t){return g(this,null,function*(){let r=se(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new ze(ee.comparator);o=o.insert(s,Sn.newNoDocument(s,ue.min()));let a=ve().add(s),c=new wf(ue.min(),new Map,new ze(Te),o,a);yield KN(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),hE(r)}else yield _w(r.localStore,e,!1).then(()=>Vw(r,e,t)).catch(Nu)})}function gG(n,e){return g(this,null,function*(){let t=se(n),r=e.batch.batchId;try{let i=yield B3(t.localStore,e);YN(t,r,null),QN(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ku(t,i)}catch(i){yield Nu(i)}})}function yG(n,e,t){return g(this,null,function*(){let r=se(n);try{let i=yield function(o,a){let c=se(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return c.mutationQueue.lookupMutationBatch(l,a).next(p=>(Re(p!==null),h=p.keys(),c.mutationQueue.removeMutationBatch(l,p))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>c.localDocuments.getDocuments(l,h))})}(r.localStore,e);YN(r,e,t),QN(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ku(r,i)}catch(i){yield Nu(i)}})}function QN(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function YN(n,e,t){let r=se(n),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Vw(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||JN(n,r)})}function JN(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(oE(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),hE(n))}function XM(n,e,t){for(let r of t)r instanceof kf?(n.La.addReference(r.key,e),vG(n,r)):r instanceof Of?(G("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||JN(n,r.key)):re()}function vG(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(G("SyncEngine","New document in limbo: "+t),n.xa.add(r),hE(n))}function hE(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new ee(Ue.fromString(e)),r=n.qa.next();n.Na.set(r,new Lw(t)),n.Oa=n.Oa.insert(t,r),BN(n.remoteStore,new Eu(Yn(yN(t.path)),r,"TargetPurposeLimboResolution",aN.oe))}}function ku(n,e,t){return g(this,null,function*(){let r=se(n),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{o.push(r.Ka(c,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(l){i.push(l);let p=mw.Wi(c.targetId,l);s.push(p)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(c,l){return g(this,null,function*(){let h=se(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>L.forEach(l,y=>L.forEach(y.$i,v=>h.persistence.referenceDelegate.addReference(p,y.targetId,v)).next(()=>L.forEach(y.Ui,v=>h.persistence.referenceDelegate.removeReference(p,y.targetId,v)))))}catch(p){if(!Pu(p))throw p;G("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let y=p.targetId;if(!p.fromCache){let v=h.os.get(y),C=v.snapshotVersion,M=v.withLastLimboFreeSnapshotVersion(C);h.os=h.os.insert(y,M)}}})}(r.localStore,s))})}function _G(n,e){return g(this,null,function*(){let t=se(n);if(!t.currentUser.isEqual(e)){G("SyncEngine","User change. New user:",e.toKey());let r=yield UN(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(c=>{c.reject(new $(N.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ku(t,r.hs)}})}function IG(n,e){let t=se(n),r=t.Na.get(e);if(r&&r.va)return ve().add(r.key);{let i=ve(),s=t.Ma.get(e);if(!s)return i;for(let o of s){let a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function ZN(n){let e=se(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=KN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=IG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mG.bind(null,e),e.Ca.d_=aG.bind(null,e.eventManager),e.Ca.$a=cG.bind(null,e.eventManager),e}function wG(n){let e=se(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gG.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yG.bind(null,e),e}var eN=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return g(this,null,function*(){this.serializer=Wf(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return j3(this.persistence,new yw,t.initialUser,this.serializer)}Ga(t){return new hw(pw.Zr,this.serializer)}Wa(t){return new Iw}terminate(){return g(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var EG=(()=>{class n{initialize(t,r){return g(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>ZM(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=_G.bind(null,this.syncEngine),yield iG(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Nw}()}createDatastore(t){let r=Wf(t.databaseInfo.databaseId),i=function(o){return new bw(o)}(t.databaseInfo);return function(o,a,c,l){return new Dw(o,a,c,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,o,a,c){return new Aw(i,s,o,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>ZM(this.syncEngine,r,0),function(){return Af.D()?new Af:new ww}())}createSyncEngine(t,r){return function(s,o,a,c,l,h,p){let y=new Fw(s,o,a,c,l,h);return p&&(y.Qa=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return g(this,null,function*(){var t,r;yield function(s){return g(this,null,function*(){let o=se(s);G("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield xu(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var Uw=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Fr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var jw=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ct.UNAUTHENTICATED,this.clientId=mf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>g(this,null,function*(){G("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(G("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Kn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>g(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=lE(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function mI(n,e){return g(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),G("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>g(this,null,function*(){r.isEqual(i)||(yield UN(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function tN(n,e){return g(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield bG(n);G("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>QM(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>QM(e.remoteStore,i)),n._onlineComponents=e})}function bG(n){return g(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){G("FirestoreClient","Using user provided OfflineComponentProvider");try{yield mI(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;gu("Error using user provided cache. Falling back to memory cache: "+t),yield mI(n,new eN)}}else G("FirestoreClient","Using default OfflineComponentProvider"),yield mI(n,new eN);return n._offlineComponents})}function XN(n){return g(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(G("FirestoreClient","Using user provided OnlineComponentProvider"),yield tN(n,n._uninitializedComponentsProvider._online)):(G("FirestoreClient","Using default OnlineComponentProvider"),yield tN(n,new EG))),n._onlineComponents})}function TG(n){return XN(n).then(e=>e.syncEngine)}function CG(n){return g(this,null,function*(){let e=yield XN(n),t=e.eventManager;return t.onListen=uG.bind(null,e.syncEngine),t.onUnlisten=hG.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=lG.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=fG.bind(null,e.syncEngine),t})}function DG(n,e,t={}){let r=new Kn;return n.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){return function(s,o,a,c,l){let h=new Uw({next:y=>{h.Za(),o.enqueueAndForget(()=>oG(s,p)),y.fromCache&&c.source==="server"?l.reject(new $(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(y)},error:y=>l.reject(y)}),p=new xw(a,h,{includeMetadataChanges:!0,_a:!0});return sG(s,p)}(yield CG(n),n.asyncQueue,e,t,r)})),r.promise}function eP(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var nN=new Map;function tP(n,e,t){if(!t)throw new $(N.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function SG(n,e,t,r){if(e===!0&&r===!0)throw new $(N.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function rN(n){if(!ee.isDocumentKey(n))throw new $(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function iN(n){if(ee.isDocumentKey(n))throw new $(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Yf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":re()}function Li(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new $(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Yf(n);throw new $(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var Lf=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new $(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new $(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}SG("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=eP((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new $(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new $(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new $(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Cu=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Lf({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Lf(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new yI;switch(r.type){case"firstParty":return new II(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return g(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=nN.get(t);r&&(G("ComponentProvider","Removing Datastore"),nN.delete(t),r.terminate())}(this),Promise.resolve()}};var Ls=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},$t=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ni(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Ni=class n extends Ls{constructor(e,t,r){super(e,t,yN(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new $t(this.firestore,null,new ee(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function nP(n,e,...t){if(n=Fe(n),tP("collection","path",e),n instanceof Cu){let r=Ue.fromString(e,...t);return iN(r),new Ni(n,null,r)}{if(!(n instanceof $t||n instanceof Ni))throw new $(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ue.fromString(e,...t));return iN(r),new Ni(n.firestore,null,r)}}function fE(n,e,...t){if(n=Fe(n),arguments.length===1&&(e=mf.newId()),tP("doc","path",e),n instanceof Cu){let r=Ue.fromString(e,...t);return rN(r),new $t(n,null,new ee(r))}{if(!(n instanceof $t||n instanceof Ni))throw new $(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ue.fromString(e,...t));return rN(r),new $t(n.firestore,n instanceof Ni?n.converter:null,new ee(r))}}var Ff=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Rf(this,"async_queue_retry"),this.Vu=()=>{let r=pI();r&&G("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=pI();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=pI();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new Kn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return g(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Pu(e))throw e;G("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Fr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=Rw.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&re()}verifyOperationInProgress(){}wu(){return g(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};var Fi=class extends Cu{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Ff,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return g(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Ff(e),this._firestoreClient=void 0,yield e}})}};function rP(n,e,t){t||(t="(default)");let r=ms(n,"firestore");if(r.isInitialized(t)){let i=r.getImmediate({identifier:t}),s=r.getOptions(t);if(wi(s,e))return i;throw new $(N.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new $(N.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new $(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:t})}function iP(n){if(n._terminated)throw new $(N.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||AG(n),n._firestoreClient}function AG(n){var e,t,r;let i=n._freezeSettings(),s=function(a,c,l,h){return new CI(a,c,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,eP(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new jw(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}var Du=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(St.fromBase64String(e))}catch(t){throw new $(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(St.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var ga=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new $(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Su=class{constructor(e){this._methodName=e}};var Au=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new $(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new $(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Te(this._lat,e._lat)||Te(this._long,e._long)}};var Ru=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var RG=/^__.*__$/,Bw=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new er(e,this.data,this.fieldMask,t,this.fieldTransforms):new Os(e,this.data,t,this.fieldTransforms)}},Vf=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new er(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function sP(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw re()}}var $w=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return jf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(sP(this.Cu)&&RG.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},Hw=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Wf(e)}Qu(e,t,r,i=!1){return new $w({Cu:e,methodName:t,qu:r,path:Xt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Jf(n){let e=n._freezeSettings(),t=Wf(n._databaseId);return new Hw(n._databaseId,!!e.ignoreUndefinedProperties,t)}function oP(n,e,t,r,i,s={}){let o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);pE("Data must be an object, but it was:",o,r);let a=aP(r,o),c,l;if(s.merge)c=new dn(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let y=zw(e,p,t);if(!o.contains(y))throw new $(N.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);uP(h,y)||h.push(y)}c=new dn(h),l=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,l=o.fieldTransforms;return new Bw(new Zt(a),c,l)}var Uf=class n extends Su{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function MG(n,e,t,r){let i=n.Qu(1,e,t);pE("Data must be an object, but it was:",i,r);let s=[],o=Zt.empty();Fs(r,(c,l)=>{let h=mE(e,c,t);l=Fe(l);let p=i.Nu(h);if(l instanceof Uf)s.push(h);else{let y=Ou(l,p);y!=null&&(s.push(h),o.set(h,y))}});let a=new dn(s);return new Vf(o,a,i.fieldTransforms)}function NG(n,e,t,r,i,s){let o=n.Qu(1,e,t),a=[zw(e,r,t)],c=[i];if(s.length%2!=0)throw new $(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)a.push(zw(e,s[y])),c.push(s[y+1]);let l=[],h=Zt.empty();for(let y=a.length-1;y>=0;--y)if(!uP(l,a[y])){let v=a[y],C=c[y];C=Fe(C);let M=o.Nu(v);if(C instanceof Uf)l.push(v);else{let A=Ou(C,M);A!=null&&(l.push(v),h.set(v,A))}}let p=new dn(l);return new Vf(h,p,o.fieldTransforms)}function PG(n,e,t,r=!1){return Ou(t,n.Qu(r?4:3,e))}function Ou(n,e){if(cP(n=Fe(n)))return pE("Unsupported field value:",e,n),aP(n,e);if(n instanceof Su)return function(r,i){if(!sP(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=Ou(a,i.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=Fe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return p3(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=dt.fromDate(r);return{timestampValue:Cf(i.serializer,s)}}if(r instanceof dt){let s=new dt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Cf(i.serializer,s)}}if(r instanceof Au)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Du)return{bytesValue:PN(i.serializer,r._byteString)};if(r instanceof $t){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:sE(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ru)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return iE(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Yf(r)}`)}(n,e)}function aP(n,e){let t={};return cN(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fs(n,(r,i)=>{let s=Ou(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function cP(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof dt||n instanceof Au||n instanceof Du||n instanceof $t||n instanceof Su||n instanceof Ru)}function pE(n,e,t){if(!cP(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Yf(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function zw(n,e,t){if((e=Fe(e))instanceof ga)return e._internalPath;if(typeof e=="string")return mE(n,e);throw jf("Field path arguments must be of type string or ",n,!1,void 0,t)}var xG=new RegExp("[~\\*/\\[\\]]");function mE(n,e,t){if(e.search(xG)>=0)throw jf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ga(...e.split("."))._internalPath}catch{throw jf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function jf(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new $(N.INVALID_ARGUMENT,a+n+c)}function uP(n,e){return n.some(t=>t.isEqual(e))}var Bf=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new $t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new qw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Zf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},qw=class extends Bf{data(){return super.data()}};function Zf(n,e){return typeof e=="string"?mE(n,e):e instanceof ga?e._internalPath:e._delegate._internalPath}function kG(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new $(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Mu=class{},$f=class extends Mu{};function lP(n,e,...t){let r=[];e instanceof Mu&&r.push(e),r=r.concat(t),function(s){let o=s.filter(c=>c instanceof Gw).length,a=s.filter(c=>c instanceof Hf).length;if(o>1||o>0&&a>0)throw new $(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Hf=class n extends $f{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return fP(e._query,t),new Ls(e.firestore,e.converter,VI(e._query,t))}_parse(e){let t=Jf(e.firestore);return function(s,o,a,c,l,h,p){let y;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new $(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){oN(p,h);let v=[];for(let C of p)v.push(sN(c,s,C));y={arrayValue:{values:v}}}else y=sN(c,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||oN(p,h),y=PG(a,o,p,h==="in"||h==="not-in");return nt.create(l,h,y)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function dP(n,e,t){let r=e,i=Zf("where",n);return Hf._create(i,r,t)}var Gw=class n extends Mu{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:An.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)fP(o,c),o=VI(o,c)}(e._query,t),new Ls(e.firestore,e.converter,VI(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Ww=class n extends $f{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,s,o){if(i.startAt!==null)throw new $(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new $(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ps(s,o)}(e._query,this._field,this._direction);return new Ls(e.firestore,e.converter,function(i,s){let o=i.explicitOrderBy.concat([s]);return new xi(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function hP(n,e="asc"){let t=e,r=Zf("orderBy",n);return Ww._create(r,t)}function sN(n,e,t){if(typeof(t=Fe(t))=="string"){if(t==="")throw new $(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vN(e)&&t.indexOf("/")!==-1)throw new $(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Ue.fromString(t));if(!ee.isDocumentKey(r))throw new $(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return NM(n,new ee(r))}if(t instanceof $t)return NM(n,t._key);throw new $(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Yf(t)}.`)}function oN(n,e){if(!Array.isArray(n)||n.length===0)throw new $(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function fP(n,e){let t=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new $(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Kw=class{convertValue(e,t="none"){switch(Ns(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ve(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Pi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw re()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Fs(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Ve(o.doubleValue));return new Ru(s)}convertGeoPoint(e){return new Au(Ve(e.latitude),Ve(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=eE(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(vu(e));default:return null}}convertTimestamp(e){let t=Vr(e);return new dt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Ue.fromString(e);Re(VN(r));let i=new _f(r.get(1),r.get(3)),s=new ee(r.popFirst(5));return i.isEqual(t)||Fr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function pP(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var ia=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Qw=class extends Bf{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new oa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Zf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},oa=class extends Qw{data(e={}){return super.data(e)}},Yw=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ia(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new oa(this._firestore,this._userDataWriter,r.key,r,new ia(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new $(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new oa(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ia(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new oa(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ia(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:OG(a.type),doc:c,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function OG(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return re()}}var Jw=class extends Kw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Du(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new $t(this.firestore,null,t)}};function mP(n){n=Li(n,Ls);let e=Li(n.firestore,Fi),t=iP(e),r=new Jw(e);return kG(n._query),DG(t,n._query).then(i=>new Yw(e,r,n,i))}function gP(n,e,t){n=Li(n,$t);let r=Li(n.firestore,Fi),i=pP(n.converter,e,t);return Xf(r,[oP(Jf(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Jn.none())])}function yP(n,e,t,...r){n=Li(n,$t);let i=Li(n.firestore,Fi),s=Jf(i),o;return o=typeof(e=Fe(e))=="string"||e instanceof ga?NG(s,"updateDoc",n._key,e,t,r):MG(s,"updateDoc",n._key,e),Xf(i,[o.toMutation(n._key,Jn.exists(!0))])}function vP(n){return Xf(Li(n.firestore,Fi),[new Iu(n._key,Jn.none())])}function _P(n,e){let t=Li(n.firestore,Fi),r=fE(n),i=pP(n.converter,e);return Xf(t,[oP(Jf(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Jn.exists(!1))]).then(()=>r)}function Xf(n,e){return function(r,i){let s=new Kn;return r.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){return pG(yield TG(r),i,s)})),s.promise}(iP(n),e)}(function(e,t=!0){(function(i){ya=i})(zn),Hn(new Bt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Fi(new vI(r.getProvider("auth-internal")),new EI(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new $(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _f(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Le(SM,"4.7.3",e),Le(SM,"4.7.3","esm2017")})();var Us=class{constructor(e){return e}},IP="firestore",gE=class{constructor(){return ys(IP)}};var yE=new z("angularfire2.firestore-instances");function LG(n,e){let t=Go(IP,n,e);return t&&new Us(t)}function FG(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Us(r)}}var VG={provide:gE,deps:[[new Xe,yE]]},UG={provide:Us,useFactory:LG,deps:[[new Xe,yE],Tn]};function wP(n,...e){return Le("angularfire",Ar.full,"fst"),jt([UG,VG,{provide:yE,useFactory:FG(n),multi:!0,deps:[be,yt,Ci,Rr,[new Xe,Ds],[new Xe,Ti],...e]}])}var vE=xe(_P,!0);var _E=xe(nP,!0);var EP=xe(vP,!0);var _a=xe(fE,!0);var Ia=xe(mP,!0);var bP=xe(rP,!0);var TP=xe(hP,!0);var IE=xe(lP,!0);var wE=xe(gP,!0);var CP=xe(yP,!0);var DP=xe(dP,!0);var xP="firebasestorage.googleapis.com",kP="storageBucket",jG=2*60*1e3,BG=10*60*1e3;var qe=class n extends Ot{constructor(e,t,r=0){super(EE(e),`Firebase Storage: ${t} (${EE(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return EE(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Ke=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(Ke||{});function EE(n){return"storage/"+n}function AE(){let n="An unknown error occurred, please check the error payload for server response.";return new qe(Ke.UNKNOWN,n)}function $G(n){return new qe(Ke.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function HG(n){return new qe(Ke.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function zG(){let n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new qe(Ke.UNAUTHENTICATED,n)}function qG(){return new qe(Ke.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function GG(n){return new qe(Ke.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function WG(){return new qe(Ke.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function KG(){return new qe(Ke.CANCELED,"User canceled the upload/download.")}function QG(n){return new qe(Ke.INVALID_URL,"Invalid URL '"+n+"'.")}function YG(n){return new qe(Ke.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function JG(){return new qe(Ke.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+kP+"' property when initializing the app?")}function ZG(){return new qe(Ke.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function XG(){return new qe(Ke.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function eW(n){return new qe(Ke.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function bE(n){return new qe(Ke.INVALID_ARGUMENT,n)}function OP(){return new qe(Ke.APP_DELETED,"The Firebase app was deleted.")}function tW(n){return new qe(Ke.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Fu(n,e){return new qe(Ke.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Lu(n){throw new qe(Ke.INTERNAL_ERROR,"Internal error: "+n)}var Rn=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw YG(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(W){W.path.charAt(W.path.length-1)==="/"&&(W.path_=W.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function l(W){W.path_=decodeURIComponent(W.path)}let h="v[A-Za-z0-9_]+",p=t.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",v=new RegExp(`^https?://${p}/${h}/b/${i}/o${y}`,"i"),C={bucket:1,path:3},M=t===xP?"(?:storage.googleapis.com|storage.cloud.google.com)":t,A="([^?#]*)",F=new RegExp(`^https?://${M}/${i}/${A}`,"i"),U=[{regex:a,indices:c,postModify:s},{regex:v,indices:C,postModify:l},{regex:F,indices:{bucket:1,path:2},postModify:l}];for(let W=0;W<U.length;W++){let me=U[W],Y=me.regex.exec(e);if(Y){let E=Y[me.indices.bucket],_=Y[me.indices.path];_||(_=""),r=new n(E,_),me.postModify(r);break}}if(r==null)throw QG(e);return r}},TE=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function nW(n,e,t){let r=1,i=null,s=null,o=!1,a=0;function c(){return a===2}let l=!1;function h(...A){l||(l=!0,e.apply(null,A))}function p(A){i=setTimeout(()=>{i=null,n(v,c())},A)}function y(){s&&clearTimeout(s)}function v(A,...F){if(l){y();return}if(A){y(),h.call(null,A,...F);return}if(c()||o){y(),h.call(null,A,...F);return}r<64&&(r*=2);let U;a===1?(a=2,U=0):U=(r+Math.random())*1e3,p(U)}let C=!1;function M(A){C||(C=!0,y(),!l&&(i!==null?(A||(a=2),clearTimeout(i),p(0)):A||(a=1)))}return p(0),s=setTimeout(()=>{o=!0,M(!0)},t),M}function rW(n){n(!1)}function iW(n){return n!==void 0}function sW(n){return typeof n=="object"&&!Array.isArray(n)}function RE(n){return typeof n=="string"||n instanceof String}function SP(n){return ME()&&n instanceof Blob}function ME(){return typeof Blob<"u"}function AP(n,e,t,r){if(r<e)throw bE(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw bE(`Invalid value for '${n}'. Expected ${t} or less.`)}function NE(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function LP(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Ea=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(Ea||{});function oW(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}var CE=class{constructor(e,t,r,i,s,o,a,c,l,h,p,y=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=h,this.connectionFactory_=p,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,C)=>{this.resolve_=v,this.reject_=C,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new wa(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=a=>{let c=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let a=s.getErrorCode()===Ea.NO_ERROR,c=s.getStatus();if(!a||oW(c,this.additionalRetryCodes_)&&this.retry){let h=s.getErrorCode()===Ea.ABORT;r(!1,new wa(!1,null,h));return}let l=this.successCodes_.indexOf(c)!==-1;r(!0,new wa(l,s))})},t=(r,i)=>{let s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());iW(c)?s(c):s()}catch(c){o(c)}else if(a!==null){let c=AE();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(i.canceled){let c=this.appDelete_?OP():KG();o(c)}else{let c=WG();o(c)}};this.canceled_?t(!1,new wa(!1,null,!0)):this.backoffId_=nW(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&rW(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},wa=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function aW(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function cW(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function uW(n,e){e&&(n["X-Firebase-GMPID"]=e)}function lW(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function dW(n,e,t,r,i,s,o=!0){let a=LP(n.urlParams),c=n.url+a,l=Object.assign({},n.headers);return uW(l,e),aW(l,t),cW(l,s),lW(l,r),new CE(c,n.method,l,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o)}function hW(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function fW(...n){let e=hW();if(e!==void 0){let t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(ME())return new Blob(n);throw new qe(Ke.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function pW(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function mW(n){if(typeof atob>"u")throw eW("base-64");return atob(n)}var tr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Vu=class{constructor(e,t){this.data=e,this.contentType=t||null}};function gW(n,e){switch(n){case tr.RAW:return new Vu(FP(e));case tr.BASE64:case tr.BASE64URL:return new Vu(VP(n,e));case tr.DATA_URL:return new Vu(vW(e),_W(e))}throw AE()}function FP(n){let e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{let s=r,o=n.charCodeAt(++t);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function yW(n){let e;try{e=decodeURIComponent(n)}catch{throw Fu(tr.DATA_URL,"Malformed data URL.")}return FP(e)}function VP(n,e){switch(n){case tr.BASE64:{let i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Fu(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case tr.BASE64URL:{let i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Fu(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=mW(e)}catch(i){throw i.message.includes("polyfill")?i:Fu(n,"Invalid character found")}let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}var tp=class{constructor(e){this.base64=!1,this.contentType=null;let t=e.match(/^data:([^,]+)?,/);if(t===null)throw Fu(tr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=t[1]||null;r!=null&&(this.base64=IW(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function vW(n){let e=new tp(n);return e.base64?VP(tr.BASE64,e.rest):yW(e.rest)}function _W(n){return new tp(n).contentType}function IW(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}var np=class n{constructor(e,t){let r=0,i="";SP(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(SP(this.data_)){let r=this.data_,i=pW(r,e,t);return i===null?null:new n(i)}else{let r=new Uint8Array(this.data_.buffer,e,t-e);return new n(r,!0)}}static getBlob(...e){if(ME()){let t=e.map(r=>r instanceof n?r.data_:r);return new n(fW.apply(null,t))}else{let t=e.map(o=>RE(o)?gW(tr.RAW,o).data:o.data_),r=0;t.forEach(o=>{r+=o.byteLength});let i=new Uint8Array(r),s=0;return t.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new n(i,!0)}}uploadData(){return this.data_}};function UP(n){let e;try{e=JSON.parse(n)}catch{return null}return sW(e)?e:null}function wW(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function EW(n,e){let t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function jP(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function bW(n,e){return e}var ht=class{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||bW}},ep=null;function TW(n){return!RE(n)||n.length<2?n:jP(n)}function BP(){if(ep)return ep;let n=[];n.push(new ht("bucket")),n.push(new ht("generation")),n.push(new ht("metageneration")),n.push(new ht("name","fullPath",!0));function e(s,o){return TW(o)}let t=new ht("name");t.xform=e,n.push(t);function r(s,o){return o!==void 0?Number(o):o}let i=new ht("size");return i.xform=r,n.push(i),n.push(new ht("timeCreated")),n.push(new ht("updated")),n.push(new ht("md5Hash",null,!0)),n.push(new ht("cacheControl",null,!0)),n.push(new ht("contentDisposition",null,!0)),n.push(new ht("contentEncoding",null,!0)),n.push(new ht("contentLanguage",null,!0)),n.push(new ht("contentType",null,!0)),n.push(new ht("metadata","customMetadata",!0)),ep=n,ep}function CW(n,e){function t(){let r=n.bucket,i=n.fullPath,s=new Rn(r,i);return e._makeStorageReference(s)}Object.defineProperty(n,"ref",{get:t})}function DW(n,e,t){let r={};r.type="file";let i=t.length;for(let s=0;s<i;s++){let o=t[s];r[o.local]=o.xform(r,e[o.server])}return CW(r,n),r}function $P(n,e,t){let r=UP(e);return r===null?null:DW(n,r,t)}function SW(n,e,t,r){let i=UP(e);if(i===null||!RE(i.downloadTokens))return null;let s=i.downloadTokens;if(s.length===0)return null;let o=encodeURIComponent;return s.split(",").map(l=>{let h=n.bucket,p=n.fullPath,y="/b/"+o(h)+"/o/"+o(p),v=NE(y,t,r),C=LP({alt:"media",token:l});return v+C})[0]}function AW(n,e){let t={},r=e.length;for(let i=0;i<r;i++){let s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}var rp=class{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function HP(n){if(!n)throw AE()}function RW(n,e){function t(r,i){let s=$P(n,i,e);return HP(s!==null),s}return t}function MW(n,e){function t(r,i){let s=$P(n,i,e);return HP(s!==null),SW(s,i,n.host,n._protocol)}return t}function zP(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=qG():i=zG():t.getStatus()===402?i=HG(n.bucket):t.getStatus()===403?i=GG(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function NW(n){let e=zP(n);function t(r,i){let s=e(r,i);return r.getStatus()===404&&(s=$G(n.path)),s.serverResponse=i.serverResponse,s}return t}function PW(n,e,t){let r=e.fullServerUrl(),i=NE(r,n.host,n._protocol),s="GET",o=n.maxOperationRetryTime,a=new rp(i,s,MW(n,t),o);return a.errorHandler=NW(e),a}function xW(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function kW(n,e,t){let r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=xW(null,e)),r}function OW(n,e,t,r,i){let s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let U="";for(let W=0;W<2;W++)U=U+Math.random().toString().slice(2);return U}let c=a();o["Content-Type"]="multipart/related; boundary="+c;let l=kW(e,r,i),h=AW(l,t),p="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+c+`\r
Content-Type: `+l.contentType+`\r
\r
`,y=`\r
--`+c+"--",v=np.getBlob(p,r,y);if(v===null)throw ZG();let C={name:l.fullPath},M=NE(s,n.host,n._protocol),A="POST",F=n.maxUploadRetryTime,H=new rp(M,A,RW(n,t),F);return H.urlParams=C,H.headers=o,H.body=v.uploadData(),H.errorHandler=zP(e),H}var Fre=256*1024;var RP=null,DE=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ea.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ea.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ea.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Lu("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(let s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Lu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Lu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Lu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Lu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},SE=class extends DE{initXhr(){this.xhr_.responseType="text"}};function qP(){return RP?RP():new SE}var ba=class n{constructor(e,t){this._service=e,t instanceof Rn?this._location=t:this._location=Rn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new Rn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return jP(this._location.path)}get storage(){return this._service}get parent(){let e=wW(this._location.path);if(e===null)return null;let t=new Rn(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw tW(e)}};function LW(n,e,t){n._throwIfRoot("uploadBytes");let r=OW(n.storage,n._location,BP(),new np(e,!0),t);return n.storage.makeRequestWithTokens(r,qP).then(i=>({metadata:i,ref:n}))}function FW(n){n._throwIfRoot("getDownloadURL");let e=PW(n.storage,n._location,BP());return n.storage.makeRequestWithTokens(e,qP).then(t=>{if(t===null)throw XG();return t})}function VW(n,e){let t=EW(n._location.path,e),r=new Rn(n._location.bucket,t);return new ba(n.storage,r)}function UW(n){return/^[A-Za-z]+:\/\//.test(n)}function jW(n,e){return new ba(n,e)}function GP(n,e){if(n instanceof Uu){let t=n;if(t._bucket==null)throw JG();let r=new ba(t,t._bucket);return e!=null?GP(r,e):r}else return e!==void 0?VW(n,e):n}function BW(n,e){if(e&&UW(e)){if(n instanceof Uu)return jW(n,e);throw bE("To use ref(service, url), the first argument must be a Storage instance.")}else return GP(n,e)}function MP(n,e){let t=e?.[kP];return t==null?null:Rn.makeFromBucketSpec(t,n)}function $W(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";let{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:Rv(i,n.app.options.projectId))}var Uu=class{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=xP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=jG,this._maxUploadRetryTime=BG,this._requests=new Set,i!=null?this._bucket=Rn.makeFromBucketSpec(i,this._host):this._bucket=MP(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Rn.makeFromBucketSpec(this._url,e):this._bucket=MP(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){AP("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){AP("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return g(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return g(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ba(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new TE(OP());{let o=dW(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){return g(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()})}},NP="@firebase/storage",PP="0.13.2";var WP="storage";function KP(n,e,t){return n=Fe(n),LW(n,e,t)}function QP(n){return n=Fe(n),FW(n)}function YP(n,e){return n=Fe(n),BW(n,e)}function JP(n=bi(),e){n=Fe(n);let r=ms(n,WP).getImmediate({identifier:e}),i=Dv("storage");return i&&ZP(r,...i),r}function ZP(n,e,t,r={}){$W(n,e,t,r)}function HW(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Uu(t,r,i,e,zn)}function zW(){Hn(new Bt(WP,HW,"PUBLIC").setMultipleInstances(!0)),Le(NP,PP,""),Le(NP,PP,"esm2017")}zW();var js=class{constructor(e){return e}},XP="storage",PE=class{constructor(){return ys(XP)}};var xE=new z("angularfire2.storage-instances");function qW(n,e){let t=Go(XP,n,e);return t&&new js(t)}function GW(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new js(r)}}var WW={provide:PE,deps:[[new Xe,xE]]},KW={provide:js,useFactory:qW,deps:[[new Xe,xE],Tn]};function ex(n,...e){return Le("angularfire",Ar.full,"gcs"),jt([KW,WW,{provide:xE,useFactory:GW(n),multi:!0,deps:[be,yt,Ci,Rr,[new Xe,Ds],[new Xe,Ti],...e]}])}var tx=xe(QP,!0);var nx=xe(JP,!0);var rx=xe(YP,!0);var ix=xe(KP,!0);var Vi=class n{firestore=O(Us);mapsCollection=_E(this.firestore,"maps");smokesCollection=_E(this.firestore,"smokes");getMaps(){let e=IE(this.mapsCollection,TP("name"));return Se(Ia(e)).pipe(Q(t=>t.docs.map(r=>de(V({},r.data()),{id:r.id}))))}getMap(e){let t=_a(this.firestore,"maps",e);return Se(Ia(IE(this.mapsCollection,DP("id","==",e)))).pipe(Q(r=>{if(!r.empty)return r.docs[0].data()}))}getMapFromCollection(e){return this.getMaps().pipe(Q(t=>t.find(r=>r.id===e)))}getSmokes(e){return Se(Ia(this.smokesCollection)).pipe(Q(t=>t.docs.map(i=>de(V({},i.data()),{id:i.id})).filter(i=>i.mapId===e)))}getAllSmokes(){return Se(Ia(this.smokesCollection)).pipe(Q(e=>e.docs.map(t=>de(V({},t.data()),{id:t.id}))))}testRead(){return g(this,null,function*(){try{return(yield Ia(this.smokesCollection)).size}catch(e){throw e}})}testWrite(){return g(this,null,function*(){try{let e=new Promise((r,i)=>setTimeout(()=>i(new Error("Write operation timed out (5s). Check Firewall/Rules.")),5e3)),t=yield Promise.race([vE(this.smokesCollection,{title:"Test Smoke",videoId:"test",mapId:"test",type:"smoke",side:"t",description:"Test Description",tags:["test"]}),e]);console.log("Test write successful, ID:",t.id)}catch(e){throw e}})}addSmoke(e){if(!e.id){let r=e,{id:i}=r,s=Jp(r,["id"]);return vE(this.smokesCollection,s).then(()=>{})}let t=_a(this.smokesCollection,e.id);return wE(t,e)}updateSmoke(e){let t=_a(this.firestore,"smokes",e.id);return wE(t,e,{merge:!0})}updateMap(e){return g(this,null,function*(){if(!e.id)throw new Error("Map ID is missing");console.log("Updating map with ID:",e.id);let t=_a(this.firestore,"maps",e.id);return CP(t,V({},e))})}deleteSmoke(e){let t=_a(this.firestore,"smokes",e);return EP(t)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})};var QW=n=>["/map",n];function YW(n,e){if(n&1&&(P(0,"a",5)(1,"div",6),It(2,"img",7),x(),P(3,"div",8)(4,"h3"),B(5),x(),P(6,"span",9),B(7,"Active Duty"),x()()()),n&2){let t=e.$implicit;J("routerLink",VD(4,QW,t.id)),k(2),J("src",t.image,ss)("alt",t.name),k(3),He(t.name)}}function JW(n,e){if(n&1&&(P(0,"div",3),ke(1,YW,8,6,"a",4),x()),n&2){let t=e.ngIf;k(),J("ngForOf",t)}}var ip=class n{constructor(e){this.smokeService=e;this.maps$=this.smokeService.getMaps()}maps$;ngOnInit(){}static \u0275fac=function(t){return new(t||n)(Z(Vi))};static \u0275cmp=sn({type:n,selectors:[["app-home"]],standalone:!0,features:[an],decls:8,vars:3,consts:[[1,"home-container"],[1,"hero"],["class","map-grid",4,"ngIf"],[1,"map-grid"],["class","map-card",3,"routerLink",4,"ngFor","ngForOf"],[1,"map-card",3,"routerLink"],[1,"card-image"],["onerror","this.src='https://placehold.co/600x400/1b1e23/de9b35?text=CS2+Map'",3,"src","alt"],[1,"card-content"],[1,"card-badge"]],template:function(t,r){t&1&&(P(0,"div",0)(1,"div",1)(2,"h2"),B(3,"SELECT A MAP"),x(),P(4,"p"),B(5,"Choose a map to explore smoke strategies and improve your match performance."),x()(),ke(6,JW,2,1,"div",2),Kt(7,"async"),x()),t&2&&(k(6),J("ngIf",Qt(7,1,r.maps$)))},dependencies:[Ir,Mo,mi,No,Eh],styles:['.home-container[_ngcontent-%COMP%]{padding:5rem 2rem 4rem;min-height:100vh;background-color:var(--leet-bg);color:var(--leet-text);font-family:var(--font-family-base)}.hero[_ngcontent-%COMP%]{text-align:center;margin-bottom:4rem;animation:_ngcontent-%COMP%_fadeIn .8s ease-out}.hero[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:3rem;font-weight:800;margin-bottom:1rem;letter-spacing:-1px;background:linear-gradient(135deg,#fff,#ccc);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;color:transparent;text-transform:uppercase}.hero[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--leet-text-muted);font-size:1.25rem;max-width:600px;margin:0 auto 2rem;line-height:1.6}.map-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:2rem;max-width:1400px;margin:0 auto}.map-card[_ngcontent-%COMP%]{background-color:var(--leet-surface);border-radius:12px;overflow:hidden;text-decoration:none;transition:all .3s ease;border:1px solid var(--leet-border);position:relative;display:flex;flex-direction:column}.map-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px);box-shadow:0 20px 40px #0006;border-color:var(--leet-accent)}.card-image[_ngcontent-%COMP%]{height:200px;width:100%;position:relative;overflow:hidden}.card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .5s ease}.map-card[_ngcontent-%COMP%]:hover   .card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.1)}.card-image[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;right:0;height:50%;background:linear-gradient(to top,rgba(38,43,50,1),transparent)}.card-content[_ngcontent-%COMP%]{padding:1.5rem;display:flex;justify-content:space-between;align-items:center;position:relative;z-index:1}.card-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--leet-text);font-size:1.4rem;font-weight:700}.card-badge[_ngcontent-%COMP%]{background-color:#f82c8d26;color:var(--leet-accent);padding:6px 12px;border-radius:6px;font-size:.85rem;font-weight:600;letter-spacing:.5px;text-transform:uppercase}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}']})};var op=class n{constructor(e){this.sanitizer=e}transform(e){return this.sanitizer.bypassSecurityTrustResourceUrl(e)}static \u0275fac=function(t){return new(t||n)(Z(Oy,16))};static \u0275pipe=bo({name:"safeUrl",type:n,pure:!0,standalone:!0})};var ap=class n{transform(e){if(!e)return"";if(e.includes("embed"))return e;let t=e.match(/[?&]v=([^&]+)/);if(t)return`https://www.youtube.com/embed/${t[1]}`;let r=e.match(/youtu\.be\/([^?]+)/);if(r)return`https://www.youtube.com/embed/${r[1]}`;let i=e.match(/shorts\/([^?]+)/);return i?`https://www.youtube.com/embed/${i[1]}`:e}static \u0275fac=function(t){return new(t||n)};static \u0275pipe=bo({name:"youtubeEmbed",type:n,pure:!0,standalone:!0})};function ZW(n,e){if(n&1&&(It(0,"iframe",17),Kt(1,"youtubeEmbed"),Kt(2,"safeUrl")),n&2){let t=ae().$implicit;J("src",Qt(2,3,Qt(1,1,t.videoUrl)),Zg)}}function XW(n,e){if(n&1&&It(0,"img",18),n&2){let t=ae().$implicit;J("src",t.imageUrl,ss)("alt",t.title)}}function e6(n,e){if(n&1&&(P(0,"div",11)(1,"div",12),ke(2,ZW,3,5,"iframe",13)(3,XW,1,2,"img",14),P(4,"div",15),B(5),x()(),P(6,"div",16)(7,"h3"),B(8),x(),P(9,"p"),B(10),x()()()),n&2){let t=e.$implicit;k(2),J("ngIf",t.videoUrl),k(),J("ngIf",!t.videoUrl),k(),J("ngClass",t.type),k(),He(t.type),k(3),He(t.title),k(2),He(t.description)}}function t6(n,e){if(n&1&&(P(0,"div",19)(1,"p"),B(2),x()()),n&2){let t=ae(2).ngIf;k(2),Wt("No smokes discovered for ",t.name," yet.")}}function n6(n,e){if(n&1&&(P(0,"div",8),ke(1,e6,11,6,"div",9)(2,t6,3,1,"div",10),x()),n&2){let t=e.ngIf;k(),J("ngForOf",t),k(),J("ngIf",t.length===0)}}function r6(n,e){if(n&1&&(as(0),P(1,"div",3)(2,"a",4),B(3,"\u2190 "),P(4,"span",5),B(5,"Back to Maps"),x()(),P(6,"h1"),B(7),x(),It(8,"div",6),x(),ke(9,n6,3,2,"div",7),Kt(10,"async"),cs()),n&2){let t=e.ngIf,r=ae();k(7),Wt("",t.name," Smokes"),k(2),J("ngIf",Qt(10,2,r.smokes$))}}function i6(n,e){if(n&1&&(P(0,"div",20)(1,"h2"),B(2,"Map Not Found or Loading..."),x(),P(3,"p"),B(4,"Waiting for data for ID: "),P(5,"strong"),B(6),Kt(7,"async"),x()(),P(8,"a",21),B(9,"Return Home"),x()()),n&2){let t=ae();k(6),He(Qt(7,1,t.mapId$))}}var cp=class n{constructor(e,t){this.route=e;this.smokeService=t;this.mapId$=this.route.paramMap.pipe(Q(r=>r.get("id"))),this.smokes$=this.route.paramMap.pipe(ot(r=>{let i=r.get("id");return this.smokeService.getSmokes(i)})),this.map$=this.route.paramMap.pipe(ot(r=>this.smokeService.getMap(r.get("id"))))}smokes$;map$;mapId$;ngOnInit(){}static \u0275fac=function(t){return new(t||n)(Z(Tr),Z(Vi))};static \u0275cmp=sn({type:n,selectors:[["app-map-detail"]],standalone:!0,features:[an],decls:5,vars:4,consts:[["loadingOrError",""],[1,"detail-container"],[4,"ngIf","ngIfElse"],[1,"detail-header"],["routerLink","/",1,"back-btn"],[1,"back-text"],[1,"header-stats"],["class","smoke-grid",4,"ngIf"],[1,"smoke-grid"],["class","smoke-card",4,"ngFor","ngForOf"],["class","no-smokes",4,"ngIf"],[1,"smoke-card"],[1,"smoke-media"],["title","YouTube video player","frameborder","0","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share","allowfullscreen","",3,"src",4,"ngIf"],["onerror","this.src='https://placehold.co/600x400/1b1e23/de9b35?text=Smoke+Lineup'",3,"src","alt",4,"ngIf"],[1,"smoke-type-badge",3,"ngClass"],[1,"smoke-content"],["title","YouTube video player","frameborder","0","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share","allowfullscreen","",3,"src"],["onerror","this.src='https://placehold.co/600x400/1b1e23/de9b35?text=Smoke+Lineup'",3,"src","alt"],[1,"no-smokes"],[2,"text-align","center","padding","50px","color","white"],["routerLink","/",2,"color","#f82c8d","margin-top","20px","display","inline-block"]],template:function(t,r){if(t&1&&(P(0,"div",1),ke(1,r6,11,4,"ng-container",2),Kt(2,"async"),ke(3,i6,10,3,"ng-template",null,0,jD),x()),t&2){let i=gc(4);k(),J("ngIf",Qt(2,2,r.map$))("ngIfElse",i)}},dependencies:[Ir,oS,Mo,mi,No,Eh,op,ap],styles:[".detail-container[_ngcontent-%COMP%]{padding:3rem 2rem;max-width:1400px;margin:0 auto}.detail-header[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto 1fr;align-items:center;margin-bottom:3rem;border-bottom:1px solid var(--leet-border);padding-bottom:1.5rem}.detail-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{grid-column:2;color:var(--leet-text);margin:0;font-size:2.25rem;font-weight:700;letter-spacing:-.02em;text-align:center}.back-btn[_ngcontent-%COMP%]{grid-column:1;justify-self:start;color:var(--leet-text);text-decoration:none;font-weight:600;padding:.625rem 1.25rem;border:1px solid var(--leet-border);border-radius:8px;transition:all .2s ease;background:var(--leet-surface);display:flex;align-items:center;gap:.5rem}.back-btn[_ngcontent-%COMP%]:hover{background:var(--leet-surface-light);border-color:var(--leet-accent);color:var(--leet-accent)}.smoke-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:1.5rem}.smoke-card[_ngcontent-%COMP%]{background:var(--leet-surface);border-radius:12px;overflow:hidden;border:1px solid var(--leet-border);transition:all .3s ease}.smoke-card[_ngcontent-%COMP%]:hover{border-color:var(--leet-accent);box-shadow:0 8px 20px #0006}.smoke-media[_ngcontent-%COMP%]{height:220px;position:relative;background:#000;border-bottom:1px solid var(--leet-border)}.smoke-media[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .smoke-media[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border:none}.smoke-type-badge[_ngcontent-%COMP%]{position:absolute;top:12px;right:12px;padding:4px 10px;border-radius:6px;font-size:.7rem;font-weight:800;text-transform:uppercase;background:#0e0c0fe6;color:var(--leet-text);border:1px solid var(--leet-border);letter-spacing:.05em;backdrop-filter:blur(4px)}.smoke-type-badge.smoke[_ngcontent-%COMP%]{border-color:var(--leet-accent);color:var(--leet-accent)}.smoke-content[_ngcontent-%COMP%]{padding:1.5rem}.smoke-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .5rem;color:var(--leet-text);font-size:1.25rem;font-weight:600;letter-spacing:-.01em}.smoke-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--leet-text-muted);margin:0;font-size:.95rem;line-height:1.5}.no-smokes[_ngcontent-%COMP%]{grid-column:1 / -1;text-align:center;color:var(--leet-text-muted);font-size:1.25rem;padding:6rem 2rem;background:var(--leet-surface);border-radius:12px;border:1px dashed var(--leet-border)}@media (max-width: 768px){.back-text[_ngcontent-%COMP%]{display:none}.detail-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.smoke-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};var px=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(Z(jn),Z(_n))}}static{this.\u0275dir=$e({type:n})}}return n})(),LE=(()=>{class n extends px{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=si(n)))(i||n)}})()}static{this.\u0275dir=$e({type:n,features:[In]})}}return n})(),gp=new z("");var s6={provide:gp,useExisting:hr(()=>Aa),multi:!0};function o6(){let n=_r()?_r().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var a6=new z(""),Aa=(()=>{class n extends px{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!o6())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(Z(jn),Z(_n),Z(a6,8))}}static{this.\u0275dir=$e({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Pe("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[us([s6]),In]})}}return n})();function c6(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var FE=new z(""),mx=new z("");function u6(n){return c6(n.value)?{required:!0}:null}function sx(n){return null}function gx(n){return n!=null}function yx(n){return li(n)?Se(n):n}function vx(n){let e={};return n.forEach(t=>{e=t!=null?V(V({},e),t):e}),Object.keys(e).length===0?null:e}function _x(n,e){return e.map(t=>t(n))}function l6(n){return!n.validate}function Ix(n){return n.map(e=>l6(e)?e:t=>e.validate(t))}function d6(n){if(!n)return null;let e=n.filter(gx);return e.length==0?null:function(t){return vx(_x(t,e))}}function VE(n){return n!=null?d6(Ix(n)):null}function h6(n){if(!n)return null;let e=n.filter(gx);return e.length==0?null:function(t){let r=_x(t,e).map(yx);return vm(r).pipe(Q(vx))}}function UE(n){return n!=null?h6(Ix(n)):null}function ox(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function f6(n){return n._rawValidators}function p6(n){return n._rawAsyncValidators}function OE(n){return n?Array.isArray(n)?n:[n]:[]}function lp(n,e){return Array.isArray(n)?n.includes(e):n===e}function ax(n,e){let t=OE(e);return OE(n).forEach(i=>{lp(t,i)||t.push(i)}),t}function cx(n,e){return OE(e).filter(t=>!lp(n,t))}var dp=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=VE(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=UE(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Da=class extends dp{get formDirective(){return null}get path(){return null}},qu=class extends dp{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},hp=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},m6={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},zie=de(V({},m6),{"[class.ng-submitted]":"isSubmitted"}),yp=(()=>{class n extends hp{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(Z(qu,2))}}static{this.\u0275dir=$e({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&ci("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[In]})}}return n})(),vp=(()=>{class n extends hp{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(Z(Da,10))}}static{this.\u0275dir=$e({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&ci("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[In]})}}return n})();var ju="VALID",up="INVALID",Ta="PENDING",Bu="DISABLED",Sa=class{},fp=class extends Sa{constructor(e,t){super(),this.value=e,this.source=t}},Hu=class extends Sa{constructor(e,t){super(),this.pristine=e,this.source=t}},zu=class extends Sa{constructor(e,t){super(),this.touched=e,this.source=t}},Ca=class extends Sa{constructor(e,t){super(),this.status=e,this.source=t}};function wx(n){return(_p(n)?n.validators:n)||null}function g6(n){return Array.isArray(n)?VE(n):n||null}function Ex(n,e){return(_p(e)?e.asyncValidators:n)||null}function y6(n){return Array.isArray(n)?UE(n):n||null}function _p(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function v6(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new K(1e3,"");if(!r[t])throw new K(1001,"")}function _6(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new K(1002,"")})}var pp=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=yc(()=>this.statusReactive()),this.statusReactive=pc(void 0),this._pristine=yc(()=>this.pristineReactive()),this.pristineReactive=pc(!0),this._touched=yc(()=>this.touchedReactive()),this.touchedReactive=pc(!1),this._events=new st,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return wn(this.statusReactive)}set status(e){wn(()=>this.statusReactive.set(e))}get valid(){return this.status===ju}get invalid(){return this.status===up}get pending(){return this.status==Ta}get disabled(){return this.status===Bu}get enabled(){return this.status!==Bu}get pristine(){return wn(this.pristineReactive)}set pristine(e){wn(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return wn(this.touchedReactive)}set touched(e){wn(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(ax(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(ax(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(cx(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(cx(e,this._rawAsyncValidators))}hasValidator(e){return lp(this._rawValidators,e)}hasAsyncValidator(e){return lp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(de(V({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new zu(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new zu(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(de(V({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Hu(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Hu(!0,r))}markAsPending(e={}){this.status=Ta;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ca(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(de(V({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Bu,this.errors=null,this._forEachChild(i=>{i.disable(de(V({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new fp(this.value,r)),this._events.next(new Ca(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(de(V({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ju,this._forEachChild(r=>{r.enable(de(V({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(de(V({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ju||this.status===Ta)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new fp(this.value,t)),this._events.next(new Ca(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(de(V({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Bu:ju}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Ta,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=yx(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Ca(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Je,this.statusChanges=new Je}_calculateStatus(){return this._allControlsDisabled()?Bu:this.errors?up:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ta)?Ta:this._anyControlsHaveStatus(up)?up:ju}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Hu(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new zu(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){_p(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=g6(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=y6(this._rawAsyncValidators)}},mp=class extends pp{constructor(e,t,r){super(wx(t),Ex(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){_6(this,!0,e),Object.keys(e).forEach(r=>{v6(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var jE=new z("CallSetDisabledState",{providedIn:"root",factory:()=>BE}),BE="always";function I6(n,e){return[...e.path,n]}function bx(n,e,t=BE){Tx(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),E6(n,e),T6(n,e),b6(n,e),w6(n,e)}function ux(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function w6(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function Tx(n,e){let t=f6(n);e.validator!==null?n.setValidators(ox(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=p6(n);e.asyncValidator!==null?n.setAsyncValidators(ox(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();ux(e._rawValidators,i),ux(e._rawAsyncValidators,i)}function E6(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&Cx(n,e)})}function b6(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&Cx(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function Cx(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function T6(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function C6(n,e){n==null,Tx(n,e)}function D6(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function S6(n){return Object.getPrototypeOf(n.constructor)===LE}function A6(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function R6(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===Aa?t=s:S6(s)?r=s:i=s}),i||r||t||null}var M6={provide:Da,useExisting:hr(()=>Gu)},$u=Promise.resolve(),Gu=(()=>{class n extends Da{get submitted(){return wn(this.submittedReactive)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=yc(()=>this.submittedReactive()),this.submittedReactive=pc(!1),this._directives=new Set,this.ngSubmit=new Je,this.form=new mp({},VE(t),UE(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){$u.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),bx(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){$u.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){$u.then(()=>{let r=this._findContainer(t.path),i=new mp({});C6(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){$u.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){$u.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),A6(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(Z(FE,10),Z(mx,10),Z(jE,8))}}static{this.\u0275dir=$e({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Pe("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[us([M6]),In]})}}return n})();function lx(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function dx(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var N6=class extends pp{constructor(e=null,t,r){super(wx(t),Ex(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),_p(t)&&(t.nonNullable||t.initialValueIsDefault)&&(dx(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){lx(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){lx(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){dx(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var P6={provide:qu,useExisting:hr(()=>Wu)},hx=Promise.resolve(),Wu=(()=>{class n extends qu{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new N6,this._registered=!1,this.name="",this.update=new Je,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=R6(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),D6(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){bx(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){hx.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&fi(r);hx.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?I6(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(Z(Da,9),Z(FE,10),Z(mx,10),Z(gp,10),Z(hi,8),Z(jE,8))}}static{this.\u0275dir=$e({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[us([P6]),In,ri]})}}return n})(),Ip=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=$e({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();var x6={provide:gp,useExisting:hr(()=>wp),multi:!0};function Dx(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function k6(n){return n.split(":")[0]}var wp=(()=>{class n extends LE{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r=this._getOptionId(t),i=Dx(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=k6(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=si(n)))(i||n)}})()}static{this.\u0275dir=$e({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&Pe("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[us([x6]),In]})}}return n})(),Sx=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(Dx(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(Z(_n),Z(jn),Z(wp,9))}}static{this.\u0275dir=$e({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),O6={provide:gp,useExisting:hr(()=>Ax),multi:!0};function fx(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function L6(n){return n.split(":")[0]}var Ax=(()=>{class n extends LE{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],s=r.selectedOptions;if(s!==void 0){let o=s;for(let a=0;a<o.length;a++){let c=o[a],l=this._getOptionValue(c.value);i.push(l)}}else{let o=r.options;for(let a=0;a<o.length;a++){let c=o[a];if(c.selected){let l=this._getOptionValue(c.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=L6(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=si(n)))(i||n)}})()}static{this.\u0275dir=$e({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&Pe("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[us([O6]),In]})}}return n})(),Rx=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(fx(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(fx(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(Z(_n),Z(jn),Z(Ax,9))}}static{this.\u0275dir=$e({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();var F6=(()=>{class n{constructor(){this._validator=sx}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):sx,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=$e({type:n,features:[ri]})}}return n})();var V6={provide:FE,useExisting:hr(()=>Ku),multi:!0};var Ku=(()=>{class n extends F6{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=fi,this.createValidator=t=>u6}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=si(n)))(i||n)}})()}static{this.\u0275dir=$e({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&mc("required",i._enabled?"":null)},inputs:{required:"required"},features:[us([V6]),In]})}}return n})();var U6=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=pr({type:n})}static{this.\u0275inj=fr({})}}return n})();var Ep=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:jE,useValue:t.callSetDisabledState??BE}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=pr({type:n})}static{this.\u0275inj=fr({imports:[U6]})}}return n})();var Ra=class n{auth=O(Or);user$=IM(this.auth);login(e,t){return bM(this.auth,e,t)}loginWithGoogle(){return sI(this.auth,new W_)}loginWithGitHub(){return sI(this.auth,new K_)}logout(){return TM(this.auth)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})};function j6(n,e){if(n&1&&(P(0,"p",22),B(1),x()),n&2){let t=ae();k(),He(t.errorMessage)}}var bp=class n{constructor(e,t){this.authService=e;this.router=t}email="";password="";isLoading=!1;errorMessage="";showPassword=!1;togglePassword(){this.showPassword=!this.showPassword}login(){return g(this,null,function*(){this.isLoading=!0,this.errorMessage="";try{yield this.authService.login(this.email,this.password),this.router.navigate(["/admin"])}catch(e){console.error(e),this.errorMessage="Login failed: "+e.message}finally{this.isLoading=!1}})}loginGoogle(){return g(this,null,function*(){this.isLoading=!0,this.errorMessage="";try{yield this.authService.loginWithGoogle(),this.router.navigate(["/admin"])}catch(e){console.error(e),this.errorMessage="Google Login failed: "+e.message}finally{this.isLoading=!1}})}loginGitHub(){return g(this,null,function*(){this.isLoading=!0,this.errorMessage="";try{yield this.authService.loginWithGitHub(),this.router.navigate(["/admin"])}catch(e){console.error(e),this.errorMessage="GitHub Login failed: "+e.message}finally{this.isLoading=!1}})}static \u0275fac=function(t){return new(t||n)(Z(Ra),Z(Cr))};static \u0275cmp=sn({type:n,selectors:[["app-login"]],standalone:!0,features:[an],decls:28,vars:9,consts:[[1,"login-container"],[3,"ngSubmit"],[1,"form-group"],["for","email"],["type","email","id","email","name","email","required","",3,"ngModelChange","ngModel"],[1,"form-group","password-group"],["for","password"],[1,"input-wrapper"],["id","password","name","password","required","",3,"ngModelChange","type","ngModel"],["type","button",1,"toggle-password",3,"click"],["type","submit",3,"disabled"],[1,"google-container"],["type","button","title","Login with Google",1,"google-btn","icon-only",3,"click","disabled"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 48 48","width","24px","height","24px"],["fill","#FFC107","d","M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"],["fill","#FF3D00","d","M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"],["fill","#4CAF50","d","M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"],["fill","#1976D2","d","M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"],["type","button","title","Login with GitHub",1,"google-btn","icon-only",3,"click","disabled"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24"],["d","M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"],["class","error",4,"ngIf"],[1,"error"]],template:function(t,r){t&1&&(P(0,"div",0)(1,"h2"),B(2,"Admin Login"),x(),P(3,"form",1),Pe("ngSubmit",function(){return r.login()}),P(4,"div",2)(5,"label",3),B(6,"Email"),x(),P(7,"input",4),Et("ngModelChange",function(s){return xt(r.email,s)||(r.email=s),s}),x()(),P(8,"div",5)(9,"label",6),B(10,"Password"),x(),P(11,"div",7)(12,"input",8),Et("ngModelChange",function(s){return xt(r.password,s)||(r.password=s),s}),x(),P(13,"button",9),Pe("click",function(){return r.togglePassword()}),B(14),x()()(),P(15,"button",10),B(16),x(),P(17,"div",11)(18,"button",12),Pe("click",function(){return r.loginGoogle()}),Hg(),P(19,"svg",13),It(20,"path",14)(21,"path",15)(22,"path",16)(23,"path",17),x()(),IC(),P(24,"button",18),Pe("click",function(){return r.loginGitHub()}),Hg(),P(25,"svg",19),It(26,"path",20),x()()(),ke(27,j6,2,1,"p",21),x()()),t&2&&(k(7),wt("ngModel",r.email),k(5),J("type",r.showPassword?"text":"password"),wt("ngModel",r.password),k(2),Wt(" ",r.showPassword?"\u{1F648}":"\u{1F441}\uFE0F"," "),k(),J("disabled",r.isLoading),k(),Wt(" ",r.isLoading?"Logging in...":"Login"," "),k(2),J("disabled",r.isLoading),k(6),J("disabled",r.isLoading),k(3),J("ngIf",r.errorMessage))},dependencies:[Ir,mi,Ep,Ip,Aa,yp,vp,Ku,Wu,Gu],styles:[".login-container[_ngcontent-%COMP%]{max-width:400px;margin:50px auto;padding:30px;background:#1b1e23;border-radius:8px;color:#fff;box-shadow:0 4px 15px #00000080}h2[_ngcontent-%COMP%]{text-align:center;color:#f82c8d;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:#de9b35}input[_ngcontent-%COMP%]{width:100%;padding:10px 40px 10px 10px;background:#2a2e35;border:1px solid #444;color:#fff;border-radius:4px;box-sizing:border-box}.input-wrapper[_ngcontent-%COMP%]{position:relative}.toggle-password[_ngcontent-%COMP%]{position:absolute;right:5px;top:50%;transform:translateY(-50%);background:none;border:none;color:#ccc;font-size:1.2rem;cursor:pointer;padding:5px;width:auto;margin:0}.toggle-password[_ngcontent-%COMP%]:hover{background:none;color:#fff}button[_ngcontent-%COMP%]{width:100%;padding:12px;background:#e91e63;color:#fff;border:none;border-radius:4px;font-weight:700;cursor:pointer;margin-top:10px}button[_ngcontent-%COMP%]:hover{background:#c2185b}button[_ngcontent-%COMP%]:disabled{background:#555;cursor:not-allowed}.error[_ngcontent-%COMP%]{color:#ff5252;text-align:center;margin-top:15px}.google-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:20px;gap:15px}.google-btn[_ngcontent-%COMP%]{background:#fff;margin-top:0;width:50px;height:50px;border-radius:50%;display:flex;align-items:center;justify-content:center;padding:0;box-shadow:0 2px 5px #0003;transition:transform .2s,box-shadow .2s}.google-btn[_ngcontent-%COMP%]:hover{background:#f1f1f1;transform:scale(1.05);box-shadow:0 4px 8px #0000004d}.google-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px}"]})};function B6(n,e){n&1&&(as(0),B(1,"Add New Nade"),cs())}function $6(n,e){n&1&&(as(0),B(1,"Manage Maps"),cs())}function H6(n,e){n&1&&(as(0),B(1,"Edit Nades"),cs())}function z6(n,e){if(n&1&&(P(0,"option",29),B(1),x()),n&2){let t=e.$implicit;J("value",t.id),k(),He(t.name)}}function q6(n,e){if(n&1&&(P(0,"p",30),B(1),x()),n&2){let t=ae(2);k(),He(t.successMessage)}}function G6(n,e){if(n&1&&(P(0,"p",31),B(1),x()),n&2){let t=ae(2);k(),He(t.errorMessage)}}function W6(n,e){if(n&1){let t=ui();P(0,"div",11)(1,"form",12,0),Pe("ngSubmit",function(){Ge(t);let i=ae();return We(i.onSubmit())}),P(3,"div",13)(4,"label"),B(5,"Title"),x(),P(6,"input",14),Et("ngModelChange",function(i){Ge(t);let s=ae();return xt(s.smoke.title,i)||(s.smoke.title=i),We(i)}),x()(),P(7,"div",15)(8,"div",13)(9,"label"),B(10,"Map"),x(),P(11,"select",16),Et("ngModelChange",function(i){Ge(t);let s=ae();return xt(s.smoke.mapId,i)||(s.smoke.mapId=i),We(i)}),ke(12,z6,2,2,"option",17),Kt(13,"async"),x()(),P(14,"div",13)(15,"label"),B(16,"Type"),x(),P(17,"select",18),Et("ngModelChange",function(i){Ge(t);let s=ae();return xt(s.smoke.type,i)||(s.smoke.type=i),We(i)}),P(18,"option",19),B(19,"Smoke"),x(),P(20,"option",20),B(21,"Molotov"),x(),P(22,"option",21),B(23,"Flash"),x(),P(24,"option",22),B(25,"Grenade"),x()()()(),P(26,"div",13)(27,"label"),B(28,"Video URL (YouTube)"),x(),P(29,"input",23),Et("ngModelChange",function(i){Ge(t);let s=ae();return xt(s.smoke.videoUrl,i)||(s.smoke.videoUrl=i),We(i)}),x()(),P(30,"div",13)(31,"label"),B(32,"Description"),x(),P(33,"textarea",24),Et("ngModelChange",function(i){Ge(t);let s=ae();return xt(s.smoke.description,i)||(s.smoke.description=i),We(i)}),x()(),P(34,"div",25)(35,"button",26),B(36),x()(),ke(37,q6,2,1,"p",27)(38,G6,2,1,"p",28),x()()}if(n&2){let t=gc(2),r=ae();k(6),wt("ngModel",r.smoke.title),k(5),wt("ngModel",r.smoke.mapId),k(),J("ngForOf",Qt(13,10,r.maps$)),k(5),wt("ngModel",r.smoke.type),k(12),wt("ngModel",r.smoke.videoUrl),k(4),wt("ngModel",r.smoke.description),k(2),J("disabled",!t.form.valid||r.isSubmitting),k(),Wt(" ",r.isSubmitting?"Saving...":"Save"," "),k(),J("ngIf",r.successMessage),k(),J("ngIf",r.errorMessage)}}function K6(n,e){if(n&1&&(P(0,"option",29),B(1),x()),n&2){let t=e.$implicit;J("value",t.id),k(),He(t.name)}}function Q6(n,e){if(n&1&&(P(0,"div",45)(1,"p"),B(2,"Current Card Image:"),x(),It(3,"img",46),x()),n&2){let t=ae(3);k(3),J("src",t.selectedMap.image,ss)}}function Y6(n,e){if(n&1){let t=ui();P(0,"div",47)(1,"span"),B(2),x(),P(3,"button",48),Pe("click",function(){Ge(t);let i=ae(3);return We(i.removeFile())}),B(4,"Remove"),x()()}if(n&2){let t=ae(3);k(2),Wt("Selected: ",t.selectedFile.name,"")}}function J6(n,e){if(n&1&&(P(0,"p",30),B(1),x()),n&2){let t=ae(3);k(),He(t.successMessage)}}function Z6(n,e){if(n&1&&(P(0,"p",31),B(1),x()),n&2){let t=ae(3);k(),He(t.errorMessage)}}function X6(n,e){if(n&1){let t=ui();P(0,"div",38)(1,"h4"),B(2,"Updating Map: "),P(3,"span"),B(4),x()(),ke(5,Q6,4,1,"div",39),P(6,"div",13)(7,"label"),B(8,"Upload New Card Image"),x(),P(9,"input",40),Pe("change",function(i){Ge(t);let s=ae(2);return We(s.onFileSelected(i))}),x(),ke(10,Y6,5,1,"div",41),P(11,"p",42),B(12,"Or paste URL:"),x(),P(13,"input",43),Et("ngModelChange",function(i){Ge(t);let s=ae(2);return xt(s.selectedMap.image,i)||(s.selectedMap.image=i),We(i)}),x()(),P(14,"button",44),Pe("click",function(){Ge(t);let i=ae(2);return We(i.onSubmit())}),B(15),x(),ke(16,J6,2,1,"p",27)(17,Z6,2,1,"p",28),x()}if(n&2){let t=ae(2);k(4),He(t.selectedMap.name),k(),J("ngIf",t.selectedMap.image),k(5),J("ngIf",t.selectedFile),k(3),wt("ngModel",t.selectedMap.image),k(),J("disabled",t.isSubmitting),k(),Wt(" ",t.isSubmitting?"Uploading...":"Update Map"," "),k(),J("ngIf",t.successMessage),k(),J("ngIf",t.errorMessage)}}function e5(n,e){n&1&&(P(0,"div",49)(1,"p"),B(2,"Select a map to edit its card image."),x()())}function t5(n,e){if(n&1){let t=ui();P(0,"div",11)(1,"div",32)(2,"div",33)(3,"label"),B(4,"Select Map"),x(),P(5,"select",34),Pe("ngModelChange",function(i){Ge(t);let s=ae();return We(s.onMapSelect(i))}),P(6,"option",35),B(7,"Choose a map..."),x(),ke(8,K6,2,2,"option",17),Kt(9,"async"),x()()(),ke(10,X6,18,8,"div",36)(11,e5,3,0,"div",37),x()}if(n&2){let t=ae();k(5),J("ngModel",t.selectedMap==null?null:t.selectedMap.id),k(),J("value",null),k(2),J("ngForOf",Qt(9,5,t.maps$)),k(2),J("ngIf",t.selectedMap),k(),J("ngIf",!t.selectedMap)}}function n5(n,e){if(n&1&&(P(0,"option",29),B(1),x()),n&2){let t=e.$implicit;J("value",t.id),k(),He(t.name)}}function r5(n,e){if(n&1&&(P(0,"option",56),B(1),x()),n&2){let t=e.$implicit;J("ngValue",t),k(),He(t.title)}}function i5(n,e){if(n&1){let t=ui();P(0,"div",13)(1,"label"),B(2,"2. Select Nade"),x(),P(3,"select",50),Et("ngModelChange",function(i){Ge(t);let s=ae(2);return xt(s.selectedSmokeForEdit,i)||(s.selectedSmokeForEdit=i),We(i)}),Pe("change",function(){Ge(t);let i=ae(2);return We(i.onEditSmokeSelect())}),P(4,"option",54),B(5,"Choose a nade..."),x(),ke(6,r5,2,2,"option",55),Kt(7,"async"),x()()}if(n&2){let t=ae(2);k(3),wt("ngModel",t.selectedSmokeForEdit),k(),J("ngValue",null),k(2),J("ngForOf",Qt(7,3,t.filteredSmokesForEdit$))}}function s5(n,e){if(n&1){let t=ui();P(0,"div",57)(1,"form",12,1),Pe("ngSubmit",function(){Ge(t);let i=ae(2);return We(i.onSubmit())}),P(3,"div",13)(4,"label"),B(5,"Title"),x(),P(6,"input",58),Et("ngModelChange",function(i){Ge(t);let s=ae(2);return xt(s.smoke.title,i)||(s.smoke.title=i),We(i)}),x()(),P(7,"div",13)(8,"label"),B(9,"Description"),x(),P(10,"textarea",59),Et("ngModelChange",function(i){Ge(t);let s=ae(2);return xt(s.smoke.description,i)||(s.smoke.description=i),We(i)}),x()(),P(11,"div",13)(12,"label"),B(13,"Video URL"),x(),P(14,"input",60),Et("ngModelChange",function(i){Ge(t);let s=ae(2);return xt(s.smoke.videoUrl,i)||(s.smoke.videoUrl=i),We(i)}),x()(),P(15,"div",61)(16,"button",62),B(17),x(),P(18,"button",63),Pe("click",function(){Ge(t);let i=ae(2);return We(i.deleteSmoke())}),B(19," Delete Nade "),x()()()()}if(n&2){let t=gc(2),r=ae(2);k(6),wt("ngModel",r.smoke.title),k(4),wt("ngModel",r.smoke.description),k(4),wt("ngModel",r.smoke.videoUrl),k(2),J("disabled",!t.form.valid||r.isSubmitting),k(),Wt(" ",r.isSubmitting?"Saving...":"Update Nade"," ")}}function o5(n,e){if(n&1&&(P(0,"p",30),B(1),x()),n&2){let t=ae(2);k(),He(t.successMessage)}}function a5(n,e){if(n&1&&(P(0,"p",31),B(1),x()),n&2){let t=ae(2);k(),He(t.errorMessage)}}function c5(n,e){n&1&&(P(0,"div",49)(1,"p"),B(2,"Select a nade to edit."),x()())}function u5(n,e){if(n&1){let t=ui();P(0,"div",11)(1,"div",32)(2,"div",13)(3,"label"),B(4,"1. Select Map"),x(),P(5,"select",50),Et("ngModelChange",function(i){Ge(t);let s=ae();return xt(s.selectedMapForEdit,i)||(s.selectedMapForEdit=i),We(i)}),Pe("change",function(){Ge(t);let i=ae();return We(i.onEditMapSelect())}),P(6,"option",51),B(7,"Choose a map..."),x(),ke(8,n5,2,2,"option",17),Kt(9,"async"),x()(),ke(10,i5,8,5,"div",52),x(),ke(11,s5,20,5,"div",53)(12,o5,2,1,"p",27)(13,a5,2,1,"p",28)(14,c5,3,0,"div",37),x()}if(n&2){let t=ae();k(5),wt("ngModel",t.selectedMapForEdit),k(3),J("ngForOf",Qt(9,7,t.maps$)),k(2),J("ngIf",t.selectedMapForEdit),k(),J("ngIf",t.selectedSmokeForEdit),k(),J("ngIf",t.successMessage),k(),J("ngIf",t.errorMessage),k(),J("ngIf",!t.selectedSmokeForEdit&&t.selectedMapForEdit&&!t.successMessage)}}var Tp=class n{constructor(e,t,r){this.authService=e;this.smokeService=t;this.router=r;this.maps$=this.smokeService.getMaps(),this.loadSmokes()}storage=O(js);smoke={id:"",mapId:"",title:"",description:"",imageUrl:"",type:"smoke",videoUrl:""};selectedFile=null;maps$;isSubmitting=!1;successMessage="";errorMessage="";viewMode="add-content";smokes$=new ce;selectedMap=null;selectedMapForEdit="";filteredSmokesForEdit$=te([]);selectedSmokeForEdit=null;loadSmokes(){this.smokes$=this.smokeService.getAllSmokes()}switchMode(e){this.viewMode=e,this.resetForm(),e==="manage-maps"&&(this.selectedMap=null),e==="edit-nades"&&(this.selectedMapForEdit="",this.selectedSmokeForEdit=null,this.filteredSmokesForEdit$=te([]))}onMapSelect(e){return g(this,null,function*(){e&&this.maps$.pipe(Ft(1)).subscribe(t=>{let r=t.find(i=>i.id===e);r&&(console.log("Selected Map:",r),this.selectedMap=V({},r),this.selectedFile=null)})})}onEditMapSelect(){this.selectedSmokeForEdit=null,this.selectedMapForEdit?this.filteredSmokesForEdit$=this.smokes$.pipe(Q(e=>e.filter(r=>r.mapId===this.selectedMapForEdit))):this.filteredSmokesForEdit$=te([])}onEditSmokeSelect(){this.selectedSmokeForEdit&&(this.smoke=V({},this.selectedSmokeForEdit))}deleteSmoke(){return g(this,null,function*(){if(this.selectedSmokeForEdit&&confirm(`Are you sure you want to delete "${this.selectedSmokeForEdit.title}"?`))try{yield this.smokeService.deleteSmoke(this.selectedSmokeForEdit.id),this.showMessage("success","Nade deleted successfully."),this.selectedSmokeForEdit=null,this.loadSmokes(),this.onEditMapSelect()}catch(e){this.showMessage("error","Deletion failed: "+e.message)}})}logout(){return g(this,null,function*(){yield this.authService.logout(),this.router.navigate(["/login"])})}onSubmit(){return g(this,null,function*(){this.isSubmitting=!0,this.successMessage="",this.errorMessage="";try{let e="";if(this.selectedFile){let r=`${this.viewMode==="manage-maps"?"maps":"smokes"}/${Date.now()}_${this.selectedFile.name}`,i=rx(this.storage,r),s=yield ix(i,this.selectedFile);e=yield tx(s.ref)}if(this.viewMode==="add-content")e&&(this.smoke.imageUrl=e),yield this.smokeService.addSmoke(this.smoke),this.showMessage("success","Content added successfully!"),this.resetForm();else if(this.viewMode==="manage-maps"){if(!this.selectedMap)throw new Error("No map selected");e&&(this.selectedMap.image=e),yield this.smokeService.updateMap(this.selectedMap),this.showMessage("success","Map updated successfully!")}else if(this.viewMode==="edit-nades"){if(!this.smoke.id)throw new Error("No nade selected");e&&(this.smoke.imageUrl=e),yield this.smokeService.updateSmoke(this.smoke),this.showMessage("success","Nade updated successfully!"),this.loadSmokes()}}catch(e){console.error(e),this.showMessage("error","Operation failed: "+e.message)}finally{this.isSubmitting=!1}})}showMessage(e,t){e==="success"?(this.successMessage=t,this.errorMessage=""):(this.errorMessage=t,this.successMessage=""),setTimeout(()=>{this.successMessage="",this.errorMessage=""},3e3)}onFileSelected(e){this.selectedFile=e.target.files[0]}removeFile(){this.selectedFile=null;let e=document.querySelector('input[type="file"]');e&&(e.value="")}resetForm(){this.selectedFile=null,this.smoke={id:"",mapId:this.smoke.mapId,title:"",description:"",imageUrl:"",type:"smoke",videoUrl:""}}static \u0275fac=function(t){return new(t||n)(Z(Ra),Z(Vi),Z(Cr))};static \u0275cmp=sn({type:n,selectors:[["app-admin"]],standalone:!0,features:[an],decls:31,vars:12,consts:[["smokeForm","ngForm"],["editSmokeForm","ngForm"],[1,"admin-wrapper"],[1,"sidebar"],[1,"logo"],[3,"click"],[1,"icon"],[1,"logout-btn",3,"click"],[1,"content"],[4,"ngIf"],["class","form-card",4,"ngIf"],[1,"form-card"],[3,"ngSubmit"],[1,"form-group"],["type","text","name","title","required","","placeholder","Ex: Mirage Window Smoke",3,"ngModelChange","ngModel"],[1,"form-row"],["name","mapId","required","",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["name","type","required","",3,"ngModelChange","ngModel"],["value","smoke"],["value","molotov"],["value","flash"],["value","grenade"],["type","text","name","videoUrl","placeholder","https://youtu.be/...",3,"ngModelChange","ngModel"],["name","description","rows","4",3,"ngModelChange","ngModel"],[1,"actions"],["type","submit",1,"submit-btn",3,"disabled"],["class","success",4,"ngIf"],["class","error",4,"ngIf"],[3,"value"],[1,"success"],[1,"error"],[1,"media-selectors"],[1,"form-group",2,"grid-column","span 2"],[3,"ngModelChange","ngModel"],["disabled","","selected","",3,"value"],["class","media-upload-area",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"media-upload-area"],["class","current-preview",4,"ngIf"],["type","file","accept","image/*",3,"change"],["class","file-info",4,"ngIf"],[1,"hint"],["type","text","name","mapImage","placeholder","https://...",3,"ngModelChange","ngModel"],[1,"submit-btn",3,"click","disabled"],[1,"current-preview"],["alt","Map Preview",3,"src"],[1,"file-info"],["type","button",1,"remove-file-btn",3,"click"],[1,"empty-state"],[3,"ngModelChange","change","ngModel"],["value","","disabled","","selected",""],["class","form-group",4,"ngIf"],["class","edit-nade-area",4,"ngIf"],["disabled","","selected","",3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[1,"edit-nade-area"],["type","text","name","editTitle","required","",3,"ngModelChange","ngModel"],["name","editDescription","rows","4",3,"ngModelChange","ngModel"],["type","text","name","editVideoUrl",3,"ngModelChange","ngModel"],[1,"actions",2,"margin-top","20px"],["type","submit",1,"submit-btn",2,"flex","1",3,"disabled"],["type","button",1,"submit-btn",2,"background-color","#f75a68","flex","1",3,"click"]],template:function(t,r){t&1&&(P(0,"div",2)(1,"aside",3)(2,"div",4)(3,"h2"),B(4,"CS2 ADMIN"),x()(),P(5,"nav")(6,"button",5),Pe("click",function(){return r.switchMode("add-content")}),P(7,"span",6),B(8,"+"),x(),B(9," Add Nade "),x(),P(10,"button",5),Pe("click",function(){return r.switchMode("manage-maps")}),P(11,"span",6),B(12,"\u{1F5BC}\uFE0F"),x(),B(13," Manage Maps "),x(),P(14,"button",5),Pe("click",function(){return r.switchMode("edit-nades")}),P(15,"span",6),B(16,"\u270F\uFE0F"),x(),B(17," Edit Nades "),x(),P(18,"button",7),Pe("click",function(){return r.logout()}),P(19,"span",6),B(20,"\u{1F6AA}"),x(),B(21," Logout "),x()()(),P(22,"main",8)(23,"header")(24,"h1"),ke(25,B6,2,0,"ng-container",9)(26,$6,2,0,"ng-container",9)(27,H6,2,0,"ng-container",9),x()(),ke(28,W6,39,12,"div",10)(29,t5,12,7,"div",10)(30,u5,15,9,"div",10),x()()),t&2&&(k(6),ci("active",r.viewMode==="add-content"),k(4),ci("active",r.viewMode==="manage-maps"),k(4),ci("active",r.viewMode==="edit-nades"),k(11),J("ngIf",r.viewMode==="add-content"),k(),J("ngIf",r.viewMode==="manage-maps"),k(),J("ngIf",r.viewMode==="edit-nades"),k(),J("ngIf",r.viewMode==="add-content"),k(),J("ngIf",r.viewMode==="manage-maps"),k(),J("ngIf",r.viewMode==="edit-nades"))},dependencies:[Ir,Mo,mi,No,Ep,Ip,Sx,Rx,Aa,wp,yp,vp,Ku,Wu,Gu],styles:[".admin-wrapper[_ngcontent-%COMP%]{display:flex;min-height:100vh;background-color:var(--leet-bg);color:var(--leet-text);font-family:var(--font-family-base)}.sidebar[_ngcontent-%COMP%]{width:250px;background-color:var(--leet-surface);border-right:1px solid var(--leet-border);display:flex;flex-direction:column;padding:20px}.logo[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--leet-accent);font-size:1.5rem;margin-bottom:40px;font-weight:700;text-transform:uppercase;letter-spacing:1px}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:none;color:var(--leet-text-muted);padding:12px 16px;border-radius:8px;cursor:pointer;text-align:left;font-size:1rem;display:flex;align-items:center;gap:10px;transition:all .2s}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:var(--leet-text);background-color:var(--leet-surface-light)}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:var(--leet-accent);color:#fff;font-weight:600}.logout-btn[_ngcontent-%COMP%]{margin-top:auto;color:#f75a68!important}.logout-btn[_ngcontent-%COMP%]:hover{background-color:#f75a681a!important}.content[_ngcontent-%COMP%]{flex:1;padding:40px;overflow-y:auto}header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:30px;color:var(--leet-text)}.form-card[_ngcontent-%COMP%]{background-color:var(--leet-surface);border-radius:8px;padding:32px;max-width:800px;border:1px solid var(--leet-border)}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;color:var(--leet-text-muted);font-size:.9rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;background-color:var(--leet-bg);border:1px solid var(--leet-border);border-radius:6px;padding:12px 16px;color:var(--leet-text);font-size:1rem;outline:none;transition:border-color .2s}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border-color:var(--leet-accent)}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px}.submit-btn[_ngcontent-%COMP%]{width:100%;background-color:var(--leet-accent);color:#fff;border:none;padding:14px;border-radius:6px;font-weight:600;font-size:1rem;cursor:pointer;transition:background-color .2s;margin-top:10px}.submit-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--leet-accent-hover)}.submit-btn[_ngcontent-%COMP%]:disabled{background-color:var(--leet-surface-light);cursor:not-allowed;opacity:.7}.media-selectors[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px;padding-bottom:20px;border-bottom:1px solid var(--leet-border);margin-bottom:20px}.media-upload-area[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--leet-text);margin-bottom:20px;font-weight:500}.media-upload-area[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--leet-accent);font-weight:700}.current-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:200px;border-radius:6px;border:2px solid var(--leet-border);margin-top:5px;margin-bottom:20px}.hint[_ngcontent-%COMP%]{color:var(--leet-text-muted);font-size:.8rem;margin-top:8px;margin-bottom:4px}.success[_ngcontent-%COMP%]{color:#4cd62b;margin-top:15px;font-size:.9rem;background:#4cd62b1a;padding:10px;border-radius:4px}.error[_ngcontent-%COMP%]{color:#e83f5b;margin-top:15px;font-size:.9rem;background:#e83f5b1a;padding:10px;border-radius:4px}.empty-state[_ngcontent-%COMP%]{text-align:center;color:var(--leet-text-muted);padding:40px;font-style:italic}"]})};var $E=Q(n=>!!n),l5=(()=>{class n{router;auth;constructor(t,r){this.router=t,this.auth=r}canActivate=(t,r)=>{let i=t.data.authGuardPipe||(()=>$E);return wM(this.auth).pipe(Ft(1),i(t,r),Q(s=>typeof s=="boolean"?s:Array.isArray(s)?this.router.createUrlTree(s):this.router.parseUrl(s)))};static \u0275fac=function(r){return new(r||n)(X(Cr),X(Or))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),HE=n=>({canActivate:[l5],data:{authGuardPipe:n}});var Px=n=>Ys($E,Q(e=>e||n)),xx=n=>Ys($E,Q(e=>e&&n||!0));var d5=()=>Px(["login"]),h5=()=>xx(["admin"]),kx=[{path:"",component:ip},{path:"map/:id",component:cp},V({path:"login",component:bp},HE(h5)),V({path:"admin",component:Tp},HE(d5)),{path:"**",redirectTo:""}];var Ox={providers:[GD({eventCoalescing:!0}),lA(kx,dA()),vS(),FA(()=>UA({apiKey:"AIzaSyBGfVwh8L5D2OFZm_G1AXj8sRBQ9Hrz_dc",authDomain:"cs2-smokes-4de6e.firebaseapp.com",projectId:"cs2-smokes-4de6e",storageBucket:"cs2-smokes-4de6e.firebasestorage.app",messagingSenderId:"876456087389",appId:"1:876456087389:web:ea004c433c44e4352222b4",measurementId:"G-ZD0SCT3K15"})),wP(()=>{let n=VA();return bP(n,{experimentalAutoDetectLongPolling:!0})}),_M(()=>EM()),ex(()=>nx())]};var Cp=class n{title="CS2 Smokes";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=sn({type:n,selectors:[["app-root"]],standalone:!0,features:[an],decls:9,vars:0,consts:[[1,"app-container"],[1,"app-header"],[1,"logo"],[1,"app-footer"]],template:function(t,r){t&1&&(P(0,"div",0)(1,"header",1)(2,"div",2),B(3,"CS2 SMOKES"),x()(),P(4,"main"),It(5,"router-outlet"),x(),P(6,"footer",3)(7,"p"),B(8,"\xA9 2026 CS2 Smokes Catalog"),x()()())},dependencies:[mv],styles:['.app-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100vh}.app-header[_ngcontent-%COMP%]{background-color:#14161af2;background:var(--leet-surface);color:#fff;padding:1rem 2rem;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid var(--leet-border);position:sticky;top:0;z-index:1000}.logo[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:800;letter-spacing:1px;color:var(--leet-text);display:flex;align-items:center;gap:.5rem}.logo[_ngcontent-%COMP%]:before{content:"";display:block;width:8px;height:24px;background:var(--leet-accent);border-radius:2px}main[_ngcontent-%COMP%]{flex:1}.app-footer[_ngcontent-%COMP%]{background:var(--leet-bg);color:var(--leet-text-muted);padding:2rem;text-align:center;font-size:.875rem;border-top:1px solid var(--leet-border)}']})};DS(Cp,Ox).catch(n=>console.error(n));
